import{c as $,b as Y,s as O,o as d,w as tt,f as t,n as H,e as u,k as E,t as f,F as R,h as W,i as Z,a as ot,r as M,m as et,E as nt,p as j,G as at,j as st,g as lt,C as Q,H as X,I as rt,l as L}from"./vendor-2iZwFq-s.js";import{a as it,b as dt,u as ct,c as ut}from"./index-CJERu82x.js";import{g as pt}from"./InstrumentIcon.vue_vue_type_style_index_0_scoped_cbf9e092_lang-D-dukWxj.js";import{L as _}from"./leaflet-src-DUdEndMj.js";import{_ as mt}from"./ExportModal-pdKoQhTK.js";const ft={class:"flex items-start justify-between gap-3"},vt={class:"flex-1 min-w-0"},gt={class:"flex items-center gap-2"},ht={class:"card-title text-lg truncate"},xt={class:"flex items-center gap-2 mt-1"},bt={class:"badge badge-outline badge-sm font-mono"},yt={key:0,class:"text-xs text-base-content/50 hidden sm:inline"},wt={class:"flex-shrink-0"},kt={key:0,class:"text-sm text-base-content/60 line-clamp-2 mt-2"},_t={class:"text-center"},Mt={class:"text-2xl font-bold text-primary"},$t={key:0,class:"flex justify-center gap-1 mt-1"},Pt=["title"],zt={class:"text-center"},St={class:"text-2xl font-bold text-secondary"},Lt={key:0,class:"text-center"},Ct={class:"text-2xl font-bold text-accent"},Bt={class:"flex items-center justify-between mt-3 pt-2 text-xs text-base-content/50"},Vt={key:0,class:"truncate"},At={key:1},jt={__name:"StationCard",props:{station:{type:Object,required:!0},compact:{type:Boolean,default:!1}},setup(p){const y=p,C=$(()=>pt(y.station.status)),l=$(()=>{const{latitude:b,longitude:g}=y.station;if(b&&g){const a=Number(b).toFixed(4),x=Number(g).toFixed(4);return`${a}°N, ${x}°E`}return null}),w=$(()=>{const b=[];return y.station.fixed_count&&b.push({type:"Fixed",count:y.station.fixed_count,color:"text-info"}),y.station.uav_count&&b.push({type:"UAV",count:y.station.uav_count,color:"text-warning"}),y.station.satellite_count&&b.push({type:"Satellite",count:y.station.satellite_count,color:"text-accent"}),b});return(b,g)=>{const a=Y("router-link");return d(),O(a,{to:`/stations/${p.station.acronym}`,class:"card bg-base-100 shadow-md hover:shadow-xl transition-all duration-200 cursor-pointer border border-base-200 hover:border-primary/30"},{default:tt(()=>[t("div",{class:H(["card-body",p.compact?"p-4":"p-5"])},[t("div",ft,[t("div",vt,[t("div",gt,[t("h3",ht,f(p.station.display_name),1)]),t("div",xt,[t("span",bt,f(p.station.acronym),1),l.value?(d(),u("span",yt,f(l.value),1)):E("",!0)])]),t("div",wt,[t("span",{class:H(["badge badge-sm",C.value.badgeClass])},f(p.station.status),3)])]),p.station.description&&!p.compact?(d(),u("p",kt,f(p.station.description),1)):E("",!0),t("div",{class:H(["grid gap-2 mt-4 pt-4 border-t border-base-200",p.compact?"grid-cols-2":"grid-cols-3"])},[t("div",_t,[t("div",Mt,f(p.station.platform_count||0),1),g[0]||(g[0]=t("div",{class:"text-xs text-base-content/60"},"Platforms",-1)),w.value.length>0?(d(),u("div",$t,[(d(!0),u(R,null,W(w.value,x=>(d(),u("span",{key:x.type,class:H(["text-xs",x.color]),title:x.type},f(x.count),11,Pt))),128))])):E("",!0)]),t("div",zt,[t("div",St,f(p.station.instrument_count||0),1),g[1]||(g[1]=t("div",{class:"text-xs text-base-content/60"},"Instruments",-1))]),p.compact?E("",!0):(d(),u("div",Lt,[t("div",Ct,f(p.station.roi_count||0),1),g[2]||(g[2]=t("div",{class:"text-xs text-base-content/60"},"ROIs",-1))]))],2),t("div",Bt,[p.station.updated_at?(d(),u("span",Vt," Updated "+f(new Date(p.station.updated_at).toLocaleDateString()),1)):(d(),u("span",At)),g[3]||(g[3]=t("span",{class:"flex items-center gap-1 text-primary flex-shrink-0"},[Z(" View details "),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])],2)]),_:1},8,["to"])}}},Nt={class:"station-map-container rounded-lg overflow-hidden border border-base-300"},Ht={class:"absolute bottom-3 left-3 bg-base-100/90 rounded-lg p-2 shadow-md z-[1000]"},Et={class:"flex flex-wrap items-center gap-3 text-xs"},Ft={class:"absolute top-3 right-3 bg-base-100/90 rounded-lg px-3 py-1 shadow-md z-[1000]"},It={class:"text-sm font-medium"},Gt={__name:"StationMap",props:{stations:{type:Array,default:()=>[]},platforms:{type:Array,default:()=>[]},otherPlatforms:{type:Array,default:()=>[]},showPlatforms:{type:Boolean,default:!0},height:{type:[Number,String],default:400},clickable:{type:Boolean,default:!0},zoom:{type:Number,default:5},center:{type:Array,default:()=>[62,16]},selectedId:{type:[Number,String],default:null}},emits:["station-click","station-hover","platform-click"],setup(p,{expose:y,emit:C}){const l=p,w=C,b=ot(),g=M(null);let a=null,x=[],P=[],N=new Map,h=[];const B=$(()=>({height:typeof l.height=="number"?`${l.height}px`:l.height}));function U(n,s=!1){const v=s?"#7c3aed":"#3b82f6",r=s?14:10;return _.divIcon({className:"station-marker",html:`
      <div style="
        width: ${r}px;
        height: ${r}px;
        background-color: ${v};
        border: 2px solid white;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        cursor: pointer;
      "></div>
    `,iconSize:[r,r],iconAnchor:[r/2,r/2]})}function F(n,s=!1){var e,i;const v=((i=(e=n.mount_type_code)==null?void 0:e.match(/^([A-Z]+)/))==null?void 0:i[1])||"PL",z={PL:"#f97316",BL:"#14b8a6",GL:"#22c55e"}[v]||"#f97316",k=s?{left:4,right:4,bottom:8}:{left:6,right:6,bottom:12},S=s?.35:1,o=s?"none":"drop-shadow(0 2px 2px rgba(0,0,0,0.3))";return _.divIcon({className:s?"platform-marker-dimmed":"platform-marker",html:`
      <div style="
        width: 0;
        height: 0;
        border-left: ${k.left}px solid transparent;
        border-right: ${k.right}px solid transparent;
        border-bottom: ${k.bottom}px solid ${z};
        opacity: ${S};
        filter: ${o};
        cursor: ${s?"default":"pointer"};
      "></div>
    `,iconSize:[k.left*2,k.bottom],iconAnchor:[k.left,k.bottom]})}function I(n){var r,z,k,S;const s=((z=(r=n.mount_type_code)==null?void 0:r.match(/^([A-Z]+)/))==null?void 0:z[1])||"?",v={PL:"Tower/Mast",BL:"Building",GL:"Ground Level"};return`
    <div style="min-width: 200px; font-family: system-ui, sans-serif;">
      <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">
        <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
          ${n.normalized_name||n.display_name}
        </code>
      </div>
      <div style="font-size: 12px; color: #666; margin-bottom: 4px;">
        ${n.display_name||""}
      </div>
      <div style="font-size: 11px; color: #888; margin-bottom: 4px;">
        <strong>Mount:</strong> ${v[s]||s} (${n.mount_type_code||"?"})
      </div>
      <div style="font-size: 11px; color: #888; margin-bottom: 4px;">
        <strong>Ecosystem:</strong> ${n.ecosystem_code||"N/A"}
      </div>
      <div style="font-size: 11px; color: #888;">
        ${((k=n.latitude)==null?void 0:k.toFixed(5))||"?"}, ${((S=n.longitude)==null?void 0:S.toFixed(5))||"?"}
      </div>
    </div>
  `}function q(n){var v,r;const s=n.status==="Active"?"color: #22c55e":"color: #ef4444";return`
    <div style="min-width: 180px; font-family: system-ui, sans-serif;">
      <div style="font-weight: 600; font-size: 14px; margin-bottom: 4px;">
        ${n.display_name||n.acronym}
      </div>
      <div style="font-size: 12px; color: #666; margin-bottom: 8px;">
        <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
          ${n.acronym}
        </code>
      </div>
      <div style="font-size: 12px; margin-bottom: 4px;">
        <span style="${s}">●</span> ${n.status||"Unknown"}
      </div>
      <div style="font-size: 11px; color: #888;">
        ${((v=n.latitude)==null?void 0:v.toFixed(4))||"?"}, ${((r=n.longitude)==null?void 0:r.toFixed(4))||"?"}
      </div>
    </div>
  `}function K(){!g.value||a||(a=_.map(g.value,{center:l.center,zoom:l.zoom,zoomControl:!0,attributionControl:!0}),_.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}).addTo(a),T())}function T(){if(!a)return;x.forEach(s=>a.removeLayer(s)),x=[],l.stations.forEach(s=>{if(s.latitude==null||s.longitude==null)return;const v=s.id===l.selectedId,r=_.marker([s.latitude,s.longitude],{icon:U(s,v)});r.bindPopup(q(s)),r.on("click",()=>{w("station-click",s),l.clickable&&b.push({name:"station",params:{acronym:s.acronym}})}),r.on("mouseover",()=>{w("station-hover",s),r.openPopup()}),r.addTo(a),x.push(r)}),V();const n=[...x,...P];if(n.length>0){const s=_.featureGroup(n);a.fitBounds(s.getBounds().pad(.2))}}function V(){a&&(P.forEach(n=>a.removeLayer(n)),P=[],N.clear(),l.showPlatforms&&l.platforms.forEach(n=>{if(n.latitude==null||n.longitude==null||n.platform_type!=="fixed")return;const s=_.marker([n.latitude,n.longitude],{icon:F(n,!1)});s.bindPopup(I(n)),s.on("click",()=>{w("platform-click",n),l.clickable&&b.push({name:"platform",params:{id:n.id}})}),s.on("mouseover",()=>{s.openPopup()}),s.addTo(a),P.push(s),N.set(n.id,s)}))}function D(){var n;a&&(h.forEach(s=>a.removeLayer(s)),h=[],!(!l.showPlatforms||!((n=l.otherPlatforms)!=null&&n.length))&&l.otherPlatforms.forEach(s=>{if(s.latitude==null||s.longitude==null||s.platform_type!=="fixed")return;const v=_.marker([s.latitude,s.longitude],{icon:F(s,!0)});v.bindPopup(`
      <div style="min-width: 150px; font-family: system-ui, sans-serif; opacity: 0.8;">
        <div style="font-weight: 500; font-size: 12px; color: #888;">
          <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
            ${s.normalized_name||s.display_name}
          </code>
        </div>
        <div style="font-size: 11px; color: #aaa; margin-top: 4px;">
          Other station platform
        </div>
      </div>
    `),v.on("mouseover",()=>{v.openPopup()}),v.addTo(a),h.push(v)}))}function A(){a&&(a.remove(),a=null,x=[],P=[],N.clear(),h=[])}return et(()=>{K()}),nt(()=>{A()}),j(()=>l.stations,T,{deep:!0}),j(()=>l.selectedId,T),j(()=>l.platforms,V,{deep:!0}),j(()=>l.showPlatforms,()=>{V(),D()}),j(()=>l.otherPlatforms,D,{deep:!0}),j(()=>l.center,n=>{a&&a.setView(n,l.zoom)}),y({fitBounds:()=>{const n=[...x,...P,...h];if(a&&n.length>0){const s=_.featureGroup(n);a.fitBounds(s.getBounds().pad(.2))}},setView:(n,s)=>{a&&a.setView(n,s||l.zoom)},highlightPlatform:n=>{if(!a||!n)return;const s=typeof n=="string"?parseInt(n,10):n,v=N.get(n)||N.get(s);if(!v)return;const r=l.platforms.find(z=>z.id===n||z.id===s);!r||r.latitude==null||r.longitude==null||(a.setView([r.latitude,r.longitude],14,{animate:!0}),v.openPopup())},clearHighlight:()=>{if(a){a.closePopup();const n=[...x,...P,...h];if(n.length>0){const s=_.featureGroup(n);a.fitBounds(s.getBounds().pad(.2),{animate:!0})}}}}),(n,s)=>(d(),u("div",Nt,[t("div",{ref_key:"mapContainer",ref:g,class:"w-full",style:at(B.value)},null,4),t("div",Ht,[t("div",Et,[s[1]||(s[1]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),t("span",null,"Station")],-1)),s[2]||(s[2]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"w-3.5 h-3.5 bg-purple-500 rounded-full border-2 border-white shadow"}),t("span",null,"Selected")],-1)),p.showPlatforms&&p.platforms.length>0?(d(),u(R,{key:0},[s[0]||(s[0]=st('<span class="text-base-content/40" data-v-745c5481>|</span><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-orange-500" data-v-745c5481></span><span data-v-745c5481>Tower</span></div><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-teal-500" data-v-745c5481></span><span data-v-745c5481>Building</span></div><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-green-500" data-v-745c5481></span><span data-v-745c5481>Ground</span></div>',4))],64)):E("",!0)])]),t("div",Ft,[t("span",It,f(p.stations.length)+" station"+f(p.stations.length!==1?"s":""),1)])]))}},Ut=it(Gt,[["__scopeId","data-v-745c5481"]]),Tt={class:"flex items-start justify-between mb-6"},Dt={class:"text-base-content/60"},Ot={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},Zt={class:"stat bg-base-100 rounded-lg shadow"},Rt={class:"stat-value text-primary"},qt={class:"stat-desc"},Kt={class:"stat bg-base-100 rounded-lg shadow"},Qt={class:"stat-value text-secondary"},Wt={class:"stat bg-base-100 rounded-lg shadow"},Jt={class:"stat-value text-accent"},Xt={class:"bg-base-100 rounded-lg shadow-lg p-4 mb-8"},Yt={class:"flex items-center justify-between mb-4"},te={class:"flex items-center gap-4"},ee={class:"label cursor-pointer gap-2"},se=["disabled"],oe={key:0,class:"loading loading-spinner loading-xs"},ne={class:"label cursor-pointer gap-2"},ae={key:1,class:"h-[350px] flex items-center justify-center bg-base-200 rounded-lg"},le={key:2,class:"h-[350px] flex items-center justify-center bg-base-200 rounded-lg text-base-content/60"},re={key:0,class:"flex justify-center py-12"},ie={key:1,class:"alert alert-error"},de={key:2},ce={class:"text-lg font-semibold mb-4 flex items-center gap-2"},ue={key:0,class:"flex justify-center py-8"},pe={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},me={class:"card-body p-4"},fe={class:"flex items-start gap-3"},ve=["title"],ge=["d"],he={class:"flex-1 min-w-0"},xe={class:"font-semibold text-sm truncate font-mono"},be={class:"text-xs text-base-content/60 truncate"},ye={class:"flex items-center gap-1 mt-2"},we={class:"text-xs font-medium"},ke={key:0,class:"col-span-full text-center py-8 text-base-content/50"},_e={key:3},Me={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Be={__name:"DashboardView",setup(p){const y=M(!0),C=M(!1),l=M([]),w=M(!1),b=M(null),g=M(!1),a=ut();function x(o){a.success(`Exported ${o.type} as ${o.format.toUpperCase()}`)}function P(o){var e;o.platform_type==="fixed"&&o.latitude&&o.longitude&&((e=b.value)==null||e.highlightPlatform(o.id))}function N(){var o;(o=b.value)==null||o.clearHighlight()}const h=dt(),B=ct(),U=M([]),F=M(!1),I=M([]);et(async()=>{await h.fetchStations()});async function q(o){if(!o){I.value=[];return}try{const e=await fetch(`/api/v11/platforms/station/${o}`);if(e.ok){const i=await e.json();I.value=(i.data||[]).filter(c=>c.platform_type==="fixed"&&c.latitude!=null&&c.longitude!=null)}}catch(e){console.error("Failed to load platforms for station:",e),I.value=[]}}async function K(){if(!w.value){w.value=!0;try{const o=await fetch("/api/v11/platforms?limit=500");if(o.ok){const e=await o.json();l.value=(e.data||[]).filter(i=>i.platform_type==="fixed"&&i.latitude!=null&&i.longitude!=null)}}catch(o){console.error("Failed to load all platforms:",o),l.value=[]}finally{w.value=!1}}}const T=$(()=>C.value?A.value?l.value.filter(o=>o.station_id!==A.value.id):l.value:[]);j(C,async o=>{o&&l.value.length===0&&await K()});const V=$(()=>{var e;if(B.isAdmin)return h.stations;const o=(e=B.user)==null?void 0:e.station_normalized_name;return o?h.stations.filter(i=>{var c;return i.normalized_name===o||((c=i.acronym)==null?void 0:c.toLowerCase())===o.toLowerCase()}):h.stations}),D=$(()=>!B.isAdmin&&V.value.length===1),A=$(()=>D.value?V.value[0]:null);j(A,async o=>{if(o){F.value=!0;try{const e=await fetch(`/api/v11/platforms/station/${o.id}`);if(e.ok){const i=await e.json();U.value=i.data||[]}await q(o.id)}catch(e){console.error("Failed to load platforms:",e)}finally{F.value=!1}}},{immediate:!0});function n(o){const e={fixed:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",uav:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83",satellite:"M13 7L9 3 5 7l4 4M17 11l4 4-4 4-4-4M8 12l4 4 4-4-4-4-4 4zM16 8l3-3M5 16l3 3",mobile:"M8 17h.01M14 17h.01M8 17a2 2 0 11-4 0 2 2 0 014 0zm8 0a2 2 0 11-4 0 2 2 0 014 0zM5 17H3v-4a1 1 0 011-1h1V9a1 1 0 011-1h8a1 1 0 011 1v3h2a1 1 0 011 1v4h-2",usv:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",uuv:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"};return e[o]||e.fixed}function s(o){if(o.platform_type==="fixed"&&o.mount_type_code){const e=z(o.mount_type_code);if(e)return e}return n(o.platform_type)}function v(o){var i;if(o.platform_type==="fixed"&&o.mount_type_code){const c=(i=o.mount_type_code.match(/^([A-Z]+)/))==null?void 0:i[1];return{PL:"bg-info/10",BL:"bg-secondary/10",GL:"bg-success/10"}[c]||"bg-primary/10"}return{uav:"bg-warning/10",satellite:"bg-accent/10",mobile:"bg-neutral/10"}[o.platform_type]||"bg-primary/10"}function r(o){var i;if(o.platform_type==="fixed"&&o.mount_type_code){const c=(i=o.mount_type_code.match(/^([A-Z]+)/))==null?void 0:i[1];return{PL:"text-info",BL:"text-secondary",GL:"text-success"}[c]||"text-primary"}return{uav:"text-warning",satellite:"text-accent",mobile:"text-neutral"}[o.platform_type]||"text-primary"}function z(o){var c;if(!o)return null;const e=(c=o.match(/^([A-Z]+)/))==null?void 0:c[1];return{PL:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",BL:"M3 21h18M5 21V8l7-6 7 6v13M9 12h2v2H9M13 12h2v2h-2M11 21v-4h2v4",GL:"M12 22v-7M12 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8M12 7V4M8 9l-2-2M16 9l2-2"}[e]||null}const k=$(()=>{var e,i;const o=(e=B.user)==null?void 0:e.station_normalized_name;if(o&&!B.isAdmin){const c=h.stations.find(G=>G.normalized_name===o);if(c!=null&&c.display_name)return c.display_name}return((i=B.user)==null?void 0:i.username)||"User"}),S=$(()=>{const o=V.value;let e=0,i=0;return o.forEach(c=>{e+=c.platform_count||0,i+=c.instrument_count||0}),{stations:o.length,platforms:e,instruments:i,active:o.filter(c=>c.status==="Active").length}});return(o,e)=>{var c,G,J;const i=Y("router-link");return d(),u("div",null,[t("div",Tt,[t("div",null,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold"},"Dashboard",-1)),t("p",Dt," Welcome back, "+f(k.value),1)]),t("button",{class:"btn btn-outline btn-sm",onClick:e[0]||(e[0]=m=>g.value=!0)},[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Z(" Export Data ",-1)])])]),t("div",Ot,[t("div",Zt,[e[6]||(e[6]=t("div",{class:"stat-figure text-primary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})])],-1)),e[7]||(e[7]=t("div",{class:"stat-title"},"Stations",-1)),t("div",Rt,f(S.value.stations),1),t("div",qt,f(S.value.active)+" active",1)]),t("div",Kt,[e[8]||(e[8]=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e[9]||(e[9]=t("div",{class:"stat-title"},"Platforms",-1)),t("div",Qt,f(S.value.platforms),1),e[10]||(e[10]=t("div",{class:"stat-desc"},"Fixed, UAV, Satellite",-1))]),t("div",Wt,[e[11]||(e[11]=t("div",{class:"stat-figure text-accent"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})])],-1)),e[12]||(e[12]=t("div",{class:"stat-title"},"Instruments",-1)),t("div",Jt,f(S.value.instruments),1),e[13]||(e[13]=t("div",{class:"stat-desc"},"Across all platforms",-1))]),e[14]||(e[14]=st('<div class="stat bg-base-100 rounded-lg shadow"><div class="stat-figure text-info"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="stat-title">Status</div><div class="stat-value text-info">OK</div><div class="stat-desc">All systems operational</div></div>',1))]),t("div",Xt,[t("div",Yt,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})]),Z(" Station Locations ")],-1)),t("div",te,[t("label",ee,[e[15]||(e[15]=t("span",{class:"label-text text-xs text-base-content/60"},"Show all platforms",-1)),Q(t("input",{"onUpdate:modelValue":e[1]||(e[1]=m=>C.value=m),type:"checkbox",class:"toggle toggle-xs",disabled:w.value},null,8,se),[[X,C.value]]),w.value?(d(),u("span",oe)):E("",!0)]),t("label",ne,[e[16]||(e[16]=t("span",{class:"label-text text-sm"},"Show map",-1)),Q(t("input",{"onUpdate:modelValue":e[2]||(e[2]=m=>y.value=m),type:"checkbox",class:"toggle toggle-primary toggle-sm"},null,512),[[X,y.value]])])])]),Q(t("div",null,[!L(h).loading&&L(h).stations.length>0?(d(),O(L(Ut),{key:0,ref_key:"stationMapRef",ref:b,stations:L(h).stations,platforms:I.value,"other-platforms":T.value,"show-platforms":!0,height:350,clickable:!0,"selected-id":(c=A.value)==null?void 0:c.id},null,8,["stations","platforms","other-platforms","selected-id"])):L(h).loading?(d(),u("div",ae,[...e[18]||(e[18]=[t("span",{class:"loading loading-spinner loading-md"},null,-1)])])):(d(),u("div",le," No stations to display "))],512),[[rt,y.value]])]),L(h).loading?(d(),u("div",re,[...e[19]||(e[19]=[t("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):L(h).error?(d(),u("div",ie,[e[20]||(e[20]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,f(L(h).error),1)])):D.value?(d(),u("div",de,[t("h2",ce,[e[21]||(e[21]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),Z(" Quick Access - "+f(((G=A.value)==null?void 0:G.display_name)||((J=A.value)==null?void 0:J.acronym)),1)]),F.value?(d(),u("div",ue,[...e[22]||(e[22]=[t("span",{class:"loading loading-spinner loading-md"},null,-1)])])):(d(),u("div",pe,[(d(!0),u(R,null,W(U.value,m=>(d(),O(i,{key:m.id,to:`/platforms/${m.id}`,class:"card bg-base-100 shadow hover:shadow-lg transition-shadow cursor-pointer",onMouseenter:$e=>P(m),onMouseleave:N},{default:tt(()=>[t("div",me,[t("div",fe,[t("div",{class:H(["p-2.5 rounded-lg",v(m)]),title:m.mount_type_code||m.platform_type},[(d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",class:H(["h-6 w-6",r(m)]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:s(m)},null,8,ge)],2))],10,ve),t("div",he,[t("h3",xe,f(m.normalized_name),1),t("p",be,f(m.display_name),1),t("div",ye,[e[23]||(e[23]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})],-1)),t("span",we,f(m.instrument_count||0)+" instruments",1)])]),t("span",{class:H(["badge badge-xs",m.status==="Active"?"badge-success":"badge-ghost"])},f(m.status),3)])])]),_:2},1032,["to","onMouseenter"]))),128)),U.value.length===0?(d(),u("div",ke," No platforms found ")):E("",!0)]))])):(d(),u("div",_e,[e[24]||(e[24]=t("h2",{class:"text-lg font-semibold mb-4"},"Research Stations",-1)),t("div",Me,[(d(!0),u(R,null,W(V.value,m=>(d(),O(jt,{key:m.id,station:m},null,8,["station"]))),128))])])),lt(L(mt),{modelValue:g.value,"onUpdate:modelValue":e[3]||(e[3]=m=>g.value=m),"default-type":"stations",onExported:x},null,8,["modelValue"])])}}};export{Be as default};
