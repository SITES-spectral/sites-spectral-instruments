import{c as P,b as nt,s as G,o as r,w as et,f as t,n as F,e as m,k as C,t as g,F as J,h as st,i as T,a as at,r as $,m as lt,E as dt,p as j,G as ct,j as rt,g as ut,C as tt,H as ot,I as mt,l as S}from"./vendor-DjAAf7Gn.js";import{a as pt,b as ft,c as vt,u as gt,d as ht}from"./index-DtQr3kiy.js";import{g as xt}from"./InstrumentIcon.vue_vue_type_style_index_0_scoped_cbf9e092_lang-DMAKfwaO.js";import{L as z}from"./leaflet-src-DUdEndMj.js";import{_ as bt}from"./PlatformFormModal-CkVLzB7L.js";import{_ as yt}from"./ExportModal-D9cPAceT.js";const wt={class:"flex items-start justify-between gap-3"},kt={class:"flex-1 min-w-0"},_t={class:"flex items-center gap-2"},Mt={class:"card-title text-lg truncate"},$t={class:"flex items-center gap-2 mt-1"},Pt={class:"badge badge-outline badge-sm font-mono"},St={key:0,class:"text-xs text-base-content/50 hidden sm:inline"},zt={class:"flex-shrink-0"},Ct={key:0,class:"text-sm text-base-content/60 line-clamp-2 mt-2"},Lt={class:"text-center"},Bt={class:"text-2xl font-bold text-primary"},Vt={key:0,class:"flex justify-center gap-1 mt-1"},jt=["title"],At={class:"text-center"},Nt={class:"text-2xl font-bold text-secondary"},Et={key:0,class:"text-center"},Ht={class:"text-2xl font-bold text-accent"},Ft={class:"flex items-center justify-between mt-3 pt-2 text-xs text-base-content/50"},Ut={key:0,class:"truncate"},It={key:1},Gt={__name:"StationCard",props:{station:{type:Object,required:!0},compact:{type:Boolean,default:!1}},setup(v){const k=v,V=P(()=>xt(k.station.status)),l=P(()=>{const{latitude:w,longitude:h}=k.station;if(w&&h){const a=Number(w).toFixed(4),b=Number(h).toFixed(4);return`${a}°N, ${b}°E`}return null}),_=P(()=>{const w=[];return k.station.fixed_count&&w.push({type:"Fixed",count:k.station.fixed_count,color:"text-info"}),k.station.uav_count&&w.push({type:"UAV",count:k.station.uav_count,color:"text-warning"}),k.station.satellite_count&&w.push({type:"Satellite",count:k.station.satellite_count,color:"text-accent"}),w});return(w,h)=>{const a=nt("router-link");return r(),G(a,{to:`/stations/${v.station.acronym}`,class:"card bg-base-100 shadow-md hover:shadow-xl transition-all duration-200 cursor-pointer border border-base-200 hover:border-primary/30"},{default:et(()=>[t("div",{class:F(["card-body",v.compact?"p-4":"p-5"])},[t("div",wt,[t("div",kt,[t("div",_t,[t("h3",Mt,g(v.station.display_name),1)]),t("div",$t,[t("span",Pt,g(v.station.acronym),1),l.value?(r(),m("span",St,g(l.value),1)):C("",!0)])]),t("div",zt,[t("span",{class:F(["badge badge-sm",V.value.badgeClass])},g(v.station.status),3)])]),v.station.description&&!v.compact?(r(),m("p",Ct,g(v.station.description),1)):C("",!0),t("div",{class:F(["grid gap-2 mt-4 pt-4 border-t border-base-200",v.compact?"grid-cols-2":"grid-cols-3"])},[t("div",Lt,[t("div",Bt,g(v.station.platform_count||0),1),h[0]||(h[0]=t("div",{class:"text-xs text-base-content/60"},"Platforms",-1)),_.value.length>0?(r(),m("div",Vt,[(r(!0),m(J,null,st(_.value,b=>(r(),m("span",{key:b.type,class:F(["text-xs",b.color]),title:b.type},g(b.count),11,jt))),128))])):C("",!0)]),t("div",At,[t("div",Nt,g(v.station.instrument_count||0),1),h[1]||(h[1]=t("div",{class:"text-xs text-base-content/60"},"Instruments",-1))]),v.compact?C("",!0):(r(),m("div",Et,[t("div",Ht,g(v.station.roi_count||0),1),h[2]||(h[2]=t("div",{class:"text-xs text-base-content/60"},"ROIs",-1))]))],2),t("div",Ft,[v.station.updated_at?(r(),m("span",Ut," Updated "+g(new Date(v.station.updated_at).toLocaleDateString()),1)):(r(),m("span",It)),h[3]||(h[3]=t("span",{class:"flex items-center gap-1 text-primary flex-shrink-0"},[T(" View details "),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])],2)]),_:1},8,["to"])}}},Tt={class:"station-map-container rounded-lg overflow-hidden border border-base-300"},Dt={class:"absolute bottom-3 left-3 bg-base-100/90 rounded-lg p-2 shadow-md z-[1000]"},Ot={class:"flex flex-wrap items-center gap-3 text-xs"},Zt={class:"absolute top-3 right-3 bg-base-100/90 rounded-lg px-3 py-1 shadow-md z-[1000]"},Rt={class:"text-sm font-medium"},Kt={__name:"StationMap",props:{stations:{type:Array,default:()=>[]},platforms:{type:Array,default:()=>[]},otherPlatforms:{type:Array,default:()=>[]},showPlatforms:{type:Boolean,default:!0},height:{type:[Number,String],default:400},clickable:{type:Boolean,default:!0},zoom:{type:Number,default:5},center:{type:Array,default:()=>[62,16]},selectedId:{type:[Number,String],default:null}},emits:["station-click","station-hover","platform-click"],setup(v,{expose:k,emit:V}){const l=v,_=V,w=at(),h=$(null);let a=null,b=[],L=[],A=new Map,x=[];const R=P(()=>({height:typeof l.height=="number"?`${l.height}px`:l.height}));function y(n,s=!1){const p=s?"#7c3aed":"#3b82f6",i=s?14:10;return z.divIcon({className:"station-marker",html:`
      <div style="
        width: ${i}px;
        height: ${i}px;
        background-color: ${p};
        border: 2px solid white;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        cursor: pointer;
      "></div>
    `,iconSize:[i,i],iconAnchor:[i/2,i/2]})}function N(n,s=!1){var q,Q;const p=((Q=(q=n.mount_type_code)==null?void 0:q.match(/^([A-Z]+)/))==null?void 0:Q[1])||"PL",f={PL:"#f97316",BL:"#14b8a6",GL:"#22c55e"}[p]||"#f97316",M=s?{left:4,right:4,bottom:8}:{left:6,right:6,bottom:12},I=s?.35:1,Y=s?"none":"drop-shadow(0 2px 2px rgba(0,0,0,0.3))";return z.divIcon({className:s?"platform-marker-dimmed":"platform-marker",html:`
      <div style="
        width: 0;
        height: 0;
        border-left: ${M.left}px solid transparent;
        border-right: ${M.right}px solid transparent;
        border-bottom: ${M.bottom}px solid ${f};
        opacity: ${I};
        filter: ${Y};
        cursor: ${s?"default":"pointer"};
      "></div>
    `,iconSize:[M.left*2,M.bottom],iconAnchor:[M.left,M.bottom]})}function E(n){var i,f,M,I;const s=((f=(i=n.mount_type_code)==null?void 0:i.match(/^([A-Z]+)/))==null?void 0:f[1])||"?",p={PL:"Tower/Mast",BL:"Building",GL:"Ground Level"};return`
    <div style="min-width: 200px; font-family: system-ui, sans-serif;">
      <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">
        <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
          ${n.normalized_name||n.display_name}
        </code>
      </div>
      <div style="font-size: 12px; color: #666; margin-bottom: 4px;">
        ${n.display_name||""}
      </div>
      <div style="font-size: 11px; color: #888; margin-bottom: 4px;">
        <strong>Mount:</strong> ${p[s]||s} (${n.mount_type_code||"?"})
      </div>
      <div style="font-size: 11px; color: #888; margin-bottom: 4px;">
        <strong>Ecosystem:</strong> ${n.ecosystem_code||"N/A"}
      </div>
      <div style="font-size: 11px; color: #888;">
        ${((M=n.latitude)==null?void 0:M.toFixed(5))||"?"}, ${((I=n.longitude)==null?void 0:I.toFixed(5))||"?"}
      </div>
    </div>
  `}function U(n){var p,i;const s=n.status==="Active"?"color: #22c55e":"color: #ef4444";return`
    <div style="min-width: 180px; font-family: system-ui, sans-serif;">
      <div style="font-weight: 600; font-size: 14px; margin-bottom: 4px;">
        ${n.display_name||n.acronym}
      </div>
      <div style="font-size: 12px; color: #666; margin-bottom: 8px;">
        <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
          ${n.acronym}
        </code>
      </div>
      <div style="font-size: 12px; margin-bottom: 4px;">
        <span style="${s}">●</span> ${n.status||"Unknown"}
      </div>
      <div style="font-size: 11px; color: #888;">
        ${((p=n.latitude)==null?void 0:p.toFixed(4))||"?"}, ${((i=n.longitude)==null?void 0:i.toFixed(4))||"?"}
      </div>
    </div>
  `}function X(){!h.value||a||(a=z.map(h.value,{center:l.center,zoom:l.zoom,zoomControl:!0,attributionControl:!0}),z.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}).addTo(a),D())}function D(){if(!a)return;b.forEach(s=>a.removeLayer(s)),b=[],l.stations.forEach(s=>{if(s.latitude==null||s.longitude==null)return;const p=s.id===l.selectedId,i=z.marker([s.latitude,s.longitude],{icon:y(s,p)});i.bindPopup(U(s)),i.on("click",()=>{_("station-click",s),l.clickable&&w.push({name:"station",params:{acronym:s.acronym}})}),i.on("mouseover",()=>{_("station-hover",s),i.openPopup()}),i.addTo(a),b.push(i)}),O();const n=[...b,...L];if(n.length>0){const s=z.featureGroup(n);a.fitBounds(s.getBounds().pad(.2))}}function O(){a&&(L.forEach(n=>a.removeLayer(n)),L=[],A.clear(),l.showPlatforms&&l.platforms.forEach(n=>{if(n.latitude==null||n.longitude==null||n.platform_type!=="fixed")return;const s=z.marker([n.latitude,n.longitude],{icon:N(n,!1)});s.bindPopup(E(n)),s.on("click",()=>{_("platform-click",n),l.clickable&&w.push({name:"platform",params:{id:n.id}})}),s.on("mouseover",()=>{s.openPopup()}),s.addTo(a),L.push(s),A.set(n.id,s)}))}function H(){var n;a&&(x.forEach(s=>a.removeLayer(s)),x=[],!(!l.showPlatforms||!((n=l.otherPlatforms)!=null&&n.length))&&l.otherPlatforms.forEach(s=>{if(s.latitude==null||s.longitude==null||s.platform_type!=="fixed")return;const p=z.marker([s.latitude,s.longitude],{icon:N(s,!0)});p.bindPopup(`
      <div style="min-width: 150px; font-family: system-ui, sans-serif; opacity: 0.8;">
        <div style="font-weight: 500; font-size: 12px; color: #888;">
          <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
            ${s.normalized_name||s.display_name}
          </code>
        </div>
        <div style="font-size: 11px; color: #aaa; margin-top: 4px;">
          Other station platform
        </div>
      </div>
    `),p.on("mouseover",()=>{p.openPopup()}),p.addTo(a),x.push(p)}))}function K(){a&&(a.remove(),a=null,b=[],L=[],A.clear(),x=[])}return lt(()=>{X()}),dt(()=>{K()}),j(()=>l.stations,D,{deep:!0}),j(()=>l.selectedId,D),j(()=>l.platforms,O,{deep:!0}),j(()=>l.showPlatforms,()=>{O(),H()}),j(()=>l.otherPlatforms,H,{deep:!0}),j(()=>l.center,n=>{a&&a.setView(n,l.zoom)}),k({fitBounds:()=>{const n=[...b,...L,...x];if(a&&n.length>0){const s=z.featureGroup(n);a.fitBounds(s.getBounds().pad(.2))}},setView:(n,s)=>{a&&a.setView(n,s||l.zoom)},highlightPlatform:n=>{if(!a||!n)return;const s=typeof n=="string"?parseInt(n,10):n,p=A.get(n)||A.get(s);if(!p)return;const i=l.platforms.find(f=>f.id===n||f.id===s);!i||i.latitude==null||i.longitude==null||(a.setView([i.latitude,i.longitude],14,{animate:!0}),p.openPopup())},clearHighlight:()=>{if(a){a.closePopup();const n=[...b,...L,...x];if(n.length>0){const s=z.featureGroup(n);a.fitBounds(s.getBounds().pad(.2),{animate:!0})}}}}),(n,s)=>(r(),m("div",Tt,[t("div",{ref_key:"mapContainer",ref:h,class:"w-full",style:ct(R.value)},null,4),t("div",Dt,[t("div",Ot,[s[1]||(s[1]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),t("span",null,"Station")],-1)),s[2]||(s[2]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"w-3.5 h-3.5 bg-purple-500 rounded-full border-2 border-white shadow"}),t("span",null,"Selected")],-1)),v.showPlatforms&&v.platforms.length>0?(r(),m(J,{key:0},[s[0]||(s[0]=rt('<span class="text-base-content/40" data-v-745c5481>|</span><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-orange-500" data-v-745c5481></span><span data-v-745c5481>Tower</span></div><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-teal-500" data-v-745c5481></span><span data-v-745c5481>Building</span></div><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-green-500" data-v-745c5481></span><span data-v-745c5481>Ground</span></div>',4))],64)):C("",!0)])]),t("div",Zt,[t("span",Rt,g(v.stations.length)+" station"+g(v.stations.length!==1?"s":""),1)])]))}},qt=pt(Kt,[["__scopeId","data-v-745c5481"]]),Qt={class:"flex items-start justify-between mb-6"},Wt={class:"text-base-content/60"},Jt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},Xt={class:"stat bg-base-100 rounded-lg shadow"},Yt={class:"stat-value text-primary"},te={class:"stat-desc"},ee={class:"stat bg-base-100 rounded-lg shadow"},se={class:"stat-value text-secondary"},oe={class:"stat bg-base-100 rounded-lg shadow"},ne={class:"stat-value text-accent"},ae={class:"bg-base-100 rounded-lg shadow-lg p-4 mb-8"},le={class:"flex items-center justify-between mb-4"},re={class:"flex items-center gap-4"},ie={class:"label cursor-pointer gap-2"},de=["disabled"],ce={key:0,class:"loading loading-spinner loading-xs"},ue={class:"label cursor-pointer gap-2"},me={key:1,class:"h-[350px] flex items-center justify-center bg-base-200 rounded-lg"},pe={key:2,class:"h-[350px] flex items-center justify-center bg-base-200 rounded-lg text-base-content/60"},fe={key:0,class:"flex justify-center py-12"},ve={key:1,class:"alert alert-error"},ge={key:2},he={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4"},xe={class:"text-lg font-semibold flex items-center gap-2"},be={class:"flex gap-2"},ye={key:0,class:"flex justify-center py-8"},we={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ke={class:"card-body p-4"},_e={class:"flex items-start gap-3"},Me=["title"],$e=["d"],Pe={class:"flex-1 min-w-0"},Se={class:"font-semibold text-sm truncate font-mono"},ze={class:"text-xs text-base-content/60 truncate"},Ce={class:"flex items-center gap-1 mt-2"},Le={class:"text-xs font-medium"},Be={key:0,class:"col-span-full text-center py-8 text-base-content/50"},Ve={key:3},je={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Ge={__name:"DashboardView",setup(v){const k=$(!0),V=$(!1),l=$([]),_=$(!1),w=$(null),h=$(!1),a=ht();function b(o){a.success(`Exported ${o.type} as ${o.format.toUpperCase()}`)}function L(o){var e;o.platform_type==="fixed"&&o.latitude&&o.longitude&&((e=w.value)==null||e.highlightPlatform(o.id))}function A(){var o;(o=w.value)==null||o.clearHighlight()}at();const x=ft(),R=vt(),y=gt(),N=$([]),E=$(!1),U=$(!1),X=P(()=>f.value?y.canEditStation(f.value.id):!1);function D(){U.value=!0}async function O(o){if(await R.createPlatform(o)){if(a.success("Platform created successfully"),U.value=!1,f.value){E.value=!0;try{const d=await fetch(`/api/v11/platforms/station/${f.value.id}`);if(d.ok){const c=await d.json();N.value=c.data||[]}await K(f.value.id)}finally{E.value=!1}}}else a.error(R.error||"Failed to create platform")}const H=$([]);lt(async()=>{await x.fetchStations()});async function K(o){if(!o){H.value=[];return}try{const e=await fetch(`/api/v11/platforms/station/${o}`);if(e.ok){const d=await e.json();H.value=(d.data||[]).filter(c=>c.platform_type==="fixed"&&c.latitude!=null&&c.longitude!=null)}}catch(e){console.error("Failed to load platforms for station:",e),H.value=[]}}async function n(){if(!_.value){_.value=!0;try{const o=await fetch("/api/v11/platforms?limit=500");if(o.ok){const e=await o.json();l.value=(e.data||[]).filter(d=>d.platform_type==="fixed"&&d.latitude!=null&&d.longitude!=null)}}catch(o){console.error("Failed to load all platforms:",o),l.value=[]}finally{_.value=!1}}}const s=P(()=>V.value?f.value?l.value.filter(o=>o.station_id!==f.value.id):l.value:[]);j(V,async o=>{o&&l.value.length===0&&await n()});const p=P(()=>{var e,d;if(y.isAdmin)return x.stations;let o=null;if((e=y.user)!=null&&e.station_normalized_name?o=y.user.station_normalized_name:y.isStationAdmin&&y.userStationFromUsername?o=y.userStationFromUsername:y.isStationUser&&((d=y.user)!=null&&d.username)&&(o=y.user.username),o){const c=o.toLowerCase();return x.stations.filter(B=>{var Z,u;return((Z=B.normalized_name)==null?void 0:Z.toLowerCase())===c||((u=B.acronym)==null?void 0:u.toLowerCase())===c})}return x.stations}),i=P(()=>!y.isAdmin&&p.value.length===1),f=P(()=>i.value?p.value[0]:null);j(f,async o=>{if(o){E.value=!0;try{const e=await fetch(`/api/v11/platforms/station/${o.id}`);if(e.ok){const d=await e.json();N.value=d.data||[]}await K(o.id)}catch(e){console.error("Failed to load platforms:",e)}finally{E.value=!1}}},{immediate:!0});function M(o){const e={fixed:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",uav:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83",satellite:"M13 7L9 3 5 7l4 4M17 11l4 4-4 4-4-4M8 12l4 4 4-4-4-4-4 4zM16 8l3-3M5 16l3 3",mobile:"M8 17h.01M14 17h.01M8 17a2 2 0 11-4 0 2 2 0 014 0zm8 0a2 2 0 11-4 0 2 2 0 014 0zM5 17H3v-4a1 1 0 011-1h1V9a1 1 0 011-1h8a1 1 0 011 1v3h2a1 1 0 011 1v4h-2",usv:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",uuv:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"};return e[o]||e.fixed}function I(o){if(o.platform_type==="fixed"&&o.mount_type_code){const e=Q(o.mount_type_code);if(e)return e}return M(o.platform_type)}function Y(o){var d;if(o.platform_type==="fixed"&&o.mount_type_code){const c=(d=o.mount_type_code.match(/^([A-Z]+)/))==null?void 0:d[1];return{PL:"bg-info/10",BL:"bg-secondary/10",GL:"bg-success/10"}[c]||"bg-primary/10"}return{uav:"bg-warning/10",satellite:"bg-accent/10",mobile:"bg-neutral/10"}[o.platform_type]||"bg-primary/10"}function q(o){var d;if(o.platform_type==="fixed"&&o.mount_type_code){const c=(d=o.mount_type_code.match(/^([A-Z]+)/))==null?void 0:d[1];return{PL:"text-info",BL:"text-secondary",GL:"text-success"}[c]||"text-primary"}return{uav:"text-warning",satellite:"text-accent",mobile:"text-neutral"}[o.platform_type]||"text-primary"}function Q(o){var c;if(!o)return null;const e=(c=o.match(/^([A-Z]+)/))==null?void 0:c[1];return{PL:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",BL:"M3 21h18M5 21V8l7-6 7 6v13M9 12h2v2H9M13 12h2v2h-2M11 21v-4h2v4",GL:"M12 22v-7M12 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8M12 7V4M8 9l-2-2M16 9l2-2"}[e]||null}const it=P(()=>{var e,d;const o=(e=y.user)==null?void 0:e.station_normalized_name;if(o&&!y.isAdmin){const c=x.stations.find(B=>B.normalized_name===o);if(c!=null&&c.display_name)return c.display_name}return((d=y.user)==null?void 0:d.username)||"User"}),W=P(()=>{const o=p.value;let e=0,d=0;return o.forEach(c=>{e+=c.platform_count||0,d+=c.instrument_count||0}),{stations:o.length,platforms:e,instruments:d,active:o.filter(c=>c.status==="Active").length}});return(o,e)=>{var c,B,Z;const d=nt("router-link");return r(),m("div",null,[t("div",Qt,[t("div",null,[e[5]||(e[5]=t("h1",{class:"text-2xl font-bold"},"Dashboard",-1)),t("p",Wt," Welcome back, "+g(it.value),1)]),t("button",{class:"btn btn-outline btn-sm",onClick:e[0]||(e[0]=u=>h.value=!0)},[...e[6]||(e[6]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),T(" Export Data ",-1)])])]),t("div",Jt,[t("div",Xt,[e[7]||(e[7]=t("div",{class:"stat-figure text-primary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})])],-1)),e[8]||(e[8]=t("div",{class:"stat-title"},"Stations",-1)),t("div",Yt,g(W.value.stations),1),t("div",te,g(W.value.active)+" active",1)]),t("div",ee,[e[9]||(e[9]=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e[10]||(e[10]=t("div",{class:"stat-title"},"Platforms",-1)),t("div",se,g(W.value.platforms),1),e[11]||(e[11]=t("div",{class:"stat-desc"},"Fixed, UAV, Satellite",-1))]),t("div",oe,[e[12]||(e[12]=t("div",{class:"stat-figure text-accent"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})])],-1)),e[13]||(e[13]=t("div",{class:"stat-title"},"Instruments",-1)),t("div",ne,g(W.value.instruments),1),e[14]||(e[14]=t("div",{class:"stat-desc"},"Across all platforms",-1))]),e[15]||(e[15]=rt('<div class="stat bg-base-100 rounded-lg shadow"><div class="stat-figure text-info"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="stat-title">Status</div><div class="stat-value text-info">OK</div><div class="stat-desc">All systems operational</div></div>',1))]),t("div",ae,[t("div",le,[e[18]||(e[18]=t("h2",{class:"text-lg font-semibold flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})]),T(" Station Locations ")],-1)),t("div",re,[t("label",ie,[e[16]||(e[16]=t("span",{class:"label-text text-xs text-base-content/60"},"Show all platforms",-1)),tt(t("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>V.value=u),type:"checkbox",class:"toggle toggle-xs",disabled:_.value},null,8,de),[[ot,V.value]]),_.value?(r(),m("span",ce)):C("",!0)]),t("label",ue,[e[17]||(e[17]=t("span",{class:"label-text text-sm"},"Show map",-1)),tt(t("input",{"onUpdate:modelValue":e[2]||(e[2]=u=>k.value=u),type:"checkbox",class:"toggle toggle-primary toggle-sm"},null,512),[[ot,k.value]])])])]),tt(t("div",null,[!S(x).loading&&S(x).stations.length>0?(r(),G(S(qt),{key:0,ref_key:"stationMapRef",ref:w,stations:S(x).stations,platforms:H.value,"other-platforms":s.value,"show-platforms":!0,height:350,clickable:!0,"selected-id":(c=f.value)==null?void 0:c.id},null,8,["stations","platforms","other-platforms","selected-id"])):S(x).loading?(r(),m("div",me,[...e[19]||(e[19]=[t("span",{class:"loading loading-spinner loading-md"},null,-1)])])):(r(),m("div",pe," No stations to display "))],512),[[mt,k.value]])]),S(x).loading?(r(),m("div",fe,[...e[20]||(e[20]=[t("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):S(x).error?(r(),m("div",ve,[e[21]||(e[21]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,g(S(x).error),1)])):i.value?(r(),m("div",ge,[t("div",he,[t("h2",xe,[e[22]||(e[22]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),T(" Quick Access - "+g(((B=f.value)==null?void 0:B.display_name)||((Z=f.value)==null?void 0:Z.acronym)),1)]),t("div",be,[X.value?(r(),m("button",{key:0,class:"btn btn-primary btn-sm",onClick:D},[...e[23]||(e[23]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),T(" Create Platform ",-1)])])):C("",!0),f.value?(r(),G(d,{key:1,to:`/stations/${f.value.acronym}`,class:"btn btn-outline btn-sm"},{default:et(()=>[...e[24]||(e[24]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),T(" Manage Station ",-1)])]),_:1},8,["to"])):C("",!0)])]),E.value?(r(),m("div",ye,[...e[25]||(e[25]=[t("span",{class:"loading loading-spinner loading-md"},null,-1)])])):(r(),m("div",we,[(r(!0),m(J,null,st(N.value,u=>(r(),G(d,{key:u.id,to:`/platforms/${u.id}`,class:"card bg-base-100 shadow hover:shadow-lg transition-shadow cursor-pointer",onMouseenter:Ae=>L(u),onMouseleave:A},{default:et(()=>[t("div",ke,[t("div",_e,[t("div",{class:F(["p-2.5 rounded-lg",Y(u)]),title:u.mount_type_code||u.platform_type},[(r(),m("svg",{xmlns:"http://www.w3.org/2000/svg",class:F(["h-6 w-6",q(u)]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:I(u)},null,8,$e)],2))],10,Me),t("div",Pe,[t("h3",Se,g(u.normalized_name),1),t("p",ze,g(u.display_name),1),t("div",Ce,[e[26]||(e[26]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})],-1)),t("span",Le,g(u.instrument_count||0)+" instruments",1)])]),t("span",{class:F(["badge badge-xs",u.status==="Active"?"badge-success":"badge-ghost"])},g(u.status),3)])])]),_:2},1032,["to","onMouseenter"]))),128)),N.value.length===0?(r(),m("div",Be," No platforms found ")):C("",!0)]))])):(r(),m("div",Ve,[e[27]||(e[27]=t("h2",{class:"text-lg font-semibold mb-4"},"Research Stations",-1)),t("div",je,[(r(!0),m(J,null,st(p.value,u=>(r(),G(Gt,{key:u.id,station:u},null,8,["station"]))),128))])])),ut(S(yt),{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=u=>h.value=u),"default-type":"stations",onExported:b},null,8,["modelValue"]),f.value?(r(),G(S(bt),{key:4,modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=u=>U.value=u),"station-id":f.value.id,"station-acronym":f.value.acronym||"",onSubmit:O},null,8,["modelValue","station-id","station-acronym"])):C("",!0)])}}};export{Ge as default};
