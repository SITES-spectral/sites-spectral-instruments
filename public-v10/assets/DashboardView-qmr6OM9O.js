import{c as $,b as J,s as T,o as r,w as X,f as t,n as F,e as c,k as A,t as p,F as O,h as K,i as D,a as et,r as M,m as Y,E as st,p as C,G as ot,j as tt,g as nt,C as q,H as W,I as at,l as P}from"./vendor-2iZwFq-s.js";import{a as lt,b as rt,u as it,c as dt}from"./index-C1WtuwDD.js";import{g as ct}from"./InstrumentIcon.vue_vue_type_style_index_0_scoped_cbf9e092_lang-D-dukWxj.js";import{L as _}from"./leaflet-src-DUdEndMj.js";import{_ as ut}from"./ExportModal-DqXNiToO.js";const mt={class:"flex items-start justify-between gap-3"},pt={class:"flex-1 min-w-0"},vt={class:"flex items-center gap-2"},ft={class:"card-title text-lg truncate"},ht={class:"flex items-center gap-2 mt-1"},gt={class:"badge badge-outline badge-sm font-mono"},xt={key:0,class:"text-xs text-base-content/50 hidden sm:inline"},bt={class:"flex-shrink-0"},wt={key:0,class:"text-sm text-base-content/60 line-clamp-2 mt-2"},yt={class:"text-center"},kt={class:"text-2xl font-bold text-primary"},_t={key:0,class:"flex justify-center gap-1 mt-1"},Mt=["title"],$t={class:"text-center"},zt={class:"text-2xl font-bold text-secondary"},Pt={key:0,class:"text-center"},St={class:"text-2xl font-bold text-accent"},Lt={class:"flex items-center justify-between mt-3 pt-2 text-xs text-base-content/50"},Vt={key:0,class:"truncate"},Bt={key:1},Ct={__name:"StationCard",props:{station:{type:Object,required:!0},compact:{type:Boolean,default:!1}},setup(u){const w=u,S=$(()=>ct(w.station.status)),l=$(()=>{const{latitude:b,longitude:h}=w.station;if(b&&h){const a=Number(b).toFixed(4),x=Number(h).toFixed(4);return`${a}°N, ${x}°E`}return null}),y=$(()=>{const b=[];return w.station.fixed_count&&b.push({type:"Fixed",count:w.station.fixed_count,color:"text-info"}),w.station.uav_count&&b.push({type:"UAV",count:w.station.uav_count,color:"text-warning"}),w.station.satellite_count&&b.push({type:"Satellite",count:w.station.satellite_count,color:"text-accent"}),b});return(b,h)=>{const a=J("router-link");return r(),T(a,{to:`/stations/${u.station.acronym}`,class:"card bg-base-100 shadow-md hover:shadow-xl transition-all duration-200 cursor-pointer border border-base-200 hover:border-primary/30"},{default:X(()=>[t("div",{class:F(["card-body",u.compact?"p-4":"p-5"])},[t("div",mt,[t("div",pt,[t("div",vt,[t("h3",ft,p(u.station.display_name),1)]),t("div",ht,[t("span",gt,p(u.station.acronym),1),l.value?(r(),c("span",xt,p(l.value),1)):A("",!0)])]),t("div",bt,[t("span",{class:F(["badge badge-sm",S.value.badgeClass])},p(u.station.status),3)])]),u.station.description&&!u.compact?(r(),c("p",wt,p(u.station.description),1)):A("",!0),t("div",{class:F(["grid gap-2 mt-4 pt-4 border-t border-base-200",u.compact?"grid-cols-2":"grid-cols-3"])},[t("div",yt,[t("div",kt,p(u.station.platform_count||0),1),h[0]||(h[0]=t("div",{class:"text-xs text-base-content/60"},"Platforms",-1)),y.value.length>0?(r(),c("div",_t,[(r(!0),c(O,null,K(y.value,x=>(r(),c("span",{key:x.type,class:F(["text-xs",x.color]),title:x.type},p(x.count),11,Mt))),128))])):A("",!0)]),t("div",$t,[t("div",zt,p(u.station.instrument_count||0),1),h[1]||(h[1]=t("div",{class:"text-xs text-base-content/60"},"Instruments",-1))]),u.compact?A("",!0):(r(),c("div",Pt,[t("div",St,p(u.station.roi_count||0),1),h[2]||(h[2]=t("div",{class:"text-xs text-base-content/60"},"ROIs",-1))]))],2),t("div",Lt,[u.station.updated_at?(r(),c("span",Vt," Updated "+p(new Date(u.station.updated_at).toLocaleDateString()),1)):(r(),c("span",Bt)),h[3]||(h[3]=t("span",{class:"flex items-center gap-1 text-primary flex-shrink-0"},[D(" View details "),t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])],2)]),_:1},8,["to"])}}},At={class:"station-map-container rounded-lg overflow-hidden border border-base-300"},jt={class:"absolute bottom-3 left-3 bg-base-100/90 rounded-lg p-2 shadow-md z-[1000]"},Ht={class:"flex flex-wrap items-center gap-3 text-xs"},Nt={class:"absolute top-3 right-3 bg-base-100/90 rounded-lg px-3 py-1 shadow-md z-[1000]"},Et={class:"text-sm font-medium"},Ft={__name:"StationMap",props:{stations:{type:Array,default:()=>[]},platforms:{type:Array,default:()=>[]},otherPlatforms:{type:Array,default:()=>[]},showPlatforms:{type:Boolean,default:!0},height:{type:[Number,String],default:400},clickable:{type:Boolean,default:!0},zoom:{type:Number,default:5},center:{type:Array,default:()=>[62,16]},selectedId:{type:[Number,String],default:null}},emits:["station-click","station-hover","platform-click"],setup(u,{expose:w,emit:S}){const l=u,y=S,b=et(),h=M(null);let a=null,x=[],z=[],j=new Map,g=[];const L=$(()=>({height:typeof l.height=="number"?`${l.height}px`:l.height}));function I(o,s=!1){const f=s?"#7c3aed":"#3b82f6",i=s?14:10;return _.divIcon({className:"station-marker",html:`
      <div style="
        width: ${i}px;
        height: ${i}px;
        background-color: ${f};
        border: 2px solid white;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        cursor: pointer;
      "></div>
    `,iconSize:[i,i],iconAnchor:[i/2,i/2]})}function N(o,s=!1){var d,H;const f=((H=(d=o.mount_type_code)==null?void 0:d.match(/^([A-Z]+)/))==null?void 0:H[1])||"PL",k={PL:"#f97316",BL:"#14b8a6",GL:"#22c55e"}[f]||"#f97316",n=s?{left:4,right:4,bottom:8}:{left:6,right:6,bottom:12},e=s?.35:1,v=s?"none":"drop-shadow(0 2px 2px rgba(0,0,0,0.3))";return _.divIcon({className:s?"platform-marker-dimmed":"platform-marker",html:`
      <div style="
        width: 0;
        height: 0;
        border-left: ${n.left}px solid transparent;
        border-right: ${n.right}px solid transparent;
        border-bottom: ${n.bottom}px solid ${k};
        opacity: ${e};
        filter: ${v};
        cursor: ${s?"default":"pointer"};
      "></div>
    `,iconSize:[n.left*2,n.bottom],iconAnchor:[n.left,n.bottom]})}function E(o){var i,k,n,e;const s=((k=(i=o.mount_type_code)==null?void 0:i.match(/^([A-Z]+)/))==null?void 0:k[1])||"?",f={PL:"Tower/Mast",BL:"Building",GL:"Ground Level"};return`
    <div style="min-width: 200px; font-family: system-ui, sans-serif;">
      <div style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">
        <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
          ${o.normalized_name||o.display_name}
        </code>
      </div>
      <div style="font-size: 12px; color: #666; margin-bottom: 4px;">
        ${o.display_name||""}
      </div>
      <div style="font-size: 11px; color: #888; margin-bottom: 4px;">
        <strong>Mount:</strong> ${f[s]||s} (${o.mount_type_code||"?"})
      </div>
      <div style="font-size: 11px; color: #888; margin-bottom: 4px;">
        <strong>Ecosystem:</strong> ${o.ecosystem_code||"N/A"}
      </div>
      <div style="font-size: 11px; color: #888;">
        ${((n=o.latitude)==null?void 0:n.toFixed(5))||"?"}, ${((e=o.longitude)==null?void 0:e.toFixed(5))||"?"}
      </div>
    </div>
  `}function R(o){var f,i;const s=o.status==="Active"?"color: #22c55e":"color: #ef4444";return`
    <div style="min-width: 180px; font-family: system-ui, sans-serif;">
      <div style="font-weight: 600; font-size: 14px; margin-bottom: 4px;">
        ${o.display_name||o.acronym}
      </div>
      <div style="font-size: 12px; color: #666; margin-bottom: 8px;">
        <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
          ${o.acronym}
        </code>
      </div>
      <div style="font-size: 12px; margin-bottom: 4px;">
        <span style="${s}">●</span> ${o.status||"Unknown"}
      </div>
      <div style="font-size: 11px; color: #888;">
        ${((f=o.latitude)==null?void 0:f.toFixed(4))||"?"}, ${((i=o.longitude)==null?void 0:i.toFixed(4))||"?"}
      </div>
    </div>
  `}function Z(){!h.value||a||(a=_.map(h.value,{center:l.center,zoom:l.zoom,zoomControl:!0,attributionControl:!0}),_.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18}).addTo(a),U())}function U(){if(!a)return;x.forEach(s=>a.removeLayer(s)),x=[],l.stations.forEach(s=>{if(s.latitude==null||s.longitude==null)return;const f=s.id===l.selectedId,i=_.marker([s.latitude,s.longitude],{icon:I(s,f)});i.bindPopup(R(s)),i.on("click",()=>{y("station-click",s),l.clickable&&b.push({name:"station",params:{acronym:s.acronym}})}),i.on("mouseover",()=>{y("station-hover",s),i.openPopup()}),i.addTo(a),x.push(i)}),V();const o=[...x,...z];if(o.length>0){const s=_.featureGroup(o);a.fitBounds(s.getBounds().pad(.2))}}function V(){a&&(z.forEach(o=>a.removeLayer(o)),z=[],j.clear(),l.showPlatforms&&l.platforms.forEach(o=>{if(o.latitude==null||o.longitude==null||o.platform_type!=="fixed")return;const s=_.marker([o.latitude,o.longitude],{icon:N(o,!1)});s.bindPopup(E(o)),s.on("click",()=>{y("platform-click",o),l.clickable&&b.push({name:"platform",params:{id:o.id}})}),s.on("mouseover",()=>{s.openPopup()}),s.addTo(a),z.push(s),j.set(o.id,s)}))}function G(){var o;a&&(g.forEach(s=>a.removeLayer(s)),g=[],!(!l.showPlatforms||!((o=l.otherPlatforms)!=null&&o.length))&&l.otherPlatforms.forEach(s=>{if(s.latitude==null||s.longitude==null||s.platform_type!=="fixed")return;const f=_.marker([s.latitude,s.longitude],{icon:N(s,!0)});f.bindPopup(`
      <div style="min-width: 150px; font-family: system-ui, sans-serif; opacity: 0.8;">
        <div style="font-weight: 500; font-size: 12px; color: #888;">
          <code style="background: #f1f5f9; padding: 1px 4px; border-radius: 2px;">
            ${s.normalized_name||s.display_name}
          </code>
        </div>
        <div style="font-size: 11px; color: #aaa; margin-top: 4px;">
          Other station platform
        </div>
      </div>
    `),f.on("mouseover",()=>{f.openPopup()}),f.addTo(a),g.push(f)}))}function B(){a&&(a.remove(),a=null,x=[],z=[],j.clear(),g=[])}return Y(()=>{Z()}),st(()=>{B()}),C(()=>l.stations,U,{deep:!0}),C(()=>l.selectedId,U),C(()=>l.platforms,V,{deep:!0}),C(()=>l.showPlatforms,()=>{V(),G()}),C(()=>l.otherPlatforms,G,{deep:!0}),C(()=>l.center,o=>{a&&a.setView(o,l.zoom)}),w({fitBounds:()=>{const o=[...x,...z,...g];if(a&&o.length>0){const s=_.featureGroup(o);a.fitBounds(s.getBounds().pad(.2))}},setView:(o,s)=>{a&&a.setView(o,s||l.zoom)},highlightPlatform:o=>{if(!a||!o)return;const s=typeof o=="string"?parseInt(o,10):o,f=j.get(o)||j.get(s);if(!f)return;const i=l.platforms.find(k=>k.id===o||k.id===s);!i||i.latitude==null||i.longitude==null||(a.setView([i.latitude,i.longitude],14,{animate:!0}),f.openPopup())},clearHighlight:()=>{if(a){a.closePopup();const o=[...x,...z,...g];if(o.length>0){const s=_.featureGroup(o);a.fitBounds(s.getBounds().pad(.2),{animate:!0})}}}}),(o,s)=>(r(),c("div",At,[t("div",{ref_key:"mapContainer",ref:h,class:"w-full",style:ot(L.value)},null,4),t("div",jt,[t("div",Ht,[s[1]||(s[1]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"w-3 h-3 bg-blue-500 rounded-full border-2 border-white shadow"}),t("span",null,"Station")],-1)),s[2]||(s[2]=t("div",{class:"flex items-center gap-1"},[t("span",{class:"w-3.5 h-3.5 bg-purple-500 rounded-full border-2 border-white shadow"}),t("span",null,"Selected")],-1)),u.showPlatforms&&u.platforms.length>0?(r(),c(O,{key:0},[s[0]||(s[0]=tt('<span class="text-base-content/40" data-v-745c5481>|</span><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-orange-500" data-v-745c5481></span><span data-v-745c5481>Tower</span></div><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-teal-500" data-v-745c5481></span><span data-v-745c5481>Building</span></div><div class="flex items-center gap-1" data-v-745c5481><span class="inline-block w-0 h-0 border-l-[5px] border-r-[5px] border-b-[9px] border-l-transparent border-r-transparent border-b-green-500" data-v-745c5481></span><span data-v-745c5481>Ground</span></div>',4))],64)):A("",!0)])]),t("div",Nt,[t("span",Et,p(u.stations.length)+" station"+p(u.stations.length!==1?"s":""),1)])]))}},It=lt(Ft,[["__scopeId","data-v-745c5481"]]),Ut={class:"flex items-start justify-between mb-6"},Gt={class:"text-base-content/60"},Tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},Dt={class:"stat bg-base-100 rounded-lg shadow"},Ot={class:"stat-value text-primary"},Rt={class:"stat-desc"},Zt={class:"stat bg-base-100 rounded-lg shadow"},qt={class:"stat-value text-secondary"},Kt={class:"stat bg-base-100 rounded-lg shadow"},Qt={class:"stat-value text-accent"},Wt={class:"bg-base-100 rounded-lg shadow-lg p-4 mb-8"},Jt={class:"flex items-center justify-between mb-4"},Xt={class:"flex items-center gap-4"},Yt={class:"label cursor-pointer gap-2"},te=["disabled"],ee={key:0,class:"loading loading-spinner loading-xs"},se={class:"label cursor-pointer gap-2"},oe={key:1,class:"h-[350px] flex items-center justify-center bg-base-200 rounded-lg"},ne={key:2,class:"h-[350px] flex items-center justify-center bg-base-200 rounded-lg text-base-content/60"},ae={key:0,class:"flex justify-center py-12"},le={key:1,class:"alert alert-error"},re={key:2},ie={class:"text-lg font-semibold mb-4 flex items-center gap-2"},de={key:0,class:"flex justify-center py-8"},ce={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ue={class:"card-body p-4"},me={class:"flex items-start gap-3"},pe={class:"flex flex-col items-center gap-1"},ve={class:"p-2 rounded-lg bg-primary/10"},fe={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},he=["d"],ge=["title"],xe=["d"],be={class:"flex-1 min-w-0"},we={class:"font-semibold text-sm truncate font-mono"},ye={class:"text-xs text-base-content/60 truncate"},ke={class:"flex items-center gap-1 mt-2"},_e={class:"text-xs font-medium"},Me={key:0,class:"col-span-full text-center py-8 text-base-content/50"},$e={key:3},ze={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6"},Ae={__name:"DashboardView",setup(u){const w=M(!0),S=M(!1),l=M([]),y=M(!1),b=M(null),h=M(!1),a=dt();function x(n){a.success(`Exported ${n.type} as ${n.format.toUpperCase()}`)}function z(n){var e;n.platform_type==="fixed"&&n.latitude&&n.longitude&&((e=b.value)==null||e.highlightPlatform(n.id))}function j(){var n;(n=b.value)==null||n.clearHighlight()}const g=rt(),L=it(),I=M([]),N=M(!1),E=M([]);Y(async()=>{await g.fetchStations()});async function R(n){if(!n){E.value=[];return}try{const e=await fetch(`/api/v11/platforms/station/${n}`);if(e.ok){const v=await e.json();E.value=(v.data||[]).filter(d=>d.platform_type==="fixed"&&d.latitude!=null&&d.longitude!=null)}}catch(e){console.error("Failed to load platforms for station:",e),E.value=[]}}async function Z(){if(!y.value){y.value=!0;try{const n=await fetch("/api/v11/platforms?limit=500");if(n.ok){const e=await n.json();l.value=(e.data||[]).filter(v=>v.platform_type==="fixed"&&v.latitude!=null&&v.longitude!=null)}}catch(n){console.error("Failed to load all platforms:",n),l.value=[]}finally{y.value=!1}}}const U=$(()=>S.value?B.value?l.value.filter(n=>n.station_id!==B.value.id):l.value:[]);C(S,async n=>{n&&l.value.length===0&&await Z()});const V=$(()=>{var e;if(L.isAdmin)return g.stations;const n=(e=L.user)==null?void 0:e.station_normalized_name;return n?g.stations.filter(v=>{var d;return v.normalized_name===n||((d=v.acronym)==null?void 0:d.toLowerCase())===n.toLowerCase()}):g.stations}),G=$(()=>!L.isAdmin&&V.value.length===1),B=$(()=>G.value?V.value[0]:null);C(B,async n=>{if(n){N.value=!0;try{const e=await fetch(`/api/v11/platforms/station/${n.id}`);if(e.ok){const v=await e.json();I.value=v.data||[]}await R(n.id)}catch(e){console.error("Failed to load platforms:",e)}finally{N.value=!1}}},{immediate:!0});function o(n){const e={fixed:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",uav:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM12 12m-3 0a3 3 0 106 0 3 3 0 00-6 0",satellite:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",mobile:"M8 17h.01M14 17h.01M8 17a2 2 0 11-4 0 2 2 0 014 0zm8 0a2 2 0 11-4 0 2 2 0 014 0zM5 17H3v-4a1 1 0 011-1h1V9a1 1 0 011-1h8a1 1 0 011 1v3h2a1 1 0 011 1v4h-2",usv:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",uuv:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"};return e[n]||e.fixed}function s(n){var d;if(!n)return null;const e=(d=n.match(/^([A-Z]+)/))==null?void 0:d[1];return{PL:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",BL:"M3 21h18M5 21V8l7-6 7 6v13M9 12h2v2H9M13 12h2v2h-2M11 21v-4h2v4",GL:"M12 22v-7M12 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8M12 7V4M8 9l-2-2M16 9l2-2"}[e]||null}function f(n){var d;if(!n)return"text-base-content/40";const e=(d=n.match(/^([A-Z]+)/))==null?void 0:d[1];return{PL:"text-info",BL:"text-secondary",GL:"text-success"}[e]||"text-base-content/40"}const i=$(()=>{var e,v;const n=(e=L.user)==null?void 0:e.station_normalized_name;if(n&&!L.isAdmin){const d=g.stations.find(H=>H.normalized_name===n);if(d!=null&&d.display_name)return d.display_name}return((v=L.user)==null?void 0:v.username)||"User"}),k=$(()=>{const n=V.value;let e=0,v=0;return n.forEach(d=>{e+=d.platform_count||0,v+=d.instrument_count||0}),{stations:n.length,platforms:e,instruments:v,active:n.filter(d=>d.status==="Active").length}});return(n,e)=>{var d,H,Q;const v=J("router-link");return r(),c("div",null,[t("div",Ut,[t("div",null,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold"},"Dashboard",-1)),t("p",Gt," Welcome back, "+p(i.value),1)]),t("button",{class:"btn btn-outline btn-sm",onClick:e[0]||(e[0]=m=>h.value=!0)},[...e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),D(" Export Data ",-1)])])]),t("div",Tt,[t("div",Dt,[e[6]||(e[6]=t("div",{class:"stat-figure text-primary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})])],-1)),e[7]||(e[7]=t("div",{class:"stat-title"},"Stations",-1)),t("div",Ot,p(k.value.stations),1),t("div",Rt,p(k.value.active)+" active",1)]),t("div",Zt,[e[8]||(e[8]=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e[9]||(e[9]=t("div",{class:"stat-title"},"Platforms",-1)),t("div",qt,p(k.value.platforms),1),e[10]||(e[10]=t("div",{class:"stat-desc"},"Fixed, UAV, Satellite",-1))]),t("div",Kt,[e[11]||(e[11]=t("div",{class:"stat-figure text-accent"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})])],-1)),e[12]||(e[12]=t("div",{class:"stat-title"},"Instruments",-1)),t("div",Qt,p(k.value.instruments),1),e[13]||(e[13]=t("div",{class:"stat-desc"},"Across all platforms",-1))]),e[14]||(e[14]=tt('<div class="stat bg-base-100 rounded-lg shadow"><div class="stat-figure text-info"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="stat-title">Status</div><div class="stat-value text-info">OK</div><div class="stat-desc">All systems operational</div></div>',1))]),t("div",Wt,[t("div",Jt,[e[17]||(e[17]=t("h2",{class:"text-lg font-semibold flex items-center gap-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})]),D(" Station Locations ")],-1)),t("div",Xt,[t("label",Yt,[e[15]||(e[15]=t("span",{class:"label-text text-xs text-base-content/60"},"Show all platforms",-1)),q(t("input",{"onUpdate:modelValue":e[1]||(e[1]=m=>S.value=m),type:"checkbox",class:"toggle toggle-xs",disabled:y.value},null,8,te),[[W,S.value]]),y.value?(r(),c("span",ee)):A("",!0)]),t("label",se,[e[16]||(e[16]=t("span",{class:"label-text text-sm"},"Show map",-1)),q(t("input",{"onUpdate:modelValue":e[2]||(e[2]=m=>w.value=m),type:"checkbox",class:"toggle toggle-primary toggle-sm"},null,512),[[W,w.value]])])])]),q(t("div",null,[!P(g).loading&&P(g).stations.length>0?(r(),T(P(It),{key:0,ref_key:"stationMapRef",ref:b,stations:P(g).stations,platforms:E.value,"other-platforms":U.value,"show-platforms":!0,height:350,clickable:!0,"selected-id":(d=B.value)==null?void 0:d.id},null,8,["stations","platforms","other-platforms","selected-id"])):P(g).loading?(r(),c("div",oe,[...e[18]||(e[18]=[t("span",{class:"loading loading-spinner loading-md"},null,-1)])])):(r(),c("div",ne," No stations to display "))],512),[[at,w.value]])]),P(g).loading?(r(),c("div",ae,[...e[19]||(e[19]=[t("span",{class:"loading loading-spinner loading-lg"},null,-1)])])):P(g).error?(r(),c("div",le,[e[20]||(e[20]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,p(P(g).error),1)])):G.value?(r(),c("div",re,[t("h2",ie,[e[21]||(e[21]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),D(" Quick Access - "+p(((H=B.value)==null?void 0:H.display_name)||((Q=B.value)==null?void 0:Q.acronym)),1)]),N.value?(r(),c("div",de,[...e[22]||(e[22]=[t("span",{class:"loading loading-spinner loading-md"},null,-1)])])):(r(),c("div",ce,[(r(!0),c(O,null,K(I.value,m=>(r(),T(v,{key:m.id,to:`/platforms/${m.id}`,class:"card bg-base-100 shadow hover:shadow-lg transition-shadow cursor-pointer",onMouseenter:Pe=>z(m),onMouseleave:j},{default:X(()=>[t("div",ue,[t("div",me,[t("div",pe,[t("div",ve,[(r(),c("svg",fe,[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:o(m.platform_type)},null,8,he)]))]),s(m.mount_type_code)?(r(),c("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",class:F(["h-4 w-4",f(m.mount_type_code)]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",title:m.mount_type_code},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:s(m.mount_type_code)},null,8,xe)],10,ge)):A("",!0)]),t("div",be,[t("h3",we,p(m.normalized_name),1),t("p",ye,p(m.display_name),1),t("div",ke,[e[23]||(e[23]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})],-1)),t("span",_e,p(m.instrument_count||0)+" instruments",1)])]),t("span",{class:F(["badge badge-xs",m.status==="Active"?"badge-success":"badge-ghost"])},p(m.status),3)])])]),_:2},1032,["to","onMouseenter"]))),128)),I.value.length===0?(r(),c("div",Me," No platforms found ")):A("",!0)]))])):(r(),c("div",$e,[e[24]||(e[24]=t("h2",{class:"text-lg font-semibold mb-4"},"Research Stations",-1)),t("div",ze,[(r(!0),c(O,null,K(V.value,m=>(r(),T(Ct,{key:m.id,station:m},null,8,["station"]))),128))])])),nt(P(ut),{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=m=>h.value=m),"default-type":"stations",onExported:x},null,8,["modelValue"])])}}};export{Ae as default};
