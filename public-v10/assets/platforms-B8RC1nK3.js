import{_ as L}from"./BaseModal-BSvtwcmN.js";import{p as V,o as _,w,f as i,n as M,e as P,t as x,k as O,h as B,d as D,r as m,c as v}from"./vendor-oiqY8oHn.js";import{c as u}from"./index-BP56eZvN.js";const C={class:"flex flex-col items-center text-center"},F={xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},N=["d"],k={class:"text-base-content/80"},U=["disabled"],G=["disabled"],H={key:0,class:"loading loading-spinner loading-sm"},K={__name:"ConfirmModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Confirm Action"},message:{type:String,default:"Are you sure you want to proceed?"},confirmText:{type:String,default:"Confirm"},cancelText:{type:String,default:"Cancel"},variant:{type:String,default:"warning",validator:e=>["warning","error","info"].includes(e)},loading:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel"],setup(e,{emit:t}){const r=t,o={warning:"btn-warning",error:"btn-error",info:"btn-info"},p={warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"};function f(){r("update:modelValue",!1)}function h(){r("confirm")}function y(){r("cancel"),f()}return(g,d)=>(_(),V(L,{"model-value":e.modelValue,title:e.title,size:"sm",persistent:e.loading,"onUpdate:modelValue":d[0]||(d[0]=b=>g.$emit("update:modelValue",b))},{footer:w(()=>[i("button",{class:"btn btn-ghost",disabled:e.loading,onClick:y},x(e.cancelText),9,U),i("button",{class:M(["btn",o[e.variant]]),disabled:e.loading,onClick:h},[e.loading?(_(),P("span",H)):O("",!0),B(" "+x(e.confirmText),1)],10,G)]),default:w(()=>[i("div",C,[i("div",{class:M(["mb-4",`text-${e.variant}`])},[(_(),P("svg",F,[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:p[e.variant]},null,8,N)]))],2),i("p",k,x(e.message),1)])]),_:1},8,["model-value","title","persistent"]))}},z={fixed:{key:"fixed",name:"Fixed Platform",description:"Permanent installations on towers, buildings, or ground level",icon:"tower-observation",color:"info",namingPattern:"{STATION}_{ECOSYSTEM}_{MOUNT_TYPE}",namingExample:"SVB_FOR_PL01",fields:{ecosystem_code:{label:"Ecosystem",type:"select",required:!0,options:["FOR","AGR","GRA","HEA","MIR","ALP","LAK","CON","WET","DEC","MAR","PEA","GEN"],helpText:"Ecosystem type being monitored"},mount_type_code:{label:"Mount Type",type:"select",required:!0,options:["PL","BL","GL"],optionLabels:{PL:"Pole/Tower/Mast (>1.5m)",BL:"Building (rooftop/facade)",GL:"Ground Level (<1.5m)"},helpText:"Physical mounting structure type"},platform_height_m:{label:"Platform Height (m)",type:"number",required:!1,min:0,max:500,helpText:"Height above ground in meters"},mounting_structure:{label:"Mounting Structure",type:"text",required:!1,helpText:"Description of mounting structure"}},excludeFields:["vendor","model","agency","satellite","sensor"]},uav:{key:"uav",name:"UAV Platform",description:"Drone-based platforms with auto-instrument creation",icon:"drone",color:"warning",namingPattern:"{STATION}_{VENDOR}_{MODEL}_{MOUNT_TYPE}",namingExample:"SVB_DJI_M3M_UAV01",fields:{vendor:{label:"Vendor",type:"select",required:!0,options:["DJI","MicaSense","Parrot","Headwall","senseFly","Other"],helpText:"UAV/sensor manufacturer"},model:{label:"Model",type:"select",required:!0,dependsOn:"vendor",optionsByParent:{DJI:["M3M","P4M","M30T","M300","M350"],MicaSense:["RedEdge-MX","Altum-PT"],Parrot:["Sequoia+","Anafi"],Headwall:["Nano-Hyperspec"],senseFly:["eBee X"],Other:[]},helpText:"UAV or sensor model"},mount_type_code:{label:"Position ID",type:"text",required:!0,pattern:"^UAV\\d{2}$",placeholder:"UAV01",helpText:"UAV position identifier (e.g., UAV01)"}},excludeFields:["ecosystem_code","platform_height_m","mounting_structure","agency","satellite","sensor"],autoInstruments:!0},satellite:{key:"satellite",name:"Satellite Platform",description:"Virtual platforms for satellite sensor data",icon:"satellite",color:"accent",namingPattern:"{STATION}_{AGENCY}_{SATELLITE}_{SENSOR}",namingExample:"SVB_ESA_S2A_MSI",fields:{agency:{label:"Space Agency",type:"select",required:!0,options:["ESA","NASA","JAXA","ISRO","CSA","Other"],helpText:"Operating space agency"},satellite:{label:"Satellite",type:"select",required:!0,dependsOn:"agency",optionsByParent:{ESA:["S2A","S2B","S3A","S3B","S1A","S1B"],NASA:["L8","L9","MODIS-Terra","MODIS-Aqua"],JAXA:["ALOS-2"],ISRO:["RS2"],CSA:["RCM"],Other:[]},helpText:"Satellite identifier"},sensor:{label:"Sensor",type:"select",required:!0,dependsOn:"satellite",optionsByParent:{S2A:["MSI"],S2B:["MSI"],S3A:["OLCI","SLSTR"],S3B:["OLCI","SLSTR"],S1A:["SAR"],S1B:["SAR"],L8:["OLI","TIRS"],L9:["OLI-2","TIRS-2"],"MODIS-Terra":["MODIS"],"MODIS-Aqua":["MODIS"]},helpText:"Sensor instrument"},mount_type_code:{label:"Virtual Position",type:"hidden",required:!0,defaultValue:"SAT",helpText:"Automatically set to SAT"}},excludeFields:["ecosystem_code","platform_height_m","mounting_structure","vendor","model","latitude","longitude"]}},S={phenocam:{key:"phenocam",name:"Phenocam",code:"PHE",description:"Digital camera for repeat photography and phenology monitoring",icon:"camera",color:"#3b82f6",category:"imaging",platforms:["fixed","uav"],fields:{camera_brand:{label:"Camera Brand",type:"text",required:!1,helpText:"Manufacturer (e.g., StarDot, Axis)"},camera_model:{label:"Camera Model",type:"text",required:!1,helpText:"Model number"},resolution:{label:"Resolution",type:"text",required:!1,placeholder:"1920x1080",helpText:"Image resolution in pixels"},interval_minutes:{label:"Capture Interval (min)",type:"number",required:!1,min:1,max:1440,defaultValue:30,helpText:"Time between captures"},lens_focal_length_mm:{label:"Focal Length (mm)",type:"number",required:!1,helpText:"Lens focal length"},field_of_view_degrees:{label:"Field of View (°)",type:"number",required:!1,min:1,max:360,helpText:"Horizontal field of view"}},summaryFields:["camera_brand","camera_model","resolution","interval_minutes"]},multispectral:{key:"multispectral",name:"Multispectral Sensor",code:"MS",description:"Sensor capturing discrete spectral bands",icon:"layer-group",color:"#8b5cf6",category:"spectral",platforms:["fixed","uav","satellite"],fields:{number_of_channels:{label:"Number of Channels",type:"number",required:!1,min:2,max:50,helpText:"Number of spectral bands"},spectral_range:{label:"Spectral Range",type:"text",required:!1,placeholder:"400-1000 nm",helpText:"Wavelength range covered"},band_wavelengths:{label:"Band Wavelengths (nm)",type:"text",required:!1,placeholder:"475, 560, 668, 717, 842",helpText:"Center wavelengths of each band"},orientation:{label:"Orientation",type:"select",required:!1,options:["Nadir","Oblique","Hemispherical"],helpText:"Sensor viewing direction"},datalogger:{label:"Datalogger",type:"text",required:!1,helpText:"Connected datalogger model"}},summaryFields:["number_of_channels","spectral_range","orientation"]},par_sensor:{key:"par_sensor",name:"PAR Sensor",code:"PAR",description:"Photosynthetically Active Radiation sensor (400-700 nm)",icon:"sun",color:"#f59e0b",category:"radiation",platforms:["fixed"],fields:{spectral_range:{label:"Spectral Range",type:"text",required:!1,defaultValue:"400-700 nm",helpText:"PAR wavelength range"},calibration_coefficient:{label:"Calibration Coefficient",type:"number",required:!1,helpText:"Sensor calibration factor"},calibration_date:{label:"Calibration Date",type:"date",required:!1,helpText:"Last calibration date"},sensor_brand:{label:"Sensor Brand",type:"text",required:!1,helpText:"Manufacturer (e.g., LI-COR, Apogee)"},sensor_model:{label:"Sensor Model",type:"text",required:!1,helpText:"Model number"}},summaryFields:["spectral_range","sensor_brand","sensor_model"]},ndvi_sensor:{key:"ndvi_sensor",name:"NDVI Sensor",code:"NDVI",description:"Dedicated sensor for NDVI measurements",icon:"leaf",color:"#22c55e",category:"spectral",platforms:["fixed"],fields:{red_wavelength_nm:{label:"Red Band (nm)",type:"number",required:!1,defaultValue:650,helpText:"Red band center wavelength"},nir_wavelength_nm:{label:"NIR Band (nm)",type:"number",required:!1,defaultValue:850,helpText:"NIR band center wavelength"},sensor_brand:{label:"Sensor Brand",type:"text",required:!1,helpText:"Manufacturer"},sensor_model:{label:"Sensor Model",type:"text",required:!1,helpText:"Model number"}},summaryFields:["red_wavelength_nm","nir_wavelength_nm","sensor_brand"]},pri_sensor:{key:"pri_sensor",name:"PRI Sensor",code:"PRI",description:"Photochemical Reflectance Index sensor",icon:"microscope",color:"#06b6d4",category:"spectral",platforms:["fixed"],fields:{band1_wavelength_nm:{label:"Band 1 (nm)",type:"number",required:!1,defaultValue:531,helpText:"Reference band wavelength"},band2_wavelength_nm:{label:"Band 2 (nm)",type:"number",required:!1,defaultValue:570,helpText:"Stress-sensitive band wavelength"},sensor_brand:{label:"Sensor Brand",type:"text",required:!1,helpText:"Manufacturer"},sensor_model:{label:"Sensor Model",type:"text",required:!1,helpText:"Model number"}},summaryFields:["band1_wavelength_nm","band2_wavelength_nm","sensor_brand"]},hyperspectral:{key:"hyperspectral",name:"Hyperspectral Sensor",code:"HYP",description:"Imaging spectrometer with continuous spectral bands",icon:"rainbow",color:"#ec4899",category:"spectral",platforms:["fixed","uav","satellite"],fields:{spectral_range_start_nm:{label:"Range Start (nm)",type:"number",required:!1,helpText:"Starting wavelength"},spectral_range_end_nm:{label:"Range End (nm)",type:"number",required:!1,helpText:"Ending wavelength"},spectral_resolution_nm:{label:"Spectral Resolution (nm)",type:"number",required:!1,helpText:"Bandwidth per channel"},number_of_bands:{label:"Number of Bands",type:"number",required:!1,helpText:"Total spectral bands"},spatial_resolution:{label:"Spatial Resolution",type:"text",required:!1,helpText:"Ground sample distance"}},summaryFields:["spectral_range_start_nm","spectral_range_end_nm","number_of_bands"]},thermal:{key:"thermal",name:"Thermal Camera",code:"TIR",description:"Infrared camera for surface temperature measurement",icon:"temperature-high",color:"#ef4444",category:"thermal",platforms:["fixed","uav","satellite"],fields:{temperature_range_min:{label:"Min Temperature (°C)",type:"number",required:!1,helpText:"Minimum measurable temperature"},temperature_range_max:{label:"Max Temperature (°C)",type:"number",required:!1,helpText:"Maximum measurable temperature"},thermal_sensitivity:{label:"Thermal Sensitivity (mK)",type:"number",required:!1,helpText:"NETD value"},resolution:{label:"Resolution",type:"text",required:!1,placeholder:"640x512",helpText:"Sensor resolution"},spectral_range:{label:"Spectral Range",type:"text",required:!1,placeholder:"7.5-13.5 μm",helpText:"Thermal wavelength range"}},summaryFields:["temperature_range_min","temperature_range_max","resolution"]},lidar:{key:"lidar",name:"LiDAR",code:"LID",description:"Light Detection and Ranging for 3D structure",icon:"wave-square",color:"#14b8a6",category:"structural",platforms:["uav","satellite"],fields:{wavelength_nm:{label:"Wavelength (nm)",type:"number",required:!1,helpText:"Laser wavelength"},pulse_rate:{label:"Pulse Rate",type:"text",required:!1,placeholder:"100 kHz",helpText:"Pulses per second"},range_m:{label:"Range (m)",type:"number",required:!1,helpText:"Maximum detection range"},accuracy_cm:{label:"Accuracy (cm)",type:"number",required:!1,helpText:"Vertical accuracy"},point_density:{label:"Point Density",type:"text",required:!1,placeholder:"100 pts/m²",helpText:"Points per square meter"}},summaryFields:["wavelength_nm","pulse_rate","range_m"]},radar:{key:"radar",name:"Radar (SAR)",code:"SAR",description:"Synthetic Aperture Radar for all-weather observation",icon:"satellite-dish",color:"#6366f1",category:"microwave",platforms:["satellite"],fields:{band:{label:"Band",type:"select",required:!1,options:["X","C","S","L","P"],helpText:"Radar frequency band"},polarization:{label:"Polarization",type:"select",required:!1,options:["VV","VH","HH","HV","Dual","Quad"],helpText:"Polarization mode"},resolution_m:{label:"Resolution (m)",type:"number",required:!1,helpText:"Spatial resolution"},swath_width_km:{label:"Swath Width (km)",type:"number",required:!1,helpText:"Ground coverage width"}},summaryFields:["band","polarization","resolution_m"]}},W={PL:{code:"PL",name:"Pole/Tower/Mast",description:"Elevated structures (>1.5m height)",icon:"tower-observation",platformTypes:["fixed"],minHeight:1.5},BL:{code:"BL",name:"Building",description:"Rooftop or facade mounted",icon:"building",platformTypes:["fixed"]},GL:{code:"GL",name:"Ground Level",description:"Installations below 1.5m height",icon:"down-long",platformTypes:["fixed"],maxHeight:1.5},UAV:{code:"UAV",name:"UAV Position",description:"Drone flight position",icon:"drone",platformTypes:["uav"]},SAT:{code:"SAT",name:"Satellite",description:"Virtual satellite position",icon:"satellite",platformTypes:["satellite"]},MOB:{code:"MOB",name:"Mobile",description:"Portable platform",icon:"truck",platformTypes:["mobile"]},USV:{code:"USV",name:"Surface Vehicle",description:"Unmanned surface vehicle",icon:"ship",platformTypes:["usv"]},UUV:{code:"UUV",name:"Underwater Vehicle",description:"Unmanned underwater vehicle",icon:"water",platformTypes:["uuv"]}},Y={FOR:{code:"FOR",name:"Forest",description:"Mixed or unspecified forest"},AGR:{code:"AGR",name:"Arable Land",description:"Agricultural cropland"},GRA:{code:"GRA",name:"Grassland",description:"Natural grassland"},HEA:{code:"HEA",name:"Heathland",description:"Heath and shrubland"},MIR:{code:"MIR",name:"Mires",description:"Wetland mire ecosystems"},ALP:{code:"ALP",name:"Alpine",description:"Alpine and subalpine zones"},LAK:{code:"LAK",name:"Lake",description:"Freshwater lake ecosystems"},CON:{code:"CON",name:"Coniferous Forest",description:"Evergreen conifer forest"},WET:{code:"WET",name:"Wetland",description:"Wetland ecosystems"},DEC:{code:"DEC",name:"Deciduous Forest",description:"Broadleaf deciduous forest"},MAR:{code:"MAR",name:"Marshland",description:"Marsh ecosystems"},PEA:{code:"PEA",name:"Peatland",description:"Peat-forming wetlands"},GEN:{code:"GEN",name:"General",description:"General or multiple ecosystems"}};function j(e){return z[e]||null}function T(e){if(!e)return null;const t=e.toLowerCase().replace(/[\s-]/g,"_");if(S[t])return S[t];for(const r of Object.values(S))if(r.name.toLowerCase()===e.toLowerCase()||e.toLowerCase().includes(r.key))return r;return null}function Q(e){const t=T(e);return(t==null?void 0:t.fields)||{}}function Z(e){const t=T(e);return(t==null?void 0:t.code)||null}function ee(e){const t=T(e);return(t==null?void 0:t.summaryFields)||[]}function te(e){var r;if(!e)return null;const t=(r=e.match(/^([A-Z]+)/))==null?void 0:r[1];return t?W[t]:null}function ae(e){return Y[e]||null}function re(e,t){return e==null||e===""?"—":(t==null?void 0:t.type)==="date"?new Date(e).toLocaleDateString():(t==null?void 0:t.type)==="number"&&(t!=null&&t.unit)?`${e} ${t.unit}`:String(e)}const le=D("platforms",()=>{const e=m([]),t=m(null),r=m(!1),o=m(null),p=v(()=>e.value.length),f=v(()=>{const l={fixed:[],uav:[],satellite:[]};return e.value.forEach(a=>{const n=a.platform_type||"fixed";l[n]&&l[n].push(a)}),l}),h=v(()=>e.value.filter(l=>l.status==="Active"));async function y(l){r.value=!0,o.value=null;try{const a=await u.get(`/platforms/station/${l}`);a.data?e.value=a.data||[]:a.success?e.value=a.data||[]:o.value=a.error||"Failed to fetch platforms"}catch(a){o.value=a.message}finally{r.value=!1}}async function g(l){r.value=!0,o.value=null;try{const a=await u.get(`/platforms/${l}`),n=a.data||(a.success?a.data:null);return n?(t.value=n,n):(o.value=a.error||"Platform not found",null)}catch(a){return o.value=a.message,null}finally{r.value=!1}}async function d(l){r.value=!0,o.value=null;try{const a=await u.post("/platforms",l),n=a.data||(a.success?a.data:null);return n?(e.value.push(n),n):(o.value=a.error||"Failed to create platform",null)}catch(a){return o.value=a.message,null}finally{r.value=!1}}async function b(l,a){var n;r.value=!0,o.value=null;try{const s=await u.put(`/platforms/${l}`,a),c=s.data||(s.success?s.data:null);if(c){const A=e.value.findIndex(E=>E.id===l);return A!==-1&&(e.value[A]=c),((n=t.value)==null?void 0:n.id)===l&&(t.value=c),c}else return o.value=s.error||"Failed to update platform",null}catch(s){return o.value=s.message,null}finally{r.value=!1}}async function R(l){var a;r.value=!0,o.value=null;try{const n=await u.delete(`/platforms/${l}`);return n.deleted||n.success?(e.value=e.value.filter(s=>s.id!==l),((a=t.value)==null?void 0:a.id)===l&&(t.value=null),!0):(o.value=n.error||"Failed to delete platform",!1)}catch(n){return o.value=n.message,!1}finally{r.value=!1}}function q(){t.value=null}function I(){e.value=[],t.value=null}return{platforms:e,currentPlatform:t,loading:r,error:o,platformCount:p,platformsByType:f,activePlatforms:h,fetchPlatformsByStation:y,fetchPlatform:g,createPlatform:d,updatePlatform:b,deletePlatform:R,clearCurrentPlatform:q,clearPlatforms:I}});export{Y as E,S as I,W as M,z as P,K as _,T as a,ee as b,te as c,ae as d,Q as e,re as f,j as g,Z as h,le as u};
