const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginView-CU8cmnHD.js","assets/vendor-2iZwFq-s.js","assets/DashboardView-qmr6OM9O.js","assets/InstrumentIcon.vue_vue_type_style_index_0_scoped_cbf9e092_lang-D-dukWxj.js","assets/InstrumentIcon-YuUh7puT.css","assets/leaflet-src-DUdEndMj.js","assets/ExportModal-DqXNiToO.js","assets/DashboardView-CSqqzq0V.css","assets/AdminDashboardView-B1tiCPPC.js","assets/AdminView-TpYiUITC.js","assets/StationView-CrcdB5Pa.js","assets/useTypeRegistry-CiWZAadw.js","assets/SatellitePlatformDetails-Cxri440M.js","assets/SatellitePlatformDetails-vDCQD1_i.css","assets/PlatformView-Bbq0VzTc.js","assets/InstrumentFormModal-DuGC9yvv.js","assets/InstrumentView-BBC1P40r.js","assets/InstrumentView-C-nXLWy3.css","assets/NotFoundView-C73XeW2G.js"])))=>i.map(i=>d[i]);
import{d as Q,r as A,c as P,u as oe,a as Se,b as ae,e as v,o as d,f as e,g as R,w as $,F as N,h as O,i as F,t as S,j as le,k as T,l as B,n as V,m as Me,p as Pe,q as ie,T as Ae,s as ne,v as Le,x as Ce,y as Ie,z as Re,A as Ee,B as Te}from"./vendor-2iZwFq-s.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))s(m);new MutationObserver(m=>{for(const u of m)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function a(m){const u={};return m.integrity&&(u.integrity=m.integrity),m.referrerPolicy&&(u.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?u.credentials="include":m.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(m){if(m.ep)return;m.ep=!0;const u=a(m);fetch(m.href,u)}})();const Ve="/images/SITES_spectral_LOGO.png",W="/api/v11";function $e(){return localStorage.getItem("auth_token")}function K(){const t=new Headers({"Content-Type":"application/json"}),r=$e();return r&&t.set("Authorization",`Bearer ${r}`),t}async function J(t){const r=await t.json();if(!t.ok)throw t.status===401?(localStorage.removeItem("auth_token"),window.location.href="/login",new Error("Session expired. Please login again.")):new Error(r.error||r.message||`HTTP error ${t.status}`);return r}const I={async get(t,r={}){const a=new URL(`${W}${t}`,window.location.origin);Object.entries(r).forEach(([m,u])=>{u!=null&&a.searchParams.set(m,u)});const s=await fetch(a.toString(),{method:"GET",headers:K()});return J(s)},async post(t,r={}){const a=await fetch(`${W}${t}`,{method:"POST",headers:K(),body:JSON.stringify(r)});return J(a)},async put(t,r={}){const a=await fetch(`${W}${t}`,{method:"PUT",headers:K(),body:JSON.stringify(r)});return J(a)},async delete(t,r={}){const a=new URL(`${W}${t}`,window.location.origin);Object.entries(r).forEach(([m,u])=>{u!=null&&a.searchParams.set(m,u)});const s=await fetch(a.toString(),{method:"DELETE",headers:K()});return J(s)}},Ne=["admin","sites-admin","spectral-admin"],se=["admin","sites-admin","spectral-admin"],X=Q("auth",()=>{const t=A(null),r=A(localStorage.getItem("auth_token")),a=A("/"),s=P(()=>t.value?!!(Ne.includes(t.value.role)||se.includes(t.value.username)):!1),m=P(()=>{if(!t.value)return!1;if(t.value.role==="station-admin")return!0;const o=t.value.username||"";return o.endsWith("-admin")&&!se.includes(o)}),u=P(()=>!t.value||s.value||m.value?!1:t.value.role==="station"||!!t.value.station_id),h=P(()=>!!r.value&&!!t.value),_=P(()=>{var o;return s.value?"admin":m.value?"station-admin":u.value?"station":((o=t.value)==null?void 0:o.role)||"readonly"}),x=P(()=>{var o;return((o=t.value)==null?void 0:o.station_id)||null}),w=P(()=>{var i;if(!((i=t.value)!=null&&i.username))return null;const o=t.value.username;return o.endsWith("-admin")&&!se.includes(o)?o.replace(/-admin$/,""):u.value&&!o.includes("-")?o:null});function g(o){var i,y,C,D;if(s.value)return!0;if(m.value){const H=w.value,z=(i=t.value)==null?void 0:i.station_acronym,G=(y=t.value)==null?void 0:y.station_id;if(typeof o=="string"){const Z=o.toLowerCase();return Z===(H==null?void 0:H.toLowerCase())||Z===(z==null?void 0:z.toLowerCase())}return G===o}if(u.value){const H=(C=t.value)==null?void 0:C.station_id,z=(D=t.value)==null?void 0:D.station_acronym;return typeof o=="string"?o.toLowerCase()===(z==null?void 0:z.toLowerCase()):H===o}return!1}async function p(o,i){try{const y=await I.post("/auth/login",{username:o,password:i});return y.success?(r.value=y.token,t.value=y.user,localStorage.setItem("auth_token",y.token),!0):!1}catch(y){return console.error("Login error:",y),!1}}function b(){r.value=null,t.value=null,localStorage.removeItem("auth_token")}async function M(){if(!r.value)return!1;try{const o=await I.get("/auth/me");return o.success?(t.value=o.user,!0):(b(),!1)}catch{return b(),!1}}function k(o){a.value=o}function f(){const o=a.value;return a.value="/",o}return{user:t,token:r,redirectPath:a,isAuthenticated:h,isAdmin:s,isStationAdmin:m,isStationUser:u,userRole:_,userStation:x,userStationFromUsername:w,canEditStation:g,login:p,logout:b,initialize:M,setRedirectPath:k,getRedirectPath:f}}),de=Q("stations",()=>{const t=A([]),r=A(null),a=A(!1),s=A(null),m=P(()=>t.value.length),u=P(()=>t.value.filter(p=>p.status==="Active")),h=P(()=>p=>t.value.find(b=>b.acronym===p));async function _(){a.value=!0,s.value=null;try{const p=await I.get("/stations");p.data?t.value=p.data||[]:p.success?t.value=p.data||[]:s.value=p.error||"Failed to fetch stations"}catch(p){s.value=p.message}finally{a.value=!1}}async function x(p){a.value=!0,s.value=null;try{const b=await I.get(`/stations/${p}`),M=b.data||(b.success?b.data:null);return M?(r.value=M,M):(s.value=b.error||"Station not found",null)}catch(b){return s.value=b.message,null}finally{a.value=!1}}async function w(p,b){a.value=!0,s.value=null;try{const M=await I.put(`/stations/${p}`,b),k=M.data||(M.success?M.data:null);if(k){r.value=k;const f=t.value.findIndex(o=>o.id===p);return f!==-1&&(t.value[f]=k),k}else return s.value=M.error||"Failed to update station",null}catch(M){return s.value=M.message,null}finally{a.value=!1}}function g(){r.value=null}return{stations:t,currentStation:r,loading:a,error:s,stationCount:m,activeStations:u,getStationByAcronym:h,fetchStations:_,fetchStation:x,updateStation:w,clearCurrentStation:g}}),Oe={class:"navbar bg-base-100 shadow-lg sticky top-0 z-50"},Be={class:"navbar-start"},De={class:"navbar-center hidden lg:flex"},He={class:"breadcrumbs text-sm"},ze={class:"navbar-end"},Fe={key:0,class:"dropdown dropdown-end mr-2"},je={tabindex:"0",class:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow-lg bg-base-100 rounded-box w-52"},Ue={class:"dropdown dropdown-end"},qe={tabindex:"0",role:"button",class:"btn btn-ghost gap-2"},Ye={class:"avatar placeholder"},Ge={class:"bg-neutral text-neutral-content rounded-full w-8"},Ze={class:"text-xs"},We={class:"hidden sm:inline"},Ke={tabindex:"0",class:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow-lg bg-base-100 rounded-box w-52"},Je={key:0},Qe={key:1},Xe={__name:"TheNavbar",setup(t){const r=oe(),a=Se(),s=X(),m=de(),u=P(()=>{const w=[{name:"Home",path:"/"}];return r.params.acronym&&w.push({name:r.params.acronym,path:`/stations/${r.params.acronym}`}),w}),h=P(()=>{var g,p;const w=(g=s.user)==null?void 0:g.station_normalized_name;if(w&&!s.isAdmin){const b=m.stations.find(M=>M.normalized_name===w);if(b!=null&&b.display_name)return b.display_name}return((p=s.user)==null?void 0:p.username)||"User"}),_=P(()=>{const w=s.userRole;return{admin:"badge-primary",station:"badge-secondary",readonly:"badge-ghost"}[w]||"badge-ghost"});async function x(){s.logout(),a.push("/login")}return(w,g)=>{const p=ae("router-link");return d(),v("nav",Oe,[e("div",Be,[R(p,{to:"/",class:"btn btn-ghost normal-case text-xl gap-2"},{default:$(()=>[...g[0]||(g[0]=[e("img",{src:Ve,alt:"SITES Spectral",class:"h-8 w-auto"},null,-1),e("span",{class:"hidden sm:inline"},"SITES Spectral",-1)])]),_:1})]),e("div",De,[e("div",He,[e("ul",null,[(d(!0),v(N,null,O(u.value,b=>(d(),v("li",{key:b.path},[R(p,{to:b.path,class:"hover:text-primary"},{default:$(()=>[F(S(b.name),1)]),_:2},1032,["to"])]))),128))])])]),e("div",ze,[g[8]||(g[8]=le('<label class="swap swap-rotate btn btn-ghost btn-circle mr-2"><input type="checkbox" class="theme-controller" value="dark"><svg class="swap-on fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"></path></svg><svg class="swap-off fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"></path></svg></label>',1)),B(s).isAdmin?(d(),v("div",Fe,[e("div",{tabindex:"0",role:"button",class:V(["btn btn-ghost btn-sm",{"btn-active":B(r).path.startsWith("/admin")}])},[...g[1]||(g[1]=[le('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg><span class="hidden md:inline">Admin</span><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',3)])],2),e("ul",je,[e("li",null,[R(p,{to:"/admin",class:V({active:B(r).path==="/admin"})},{default:$(()=>[...g[2]||(g[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),F(" Dashboard ",-1)])]),_:1},8,["class"])]),e("li",null,[R(p,{to:"/admin/settings",class:V({active:B(r).path==="/admin/settings"})},{default:$(()=>[...g[3]||(g[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),F(" Users & Settings ",-1)])]),_:1},8,["class"])])])])):T("",!0),e("div",Ue,[e("div",qe,[e("div",Ye,[e("div",Ge,[e("span",Ze,S(h.value.charAt(0).toUpperCase()),1)])]),e("span",We,S(h.value),1),e("span",{class:V(["badge badge-sm",_.value])},S(B(s).userRole),3)]),e("ul",Ke,[B(s).isAdmin?(d(),v("li",Je,[R(p,{to:"/admin"},{default:$(()=>[...g[4]||(g[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),F(" Admin Dashboard ",-1)])]),_:1})])):T("",!0),B(s).isAdmin?(d(),v("li",Qe,[R(p,{to:"/admin/settings"},{default:$(()=>[...g[5]||(g[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),F(" Users & Settings ",-1)])]),_:1})])):T("",!0),g[6]||(g[6]=e("li",null,[e("a",{class:"justify-between"},[F(" Profile "),e("span",{class:"badge badge-sm badge-outline"},"Coming soon")])],-1)),g[7]||(g[7]=e("li",{class:"divider"},null,-1)),e("li",null,[e("button",{onClick:x,class:"text-error"}," Logout ")])])])])])}}},et=Q("platforms",()=>{const t=A([]),r=A(null),a=A(!1),s=A(null),m=P(()=>t.value.length),u=P(()=>{const k={fixed:[],uav:[],satellite:[]};return t.value.forEach(f=>{const o=f.platform_type||"fixed";k[o]&&k[o].push(f)}),k}),h=P(()=>t.value.filter(k=>k.status==="Active"));async function _(k){a.value=!0,s.value=null;try{const f=await I.get(`/platforms/station/${k}`);f.data?t.value=f.data||[]:f.success?t.value=f.data||[]:s.value=f.error||"Failed to fetch platforms"}catch(f){s.value=f.message}finally{a.value=!1}}async function x(k){a.value=!0,s.value=null;try{const f=await I.get(`/platforms/${k}`),o=f.data||(f.success?f.data:null);return o?(r.value=o,o):(s.value=f.error||"Platform not found",null)}catch(f){return s.value=f.message,null}finally{a.value=!1}}async function w(k){a.value=!0,s.value=null;try{const f=await I.post("/platforms",k),o=f.data||(f.success?f.data:null);return o?(t.value.push(o),o):(s.value=f.error||"Failed to create platform",null)}catch(f){return s.value=f.message,null}finally{a.value=!1}}async function g(k,f){var o;a.value=!0,s.value=null;try{const i=await I.put(`/platforms/${k}`,f),y=i.data||(i.success?i.data:null);if(y){const C=t.value.findIndex(D=>D.id===k);return C!==-1&&(t.value[C]=y),((o=r.value)==null?void 0:o.id)===k&&(r.value=y),y}else return s.value=i.error||"Failed to update platform",null}catch(i){return s.value=i.message,null}finally{a.value=!1}}async function p(k){var f;a.value=!0,s.value=null;try{const o=await I.delete(`/platforms/${k}`);return o.deleted||o.success?(t.value=t.value.filter(i=>i.id!==k),((f=r.value)==null?void 0:f.id)===k&&(r.value=null),!0):(s.value=o.error||"Failed to delete platform",!1)}catch(o){return s.value=o.message,!1}finally{a.value=!1}}function b(){r.value=null}function M(){t.value=[],r.value=null}return{platforms:t,currentPlatform:r,loading:a,error:s,platformCount:m,platformsByType:u,activePlatforms:h,fetchPlatformsByStation:_,fetchPlatform:x,createPlatform:w,updatePlatform:g,deletePlatform:p,clearCurrentPlatform:b,clearPlatforms:M}}),tt=Q("instruments",()=>{const t=A([]),r=A(null),a=A(!1),s=A(null),m=P(()=>t.value.length),u=P(()=>{const o={};return t.value.forEach(i=>{const y=i.instrument_type||"Unknown";o[y]||(o[y]=[]),o[y].push(i)}),o}),h=P(()=>t.value.filter(o=>o.status==="Active")),_=P(()=>t.value.filter(o=>o.measurement_status==="Operational"));async function x(o){a.value=!0,s.value=null;try{const i=await I.get(`/instruments/platform/${o}`);i.data?t.value=i.data||[]:i.success?t.value=i.data||[]:s.value=i.error||"Failed to fetch instruments"}catch(i){s.value=i.message}finally{a.value=!1}}async function w(o){a.value=!0,s.value=null;try{const i=await I.get(`/instruments/station/${o}`);i.data?t.value=i.data||[]:i.success?t.value=i.data||[]:s.value=i.error||"Failed to fetch instruments"}catch(i){s.value=i.message}finally{a.value=!1}}async function g(o){a.value=!0,s.value=null;try{const i=await I.get(`/instruments/${o}`),y=i.data||(i.success?i.data:null);return y?(r.value=y,y):(s.value=i.error||"Instrument not found",null)}catch(i){return s.value=i.message,null}finally{a.value=!1}}async function p(o){a.value=!0,s.value=null;try{const i=await I.post("/instruments",o),y=i.data||(i.success?i.data:null);return y?(t.value.push(y),y):(s.value=i.error||"Failed to create instrument",null)}catch(i){return s.value=i.message,null}finally{a.value=!1}}async function b(o,i){var y;a.value=!0,s.value=null;try{const C=await I.put(`/instruments/${o}`,i),D=C.data||(C.success?C.data:null);if(D){const H=t.value.findIndex(z=>z.id===o);return H!==-1&&(t.value[H]=D),((y=r.value)==null?void 0:y.id)===o&&(r.value=D),D}else return s.value=C.error||"Failed to update instrument",null}catch(C){return s.value=C.message,null}finally{a.value=!1}}async function M(o){var i;a.value=!0,s.value=null;try{const y=await I.delete(`/instruments/${o}`);return y.deleted||y.success?(t.value=t.value.filter(C=>C.id!==o),((i=r.value)==null?void 0:i.id)===o&&(r.value=null),!0):(s.value=y.error||"Failed to delete instrument",!1)}catch(y){return s.value=y.message,!1}finally{a.value=!1}}function k(){r.value=null}function f(){t.value=[],r.value=null}return{instruments:t,currentInstrument:r,loading:a,error:s,instrumentCount:m,instrumentsByType:u,activeInstruments:h,operationalInstruments:_,fetchInstrumentsByPlatform:x,fetchInstrumentsByStation:w,fetchInstrument:g,createInstrument:p,updateInstrument:b,deleteInstrument:M,clearCurrentInstrument:k,clearInstruments:f}}),nt={class:"w-64 bg-base-100 min-h-screen border-r border-base-200 fixed left-0 top-16 overflow-y-auto pb-20"},st={class:"p-3"},ot={class:"flex items-center justify-between mb-3 px-1"},at={class:"badge badge-primary badge-xs"},rt={key:0,class:"flex justify-center py-8"},lt={key:1,class:"alert alert-error text-xs p-2"},it={key:2,class:"menu menu-xs bg-base-100 rounded-lg p-0 gap-0.5"},ct={class:"flex items-center gap-1 p-0"},ut=["onClick"],dt={class:"font-medium"},mt={class:"text-xs text-base-content/50 truncate hidden lg:inline"},pt={key:0,class:"ml-4 pl-2 border-l border-base-300"},vt={key:0,class:"py-2 pl-2"},ft={class:"flex items-center gap-1 p-0"},ht=["onClick"],_t={xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5 flex-shrink-0 text-base-content/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gt=["d"],xt=["title"],wt=["d"],yt={class:"truncate"},bt={key:0,class:"ml-4 pl-2 border-l border-base-300"},kt={key:0,class:"py-1 pl-2"},St={xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 flex-shrink-0 text-base-content/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Mt=["d"],Pt={class:"truncate"},At={key:1,class:"py-1 pl-2 text-xs text-base-content/40 italic"},Lt={key:1,class:"py-2 pl-2 text-xs text-base-content/40 italic"},Ct={key:3,class:"mt-6 pt-4 border-t border-base-200"},It={class:"menu menu-xs p-0"},Rt={class:"mt-6 pt-4 border-t border-base-200"},Et={key:0,class:"space-y-1"},Tt={class:"collapse collapse-arrow bg-base-200/50 rounded"},Vt=["checked"],$t={class:"collapse-content px-2"},Nt={class:"space-y-1 pt-1"},Ot={class:"font-mono font-semibold text-primary min-w-[2.5rem]"},Bt={class:"text-base-content/70"},Dt={class:"collapse collapse-arrow bg-base-200/50 rounded"},Ht=["checked"],zt={class:"collapse-content px-2"},Ft={class:"space-y-1 pt-1"},jt={class:"font-mono font-semibold text-success min-w-[2.5rem]"},Ut={class:"text-base-content/70"},qt={class:"collapse collapse-arrow bg-base-200/50 rounded"},Yt=["checked"],Gt={class:"collapse-content px-2"},Zt={class:"space-y-1 pt-1"},Wt={class:"flex-1 min-w-0"},Kt={class:"text-base-content/80"},Jt={class:"text-base-content/50 block text-[10px]"},Qt={class:"collapse collapse-arrow bg-base-200/50 rounded"},Xt=["checked"],en={class:"collapse-content px-2"},tn={class:"space-y-1 pt-1"},nn={class:"font-mono font-semibold text-secondary min-w-[2.5rem]"},sn={class:"flex-1 min-w-0"},on={class:"text-base-content/80"},an={class:"collapse collapse-arrow bg-base-200/50 rounded"},rn=["checked"],ln={class:"collapse-content px-2"},cn={class:"space-y-2 pt-1"},un={class:"text-base-content/50 text-[10px] mb-0.5"},dn={class:"font-mono text-accent block"},mn={class:"collapse collapse-arrow bg-base-200/50 rounded"},pn=["checked"],vn={class:"collapse-content px-2"},fn={class:"space-y-2 pt-1"},hn={class:"font-medium text-info mb-0.5"},_n={class:"font-mono text-accent text-[10px] block mb-0.5"},gn={class:"font-mono text-success/80 text-[10px] block mb-0.5"},xn={class:"text-base-content/50 text-[10px]"},wn={class:"collapse collapse-arrow bg-base-200/50 rounded"},yn=["checked"],bn={class:"collapse-content px-2"},kn={class:"space-y-2 pt-1"},Sn={class:"font-medium text-secondary mb-0.5"},Mn={class:"font-mono text-accent text-[10px] block mb-0.5"},Pn={class:"font-mono text-success/80 text-[10px] block mb-0.5"},An={class:"text-base-content/50 text-[10px]"},Ln={class:"collapse collapse-arrow bg-base-200/50 rounded"},Cn=["checked"],In={class:"collapse-content px-2"},Rn={class:"space-y-2 pt-1"},En={class:"font-medium text-warning mb-0.5"},Tn={class:"font-mono text-accent text-[10px] block mb-0.5 break-all"},Vn={class:"font-mono text-success/80 text-[10px] block mb-0.5 break-all"},$n={class:"text-base-content/50 text-[10px]"},Nn={__name:"TheSidebar",setup(t){const r=oe(),a=de(),s=et(),m=tt(),u=X(),h=A(new Set),_=A(new Set),x=A(!1),w=A(new Set),g=A({}),p=A({}),b=A(new Set),M=A(new Set);Me(async()=>{a.stations.length===0&&await a.fetchStations()});const k=P(()=>r.params.acronym),f=P(()=>r.params.id?parseInt(r.params.id):null),o=P(()=>r.name==="instrument"&&r.params.id?parseInt(r.params.id):null);Pe([k,f,o,i],async()=>{if(k.value&&i.value.length>0){h.value.add(k.value);const c=i.value.find(n=>n.acronym===k.value);c&&!g.value[c.id]&&await D(c)}if(f.value&&s.currentPlatform){const c=s.currentPlatform;h.value.add(c.station_acronym),_.value.add(f.value),p.value[f.value]||await H(f.value)}if(o.value&&m.currentInstrument){const n=m.currentInstrument.platform_id;_.value.add(n),p.value[n]||await H(n)}},{immediate:!0});const i=P(()=>{var E;const c=a.activeStations;if(u.isAdmin)return c;const n=(E=u.user)==null?void 0:E.station_normalized_name;return n?c.filter(l=>{var L;return l.normalized_name===n||((L=l.acronym)==null?void 0:L.toLowerCase())===n.toLowerCase()}):c});async function y(c){const n=c.acronym;h.value.has(n)?h.value.delete(n):(h.value.add(n),g.value[c.id]||await D(c))}async function C(c){_.value.has(c)?_.value.delete(c):(_.value.add(c),p.value[c]||await H(c))}async function D(c){if(!b.value.has(c.id)){b.value.add(c.id);try{const n=await fetch(`/api/v11/platforms/station/${c.id}`);if(n.ok){const E=await n.json();g.value[c.id]=E.data||[]}}catch(n){console.error("Failed to load platforms:",n)}finally{b.value.delete(c.id)}}}async function H(c){if(!M.value.has(c)){M.value.add(c);try{const n=await fetch(`/api/v11/instruments/platform/${c}`);if(n.ok){const E=await n.json();p.value[c]=E.data||[]}}catch(n){console.error("Failed to load instruments:",n)}finally{M.value.delete(c)}}}function z(c){return g.value[c]||[]}function G(c){return p.value[c]||[]}function Z(c){return k.value===c&&!f.value}function ve(c){return f.value===c&&!o.value}function fe(c){return o.value===c}function he(c){const n={fixed:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",uav:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM12 12m-3 0a3 3 0 106 0 3 3 0 00-6 0",satellite:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",mobile:"M8 17h.01M14 17h.01M8 17a2 2 0 11-4 0 2 2 0 014 0zm8 0a2 2 0 11-4 0 2 2 0 014 0zM5 17H3v-4a1 1 0 011-1h1V9a1 1 0 011-1h8a1 1 0 011 1v3h2a1 1 0 011 1v4h-2",usv:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",uuv:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"};return n[c]||n.fixed}function re(c){var l;if(!c)return null;const n=(l=c.match(/^([A-Z]+)/))==null?void 0:l[1];return{PL:"M12 2v20M8 22h8M8 6l4 16 4-16M10 12h4",BL:"M3 21h18M5 21V8l7-6 7 6v13M9 12h2v2H9M13 12h2v2h-2M11 21v-4h2v4",GL:"M12 22v-7M12 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8M12 7V4M8 9l-2-2M16 9l2-2"}[n]||null}function _e(c){var l;if(!c)return"text-base-content/40";const n=(l=c.match(/^([A-Z]+)/))==null?void 0:l[1];return{PL:"text-info",BL:"text-secondary",GL:"text-success"}[n]||"text-base-content/40"}function ge(c){const n=(c==null?void 0:c.toLowerCase())||"";return n.includes("phenocam")||n.includes("camera")?"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z M15 13a3 3 0 11-6 0 3 3 0 016 0z":n.includes("multispectral")?"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253":n.includes("par")?"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z":n.includes("ndvi")?"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z":n.includes("pri")?"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z":n.includes("hyperspectral")?"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01":n.includes("thermal")?"M9 19c-4.3 1.4-6-2.7-6-7 0-4.3 1.7-8.4 6-7m0 14V5m0 14a5 5 0 005-5 5 5 0 00-5-5":n.includes("lidar")?"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3":n.includes("radar")||n.includes("sar")?"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.14 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0":"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"}function j(c){w.value.has(c)?w.value.delete(c):w.value.add(c)}const xe=[{code:"ANS",name:"Asa",description:"Asa Research Station"},{code:"ABK",name:"Abisko",description:"Abisko Scientific Research Station"},{code:"ERK",name:"Erken",description:"Erken Laboratory"},{code:"GRI",name:"Grimsö",description:"Grimsö Wildlife Research Station"},{code:"LON",name:"Lönnstorp",description:"Lönnstorp Research Station"},{code:"RBD",name:"Röbäcksdalen",description:"Röbäcksdalen Field Research Station"},{code:"SKG",name:"Skogaryd",description:"Skogaryd Research Catchment"},{code:"SRC",name:"Stordalen",description:"Stordalen Mire"},{code:"SVB",name:"Svartberget",description:"Svartberget Research Station"}],we=[{code:"FOR",name:"Forest",description:"Mixed or general forest"},{code:"CON",name:"Coniferous",description:"Coniferous forest (spruce, pine)"},{code:"DEC",name:"Deciduous",description:"Deciduous forest (birch, oak)"},{code:"AGR",name:"Arable",description:"Agricultural cropland"},{code:"GRA",name:"Grassland",description:"Natural grassland"},{code:"HEA",name:"Heathland",description:"Heath and shrubland"},{code:"MIR",name:"Mires",description:"Wetland mire ecosystems"},{code:"WET",name:"Wetland",description:"General wetland"},{code:"PEA",name:"Peatland",description:"Peat-forming wetlands"},{code:"ALP",name:"Alpine",description:"Alpine/subalpine zones"},{code:"LAK",name:"Lake",description:"Freshwater lake"}],ye=[{code:"PL",name:"Pole/Tower/Mast",description:"Elevated structure >1.5m",color:"text-info"},{code:"BL",name:"Building",description:"Rooftop or facade mount",color:"text-secondary"},{code:"GL",name:"Ground Level",description:"Installation <1.5m height",color:"text-success"},{code:"UAV",name:"UAV Position",description:"Drone flight position",color:"text-warning"},{code:"SAT",name:"Satellite",description:"Virtual satellite position",color:"text-accent"}],be=[{code:"PHE",name:"Phenocam",description:"Digital camera for phenology"},{code:"MS",name:"Multispectral",description:"Multi-band spectral sensor"},{code:"PAR",name:"PAR Sensor",description:"Photosynthetically Active Radiation"},{code:"NDVI",name:"NDVI Sensor",description:"Vegetation index sensor"},{code:"PRI",name:"PRI Sensor",description:"Photochemical Reflectance Index"},{code:"HYP",name:"Hyperspectral",description:"Imaging spectrometer"},{code:"THR",name:"Thermal",description:"Infrared thermal sensor"},{code:"LID",name:"LiDAR",description:"Light Detection and Ranging"}],ke=[{pattern:"{STATION}_{ECOSYSTEM}_{MOUNT}{##}",example:"SVB_FOR_PL01",description:"Fixed platform"},{pattern:"{STATION}_{VENDOR}_{MODEL}_{MOUNT}{##}",example:"SVB_DJI_M3M_UAV01",description:"UAV platform"},{pattern:"{PLATFORM}_{TYPE}{##}",example:"SVB_FOR_PL01_PHE01",description:"Instrument"}],te={platforms:[{type:"Fixed Platform",format:"STATION_ECOSYSTEM_MOUNT##",example:"SVB_FOR_PL01",notes:"Station + ecosystem type + mount type with sequence number"},{type:"UAV Platform",format:"STATION_VENDOR_MODEL_UAV##",example:"LON_DJI_M3M_UAV01",notes:"Station + drone vendor + model + UAV sequence number"},{type:"Satellite Platform",format:"STATION_AGENCY_SAT_SENSOR",example:"SVB_ESA_S2A_MSI",notes:"Station + space agency + satellite + sensor name"}],instruments:[{type:"Phenocam",format:"PLATFORM_PHE##",example:"SVB_FOR_PL01_PHE01",notes:"Platform name + PHE + sequence number"},{type:"Multispectral",format:"PLATFORM_MS##",example:"SVB_FOR_PL01_MS01",notes:"Platform name + MS + sequence number"},{type:"PAR Sensor",format:"PLATFORM_PAR##",example:"ANS_MIR_PL02_PAR01",notes:"Platform name + PAR + sequence number"},{type:"NDVI Sensor",format:"PLATFORM_NDVI##",example:"LON_AGR_PL01_NDVI01",notes:"Platform name + NDVI + sequence number"},{type:"Hyperspectral",format:"PLATFORM_HYP##",example:"GRI_FOR_PL01_HYP01",notes:"Platform name + HYP + sequence number"}],files:[{type:"L0 Raw Image",format:"INSTRUMENT_YYYYMMDD_HHMMSS.jpg",example:"SVB_FOR_PL01_PHE01_20240615_120000.jpg",notes:"Instrument + date + time (UTC)"},{type:"L1 Processed",format:"INSTRUMENT_YYYYMMDD_HHMMSS_L1.tif",example:"SVB_FOR_PL01_PHE01_20240615_120000_L1.tif",notes:"L1 registered/calibrated image"},{type:"L2 Product",format:"INSTRUMENT_YYYYMMDD_PRODUCT_L2.tif",example:"SVB_FOR_PL01_PHE01_20240615_GCC_L2.tif",notes:"L2 vegetation index product"},{type:"L3 Composite",format:"INSTRUMENT_YYYYMMDD_PRODUCT_L3.csv",example:"SVB_FOR_PL01_PHE01_202406_GCC_L3.csv",notes:"L3 daily/monthly composite"}]};return(c,n)=>{const E=ae("router-link");return d(),v("aside",nt,[e("div",st,[e("div",ot,[n[9]||(n[9]=e("h2",{class:"text-sm font-semibold text-base-content/70 uppercase tracking-wide"},"Navigation",-1)),e("span",at,S(i.value.length),1)]),B(a).loading?(d(),v("div",rt,[...n[10]||(n[10]=[e("span",{class:"loading loading-spinner loading-sm"},null,-1)])])):B(a).error?(d(),v("div",lt,[e("span",null,S(B(a).error),1)])):(d(),v("ul",it,[(d(!0),v(N,null,O(i.value,l=>(d(),v("li",{key:l.acronym},[e("div",ct,[e("button",{class:"btn btn-ghost btn-xs btn-square",onClick:ie(L=>y(l),["stop"])},[(d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",class:V(["h-3 w-3 transition-transform",{"rotate-90":h.value.has(l.acronym)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...n[11]||(n[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,ut),R(E,{to:`/stations/${l.acronym}`,class:V(["flex-1 flex items-center gap-2 py-1.5 px-1 rounded hover:bg-base-200 text-sm",{"bg-primary/10 text-primary font-medium":Z(l.acronym)}])},{default:$(()=>[n[12]||(n[12]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),e("span",dt,S(l.acronym),1),e("span",mt,S(l.display_name),1)]),_:2},1032,["to","class"])]),h.value.has(l.acronym)?(d(),v("ul",pt,[b.value.has(l.id)?(d(),v("li",vt,[...n[13]||(n[13]=[e("span",{class:"loading loading-spinner loading-xs"},null,-1)])])):T("",!0),(d(!0),v(N,null,O(z(l.id),L=>(d(),v("li",{key:L.id,class:"mt-0.5"},[e("div",ft,[e("button",{class:"btn btn-ghost btn-xs btn-square",onClick:ie(q=>C(L.id),["stop"])},[(d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",class:V(["h-3 w-3 transition-transform",{"rotate-90":_.value.has(L.id)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...n[14]||(n[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,ht),R(E,{to:`/platforms/${L.id}`,class:V(["flex-1 flex items-center gap-1.5 py-1 px-1 rounded hover:bg-base-200 text-xs",{"bg-primary/10 text-primary font-medium":ve(L.id)}])},{default:$(()=>[(d(),v("svg",_t,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:he(L.platform_type)},null,8,gt)])),re(L.mount_type_code)?(d(),v("svg",{key:0,xmlns:"http://www.w3.org/2000/svg",class:V(["h-3 w-3 flex-shrink-0",_e(L.mount_type_code)]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",title:L.mount_type_code},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:re(L.mount_type_code)},null,8,wt)],10,xt)):T("",!0),e("span",yt,S(L.normalized_name||L.display_name),1)]),_:2},1032,["to","class"])]),_.value.has(L.id)?(d(),v("ul",bt,[M.value.has(L.id)?(d(),v("li",kt,[...n[15]||(n[15]=[e("span",{class:"loading loading-spinner loading-xs"},null,-1)])])):T("",!0),(d(!0),v(N,null,O(G(L.id),q=>(d(),v("li",{key:q.id,class:"mt-0.5"},[R(E,{to:`/instruments/${q.id}`,class:V(["flex items-center gap-2 py-1 px-2 rounded hover:bg-base-200 text-xs",{"bg-primary/10 text-primary font-medium":fe(q.id)}])},{default:$(()=>[(d(),v("svg",St,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:ge(q.instrument_type)},null,8,Mt)])),e("span",Pt,S(q.normalized_name||q.display_name),1)]),_:2},1032,["to","class"])]))),128)),!M.value.has(L.id)&&G(L.id).length===0?(d(),v("li",At," No instruments ")):T("",!0)])):T("",!0)]))),128)),!b.value.has(l.id)&&z(l.id).length===0?(d(),v("li",Lt," No platforms ")):T("",!0)])):T("",!0)]))),128))])),B(u).isAdmin?(d(),v("div",Ct,[n[18]||(n[18]=e("h3",{class:"text-xs font-medium text-base-content/50 uppercase tracking-wide mb-2 px-1"},"Admin",-1)),e("ul",It,[e("li",null,[R(E,{to:"/admin",class:"text-base-content/70 py-1.5"},{default:$(()=>[...n[16]||(n[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),F(" Dashboard ",-1)])]),_:1})]),e("li",null,[R(E,{to:"/admin/settings",class:"text-base-content/70 py-1.5"},{default:$(()=>[...n[17]||(n[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),F(" Users & Settings ",-1)])]),_:1})])])])):T("",!0),e("div",Rt,[e("button",{onClick:n[0]||(n[0]=l=>x.value=!x.value),class:"flex items-center justify-between w-full text-xs font-medium text-base-content/50 uppercase tracking-wide mb-2 px-1 hover:text-base-content/70 transition-colors"},[n[20]||(n[20]=e("span",{class:"flex items-center gap-1.5"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})]),F(" Reference Guide ")],-1)),(d(),v("svg",{xmlns:"http://www.w3.org/2000/svg",class:V(["h-3 w-3 transition-transform",{"rotate-180":x.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...n[19]||(n[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),x.value?(d(),v("div",Et,[e("div",Tt,[e("input",{type:"checkbox",checked:w.value.has("stations"),onChange:n[1]||(n[1]=l=>j("stations"))},null,40,Vt),n[21]||(n[21]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," Station Codes ",-1)),e("div",$t,[e("div",Nt,[(d(),v(N,null,O(xe,l=>e("div",{key:l.code,class:"flex items-start gap-2 text-xs py-0.5"},[e("code",Ot,S(l.code),1),e("span",Bt,S(l.name),1)])),64))])])]),e("div",Dt,[e("input",{type:"checkbox",checked:w.value.has("ecosystems"),onChange:n[2]||(n[2]=l=>j("ecosystems"))},null,40,Ht),n[22]||(n[22]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," Ecosystem Codes ",-1)),e("div",zt,[e("div",Ft,[(d(),v(N,null,O(we,l=>e("div",{key:l.code,class:"flex items-start gap-2 text-xs py-0.5"},[e("code",jt,S(l.code),1),e("span",Ut,S(l.name),1)])),64))])])]),e("div",qt,[e("input",{type:"checkbox",checked:w.value.has("mounts"),onChange:n[3]||(n[3]=l=>j("mounts"))},null,40,Yt),n[23]||(n[23]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," Mount Types ",-1)),e("div",Gt,[e("div",Zt,[(d(),v(N,null,O(ye,l=>e("div",{key:l.code,class:"flex items-start gap-2 text-xs py-0.5"},[e("code",{class:V(["font-mono font-semibold min-w-[2.5rem]",l.color])},S(l.code),3),e("div",Wt,[e("span",Kt,S(l.name),1),e("span",Jt,S(l.description),1)])])),64))])])]),e("div",Qt,[e("input",{type:"checkbox",checked:w.value.has("instruments"),onChange:n[4]||(n[4]=l=>j("instruments"))},null,40,Xt),n[24]||(n[24]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," Instrument Types ",-1)),e("div",en,[e("div",tn,[(d(),v(N,null,O(be,l=>e("div",{key:l.code,class:"flex items-start gap-2 text-xs py-0.5"},[e("code",nn,S(l.code),1),e("div",sn,[e("span",on,S(l.name),1)])])),64))])])]),e("div",an,[e("input",{type:"checkbox",checked:w.value.has("naming"),onChange:n[5]||(n[5]=l=>j("naming"))},null,40,rn),n[25]||(n[25]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," Naming Patterns ",-1)),e("div",ln,[e("div",cn,[(d(),v(N,null,O(ke,l=>e("div",{key:l.example,class:"text-xs"},[e("div",un,S(l.description)+":",1),e("code",dn,S(l.example),1)])),64))])])]),e("div",mn,[e("input",{type:"checkbox",checked:w.value.has("platform-naming"),onChange:n[6]||(n[6]=l=>j("platform-naming"))},null,40,pn),n[26]||(n[26]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," Platform Naming ",-1)),e("div",vn,[e("div",fn,[(d(!0),v(N,null,O(te.platforms,l=>(d(),v("div",{key:l.type,class:"text-xs border-b border-base-300/50 pb-2 last:border-0"},[e("div",hn,S(l.type),1),e("code",_n,S(l.format),1),e("code",gn,"→ "+S(l.example),1),e("div",xn,S(l.notes),1)]))),128))])])]),e("div",wn,[e("input",{type:"checkbox",checked:w.value.has("instrument-naming"),onChange:n[7]||(n[7]=l=>j("instrument-naming"))},null,40,yn),n[27]||(n[27]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," Instrument Naming ",-1)),e("div",bn,[e("div",kn,[(d(!0),v(N,null,O(te.instruments,l=>(d(),v("div",{key:l.type,class:"text-xs border-b border-base-300/50 pb-2 last:border-0"},[e("div",Sn,S(l.type),1),e("code",Mn,S(l.format),1),e("code",Pn,"→ "+S(l.example),1),e("div",An,S(l.notes),1)]))),128))])])]),e("div",Ln,[e("input",{type:"checkbox",checked:w.value.has("file-naming"),onChange:n[8]||(n[8]=l=>j("file-naming"))},null,40,Cn),n[28]||(n[28]=e("div",{class:"collapse-title text-xs font-medium py-2 px-3 min-h-0"}," File Naming (L0-L3) ",-1)),e("div",In,[e("div",Rn,[(d(!0),v(N,null,O(te.files,l=>(d(),v("div",{key:l.type,class:"text-xs border-b border-base-300/50 pb-2 last:border-0"},[e("div",En,S(l.type),1),e("code",Tn,S(l.format),1),e("code",Vn,"→ "+S(l.example),1),e("div",$n,S(l.notes),1)]))),128))])])])])):T("",!0)])])])}}},Y=A([]);let On=0;const ce={success:"alert-success",error:"alert-error",warning:"alert-warning",info:"alert-info"};function Bn(){function t(_,x="info",w=5e3){const g=++On;return Y.value.push({id:g,message:_,type:x,style:ce[x]||ce.info}),w>0&&setTimeout(()=>{u(g)},w),g}function r(_,x=5e3){return t(_,"success",x)}function a(_,x=8e3){return t(_,"error",x)}function s(_,x=6e3){return t(_,"warning",x)}function m(_,x=5e3){return t(_,"info",x)}function u(_){const x=Y.value.findIndex(w=>w.id===_);x!==-1&&Y.value.splice(x,1)}function h(){Y.value=[]}return{notifications:Y,notify:t,success:r,error:a,warning:s,info:m,remove:u,clearAll:h}}const me=(t,r)=>{const a=t.__vccOpts||t;for(const[s,m]of r)a[s]=m;return a},Dn={class:"toast toast-top toast-end z-50"},Hn={xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},zn=["d"],Fn=["onClick"],jn={__name:"NotificationToast",setup(t){const{notifications:r,remove:a}=Bn();function s(m){const u={success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"};return u[m]||u.info}return(m,u)=>(d(),v("div",Dn,[R(Ae,{name:"notification"},{default:$(()=>[(d(!0),v(N,null,O(B(r),h=>(d(),v("div",{key:h.id,class:V(["alert",h.style,"shadow-lg"])},[(d(),v("svg",Hn,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:s(h.type)},null,8,zn)])),e("span",null,S(h.message),1),e("button",{class:"btn btn-ghost btn-sm btn-circle",onClick:_=>B(a)(h.id),"aria-label":"Dismiss notification"},[...u[0]||(u[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Fn)],2))),128))]),_:1})]))}},Un=me(jn,[["__scopeId","data-v-a42a999f"]]),qn={class:"min-h-screen bg-base-200"},Yn={class:"flex"},Gn={class:"max-w-6xl mx-auto"},Zn={__name:"App",setup(t){const r=oe(),a=X(),s=P(()=>a.isAuthenticated&&r.name!=="login"),m=P(()=>r.name!=="login");return(u,h)=>{const _=ae("router-view");return d(),v("div",qn,[R(Un),m.value?(d(),ne(Xe,{key:0})):T("",!0),e("div",Yn,[s.value?(d(),ne(Nn,{key:0})):T("",!0),e("main",{class:V(["flex-1 p-4 lg:p-6",{"ml-64":s.value}])},[e("div",Gn,[R(_,null,{default:$(({Component:x})=>[R(Le,{name:"fade",mode:"out-in"},{default:$(()=>[(d(),ne(Ce(x)))]),_:2},1024)]),_:1})])],2)])])}}},Wn=me(Zn,[["__scopeId","data-v-f4f3d395"]]),Kn="modulepreload",Jn=function(t){return"/"+t},ue={},U=function(r,a,s){let m=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),_=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));m=Promise.allSettled(a.map(x=>{if(x=Jn(x),x in ue)return;ue[x]=!0;const w=x.endsWith(".css"),g=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${g}`))return;const p=document.createElement("link");if(p.rel=w?"stylesheet":Kn,w||(p.as="script"),p.crossOrigin="",p.href=x,_&&p.setAttribute("nonce",_),document.head.appendChild(p),w)return new Promise((b,M)=>{p.addEventListener("load",b),p.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${x}`)))})}))}function u(h){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=h,window.dispatchEvent(_),!_.defaultPrevented)throw h}return m.then(h=>{for(const _ of h||[])_.status==="rejected"&&u(_.reason);return r().catch(u)})},Qn=()=>U(()=>import("./LoginView-CU8cmnHD.js"),__vite__mapDeps([0,1])),Xn=()=>U(()=>import("./DashboardView-qmr6OM9O.js"),__vite__mapDeps([2,1,3,4,5,6,7])),es=()=>U(()=>import("./AdminDashboardView-B1tiCPPC.js"),__vite__mapDeps([8,1])),ts=()=>U(()=>import("./AdminView-TpYiUITC.js"),__vite__mapDeps([9,1])),ns=()=>U(()=>import("./StationView-CrcdB5Pa.js"),__vite__mapDeps([10,3,1,4,11,12,13,6])),ss=()=>U(()=>import("./PlatformView-Bbq0VzTc.js"),__vite__mapDeps([14,1,11,3,4,12,13,15])),os=()=>U(()=>import("./InstrumentView-BBC1P40r.js"),__vite__mapDeps([16,1,11,3,4,15,17])),as=()=>U(()=>import("./NotFoundView-C73XeW2G.js"),__vite__mapDeps([18,1])),rs=[{path:"/login",name:"login",component:Qn,meta:{requiresAuth:!1,title:"Login"}},{path:"/",name:"dashboard",component:Xn,meta:{requiresAuth:!0,title:"Dashboard"}},{path:"/dashboard",redirect:"/"},{path:"/admin",name:"admin",component:es,meta:{requiresAuth:!0,requiresAdmin:!0,title:"Admin Dashboard"}},{path:"/admin/settings",name:"admin-settings",component:ts,meta:{requiresAuth:!0,requiresAdmin:!0,title:"Admin Settings"}},{path:"/stations/:acronym",name:"station",component:ns,props:!0,meta:{requiresAuth:!0,title:"Station"}},{path:"/platforms/:id",name:"platform",component:ss,props:t=>({id:Number(t.params.id)}),meta:{requiresAuth:!0,title:"Platform"}},{path:"/instruments/:id",name:"instrument",component:os,props:t=>({id:Number(t.params.id)}),meta:{requiresAuth:!0,title:"Instrument"}},{path:"/:pathMatch(.*)*",name:"not-found",component:as,meta:{requiresAuth:!1,title:"Not Found"}}],pe=Ie({history:Re(),routes:rs,scrollBehavior(t,r,a){return a||{top:0}}});pe.beforeEach(async(t,r,a)=>{const s=X();if(document.title=t.meta.title?`${t.meta.title} | SITES Spectral`:"SITES Spectral",t.meta.requiresAuth&&!s.isAuthenticated){s.setRedirectPath(t.fullPath),a({name:"login"});return}if(t.meta.requiresAdmin&&!s.isAdmin){a({name:"dashboard"});return}if(t.name==="login"&&s.isAuthenticated){a({name:"dashboard"});return}a()});const ee=Ee(Wn);ee.use(Te());ee.use(pe);ee.config.errorHandler=(t,r,a)=>{console.error("Vue Error:",t),console.error("Component:",r),console.error("Info:",a)};ee.mount("#app");export{se as A,Ve as _,me as a,de as b,Bn as c,I as d,Ne as e,et as f,tt as g,U as h,X as u};
