import{E as F,M as B,P as T,_ as R}from"./InstrumentIcon.vue_vue_type_style_index_0_scoped_cbf9e092_lang-DMAKfwaO.js";import{c as b,e as u,o as i,f as e,i as M,F as w,h as k,t as v,k as C,M as I,r as E,p as N,s as L,n as j,C as A,K as U,x as D,D as P,q as z,w as G,g as Y}from"./vendor-DjAAf7Gn.js";const H={class:"space-y-4"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},J={class:"form-control"},K=["value"],Q=["value"],W={class:"form-control"},Z=["value"],ee=["value"],te={key:0,class:"label"},le={class:"label-text-alt text-base-content/60"},se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"form-control"},ne=["value"],oe={class:"form-control"},ie=["value"],re={class:"form-control"},ue={class:"bg-base-200 px-4 py-3 rounded-lg font-mono text-lg"},de={__name:"FixedPlatformFields",props:{modelValue:{type:Object,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue"],setup(c,{emit:$}){const m=c,S=$,x=b(()=>Object.values(F).map(n=>({value:n.code,label:`${n.code} - ${n.name}`,description:n.description}))),h=b(()=>Object.values(B).filter(n=>n.platformTypes.includes("fixed")).map(n=>({value:n.code,label:`${n.code} - ${n.name}`,description:n.description}))),V=b(()=>{const n=m.modelValue.mount_type_prefix;return B[n]||null}),f=b(()=>{const n=m.stationAcronym,s=m.modelValue.ecosystem_code||"???",a=m.modelValue.mount_type_prefix||"PL";return`${n}_${s}_${a}##`});function y(n,s){S("update:modelValue",{...m.modelValue,[n]:s})}return(n,s)=>(i(),u("div",H,[e("div",X,[e("div",J,[s[5]||(s[5]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[M("Ecosystem "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:c.modelValue.ecosystem_code,onChange:s[0]||(s[0]=a=>y("ecosystem_code",a.target.value)),class:"select select-bordered w-full",required:""},[s[4]||(s[4]=e("option",{value:""},"Select ecosystem...",-1)),(i(!0),u(w,null,k(x.value,a=>(i(),u("option",{key:a.value,value:a.value},v(a.label),9,Q))),128))],40,K),s[6]||(s[6]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," The ecosystem type being monitored at this platform ")],-1))]),e("div",W,[s[7]||(s[7]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[M("Mount Type "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:c.modelValue.mount_type_prefix,onChange:s[1]||(s[1]=a=>y("mount_type_prefix",a.target.value)),class:"select select-bordered w-full",required:""},[(i(!0),u(w,null,k(h.value,a=>(i(),u("option",{key:a.value,value:a.value},v(a.label),9,ee))),128))],40,Z),V.value?(i(),u("label",te,[e("span",le,v(V.value.description),1)])):C("",!0)])]),e("div",se,[e("div",ae,[s[8]||(s[8]=e("label",{class:"label"},[e("span",{class:"label-text"},"Platform Height (m)")],-1)),e("input",{type:"number",value:c.modelValue.platform_height_m,onInput:s[2]||(s[2]=a=>y("platform_height_m",a.target.value?Number(a.target.value):null)),class:"input input-bordered w-full",placeholder:"e.g., 30",min:"0",max:"500",step:"0.1"},null,40,ne),s[9]||(s[9]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," Height above ground in meters ")],-1))]),e("div",oe,[s[10]||(s[10]=e("label",{class:"label"},[e("span",{class:"label-text"},"Mounting Structure")],-1)),e("input",{type:"text",value:c.modelValue.mounting_structure,onInput:s[3]||(s[3]=a=>y("mounting_structure",a.target.value)),class:"input input-bordered w-full",placeholder:"e.g., Steel lattice tower"},null,40,ie),s[11]||(s[11]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," Description of the physical mounting structure ")],-1))])]),e("div",re,[s[12]||(s[12]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Name Preview")],-1)),e("div",ue,v(f.value),1),s[13]||(s[13]=e("label",{class:"label"},[e("span",{class:"label-text-alt"}," Format: {STATION}_{ECOSYSTEM}_{MOUNT_TYPE}## ")],-1))])]))}},ce={class:"space-y-4"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"form-control"},ve=["value"],be=["value"],fe={class:"form-control"},ye=["value","disabled"],ge=["value"],xe={key:0,class:"alert alert-info"},_e={class:"font-medium"},Se={class:"list-disc list-inside mt-1 text-sm"},Ve={key:1,class:"alert alert-warning"},$e={class:"form-control"},he={class:"bg-base-200 px-4 py-3 rounded-lg font-mono text-lg"},we={__name:"UAVPlatformFields",props:{modelValue:{type:Object,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue"],setup(c,{emit:$}){const m=c,S=$,x=b(()=>T.uav),h=b(()=>x.value.fields.vendor.options.map(a=>({value:a,label:a}))),V=b(()=>{const a=m.modelValue.vendor;return a?(x.value.fields.model.optionsByParent[a]||[]).map(d=>({value:d,label:d})):[]}),f=b(()=>{const a=m.stationAcronym,o=m.modelValue.vendor||"???",d=m.modelValue.model||"???";return`${a}_${o}_${d}_UAV##`});function y(a,o){const d={...m.modelValue,[a]:o};a==="vendor"&&(d.model=""),S("update:modelValue",d)}const n={M3M:["Multispectral (4 bands + RGB)","RGB Camera"],P4M:["Multispectral (5 bands)","RGB Camera"],M30T:["RGB Camera","Thermal Camera","Laser Rangefinder"],M300:["Payload Mount (customizable)"],M350:["Payload Mount (customizable)"],"RedEdge-MX":["Multispectral (5 bands)"],"Altum-PT":["Multispectral (5 bands)","Thermal Camera","Panchromatic"],"Sequoia+":["Multispectral (4 bands)","RGB Camera"],"Nano-Hyperspec":["Hyperspectral (270 bands)"]},s=b(()=>n[m.modelValue.model]||[]);return(a,o)=>(i(),u("div",ce,[e("div",me,[e("div",pe,[o[3]||(o[3]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[M("Vendor "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:c.modelValue.vendor,onChange:o[0]||(o[0]=d=>y("vendor",d.target.value)),class:"select select-bordered w-full",required:""},[o[2]||(o[2]=e("option",{value:""},"Select vendor...",-1)),(i(!0),u(w,null,k(h.value,d=>(i(),u("option",{key:d.value,value:d.value},v(d.label),9,be))),128))],40,ve),o[4]||(o[4]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," UAV or sensor manufacturer ")],-1))]),e("div",fe,[o[6]||(o[6]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[M("Model "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:c.modelValue.model,onChange:o[1]||(o[1]=d=>y("model",d.target.value)),class:"select select-bordered w-full",required:"",disabled:!c.modelValue.vendor},[o[5]||(o[5]=e("option",{value:""},"Select model...",-1)),(i(!0),u(w,null,k(V.value,d=>(i(),u("option",{key:d.value,value:d.value},v(d.label),9,ge))),128))],40,ye),o[7]||(o[7]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," UAV or sensor model ")],-1))])]),s.value.length>0?(i(),u("div",xe,[o[8]||(o[8]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("div",_e,"Auto-created instruments for "+v(c.modelValue.model)+":",1),e("ul",Se,[(i(!0),u(w,null,k(s.value,d=>(i(),u("li",{key:d},v(d),1))),128))])])])):(i(),u("div",Ve,[...o[9]||(o[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("span",null,"UAV instruments will be auto-created based on the selected model.",-1)])])),e("div",$e,[o[10]||(o[10]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Name Preview")],-1)),e("div",he,v(f.value),1),o[11]||(o[11]=e("label",{class:"label"},[e("span",{class:"label-text-alt"}," Format: {STATION}_{VENDOR}_{MODEL}_UAV## ")],-1))])]))}},ke={class:"space-y-4"},Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Me={class:"form-control"},Oe=["value"],Te=["value"],Ae={class:"form-control"},Pe=["value","disabled"],Ee=["value"],Ie={class:"form-control"},Be=["value","disabled"],Ne=["value"],Le={key:0,class:"bg-base-200 p-4 rounded-lg"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Fe={key:0},Re={class:"font-medium text-accent mb-1"},je={class:"text-base-content/60"},Ue={key:1},De={class:"font-medium text-secondary mb-1"},ze={class:"text-base-content/60"},Ge={class:"form-control"},Ye={class:"bg-base-200 px-4 py-3 rounded-lg font-mono text-lg"},He={__name:"SatellitePlatformFields",props:{modelValue:{type:Object,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue"],setup(c,{emit:$}){const m=c,S=$,x=b(()=>T.satellite),h=b(()=>x.value.fields.agency.options.map(g=>({value:g,label:g}))),V=b(()=>{const g=m.modelValue.agency;return g?(x.value.fields.satellite.optionsByParent[g]||[]).map(t=>({value:t,label:t})):[]}),f=b(()=>{const g=m.modelValue.satellite;return g?(x.value.fields.sensor.optionsByParent[g]||[]).map(t=>({value:t,label:t})):[]}),y=b(()=>{const g=m.stationAcronym,r=m.modelValue.agency||"???",t=m.modelValue.satellite||"???",l=m.modelValue.sensor||"???";return`${g}_${r}_${t}_${l}`});function n(g,r){const t={...m.modelValue,[g]:r};g==="agency"&&(t.satellite="",t.sensor=""),g==="satellite"&&(t.sensor=""),S("update:modelValue",t)}const s={S2A:{name:"Sentinel-2A",launch:"2015",orbit:"Sun-synchronous"},S2B:{name:"Sentinel-2B",launch:"2017",orbit:"Sun-synchronous"},S3A:{name:"Sentinel-3A",launch:"2016",orbit:"Sun-synchronous"},S3B:{name:"Sentinel-3B",launch:"2018",orbit:"Sun-synchronous"},S1A:{name:"Sentinel-1A",launch:"2014",orbit:"Sun-synchronous"},S1B:{name:"Sentinel-1B",launch:"2016",orbit:"Sun-synchronous"},L8:{name:"Landsat 8",launch:"2013",orbit:"Sun-synchronous"},L9:{name:"Landsat 9",launch:"2021",orbit:"Sun-synchronous"}},a=b(()=>s[m.modelValue.satellite]||null),o={MSI:{name:"MultiSpectral Instrument",bands:13,resolution:"10-60m"},OLCI:{name:"Ocean and Land Colour Instrument",bands:21,resolution:"300m"},SLSTR:{name:"Sea and Land Surface Temperature Radiometer",bands:11,resolution:"500m-1km"},SAR:{name:"Synthetic Aperture Radar",bands:"C-band",resolution:"5-40m"},OLI:{name:"Operational Land Imager",bands:9,resolution:"15-30m"},TIRS:{name:"Thermal Infrared Sensor",bands:2,resolution:"100m"}},d=b(()=>o[m.modelValue.sensor]||null);return(g,r)=>(i(),u("div",ke,[e("div",Ce,[e("div",Me,[r[4]||(r[4]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[M("Space Agency "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:c.modelValue.agency,onChange:r[0]||(r[0]=t=>n("agency",t.target.value)),class:"select select-bordered w-full",required:""},[r[3]||(r[3]=e("option",{value:""},"Select agency...",-1)),(i(!0),u(w,null,k(h.value,t=>(i(),u("option",{key:t.value,value:t.value},v(t.label),9,Te))),128))],40,Oe)]),e("div",Ae,[r[6]||(r[6]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[M("Satellite "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:c.modelValue.satellite,onChange:r[1]||(r[1]=t=>n("satellite",t.target.value)),class:"select select-bordered w-full",required:"",disabled:!c.modelValue.agency},[r[5]||(r[5]=e("option",{value:""},"Select satellite...",-1)),(i(!0),u(w,null,k(V.value,t=>(i(),u("option",{key:t.value,value:t.value},v(t.label),9,Ee))),128))],40,Pe)]),e("div",Ie,[r[8]||(r[8]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[M("Sensor "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:c.modelValue.sensor,onChange:r[2]||(r[2]=t=>n("sensor",t.target.value)),class:"select select-bordered w-full",required:"",disabled:!c.modelValue.satellite},[r[7]||(r[7]=e("option",{value:""},"Select sensor...",-1)),(i(!0),u(w,null,k(f.value,t=>(i(),u("option",{key:t.value,value:t.value},v(t.label),9,Ne))),128))],40,Be)])]),a.value||d.value?(i(),u("div",Le,[e("div",qe,[a.value?(i(),u("div",Fe,[e("div",Re,v(a.value.name),1),e("div",je," Launch: "+v(a.value.launch)+" | "+v(a.value.orbit),1)])):C("",!0),d.value?(i(),u("div",Ue,[e("div",De,v(d.value.name),1),e("div",ze,v(d.value.bands)+" bands | "+v(d.value.resolution),1)])):C("",!0)])])):C("",!0),e("div",Ge,[r[9]||(r[9]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Name Preview")],-1)),e("div",Ye,v(y.value),1),r[10]||(r[10]=e("label",{class:"label"},[e("span",{class:"label-text-alt"}," Format: {STATION}_{AGENCY}_{SATELLITE}_{SENSOR} ")],-1))]),r[11]||(r[11]=e("div",{class:"alert"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null,"Satellite platforms are virtual - they represent satellite data coverage over the station area.")],-1))]))}},Xe={key:0,class:"form-control"},Je={class:"flex flex-wrap gap-2"},Ke=["value"],Qe={class:"text-xl"},We={key:0,class:"label"},Ze={class:"label-text-alt text-base-content/60"},et={class:"collapse collapse-arrow bg-base-200"},tt={class:"collapse-content space-y-4"},lt={class:"form-control"},st={class:"form-control"},at={key:0,class:"grid grid-cols-2 gap-4"},nt={class:"form-control"},ot={class:"form-control"},it={class:"flex justify-end gap-2 pt-4"},rt=["disabled"],ut=["disabled"],dt={key:0,class:"loading loading-spinner loading-sm"},ct={__name:"PlatformForm",props:{platform:{type:Object,default:null},stationId:{type:Number,required:!0},stationAcronym:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(c,{emit:$}){const m=c,S=$,x={fixed:I(de),uav:I(we),satellite:I(He)},h=b(()=>Object.entries(T).map(([t,l])=>({value:t,label:l.name,icon:l.icon,description:l.description}))),V=b(()=>!!m.platform),f=E("fixed"),y=E({}),n=E({display_name:"",description:"",latitude:null,longitude:null}),s=b(()=>x[f.value]||x.fixed),a=b(()=>T[f.value]);N(()=>m.platform,t=>{t&&(f.value=t.platform_type||"fixed",n.value={display_name:t.display_name||"",description:t.description||"",latitude:t.latitude,longitude:t.longitude},o(t))},{immediate:!0});function o(t){const l=(t==null?void 0:t.platform_type)||f.value,_=T[l];if(!_)return;const p={};Object.keys(_.fields).forEach(O=>{t&&t[O]!==void 0&&(p[O]=t[O])}),l==="fixed"&&(t!=null&&t.mount_type_code)&&(p.mount_type_prefix=t.mount_type_code.substring(0,2)),y.value=p}N(f,(t,l)=>{if(t!==l&&!V.value){const _=T[t],p={};Object.entries(_.fields).forEach(([O,q])=>{p[O]=q.defaultValue??""}),y.value=p}});const d=b(()=>{const t=a.value;if(!t)return!1;for(const[l,_]of Object.entries(t.fields))if(_.required){const p=y.value[l];if(p==null||p==="")return!1}return!0});function g(){if(!d.value)return;const t={station_id:m.stationId,platform_type:f.value,...n.value};Object.entries(y.value).forEach(([l,_])=>{_!=null&&_!==""&&(t[l]=_)}),Object.keys(t).forEach(l=>{(t[l]===void 0||t[l]==="")&&delete t[l]}),S("submit",t)}function r(){S("cancel")}return(t,l)=>{var _;return i(),u("form",{onSubmit:z(g,["prevent"]),class:"space-y-6"},[V.value?C("",!0):(i(),u("div",Xe,[l[6]||(l[6]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Type")],-1)),e("div",Je,[(i(!0),u(w,null,k(h.value,p=>(i(),u("label",{key:p.value,class:j(["flex items-center gap-2 px-4 py-2 rounded-lg border cursor-pointer transition-colors",f.value===p.value?"border-primary bg-primary/10":"border-base-300 hover:border-primary/50"])},[A(e("input",{type:"radio","onUpdate:modelValue":l[0]||(l[0]=O=>f.value=O),value:p.value,class:"radio radio-primary radio-sm"},null,8,Ke),[[U,f.value]]),e("span",Qe,v(p.icon),1),e("span",null,v(p.label),1)],2))),128))]),(_=a.value)!=null&&_.description?(i(),u("label",We,[e("span",Ze,v(a.value.description),1)])):C("",!0)])),(i(),L(D(s.value),{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=p=>y.value=p),"station-acronym":c.stationAcronym},null,8,["modelValue","station-acronym"])),e("div",et,[l[11]||(l[11]=e("input",{type:"checkbox"},null,-1)),l[12]||(l[12]=e("div",{class:"collapse-title font-medium"}," Optional Fields ",-1)),e("div",tt,[e("div",lt,[l[7]||(l[7]=e("label",{class:"label"},[e("span",{class:"label-text"},"Display Name")],-1)),A(e("input",{"onUpdate:modelValue":l[2]||(l[2]=p=>n.value.display_name=p),type:"text",class:"input input-bordered w-full",placeholder:"Human-readable name"},null,512),[[P,n.value.display_name]])]),e("div",st,[l[8]||(l[8]=e("label",{class:"label"},[e("span",{class:"label-text"},"Description")],-1)),A(e("textarea",{"onUpdate:modelValue":l[3]||(l[3]=p=>n.value.description=p),class:"textarea textarea-bordered w-full",rows:"2",placeholder:"Platform description..."},null,512),[[P,n.value.description]])]),f.value!=="satellite"?(i(),u("div",at,[e("div",nt,[l[9]||(l[9]=e("label",{class:"label"},[e("span",{class:"label-text"},"Latitude")],-1)),A(e("input",{"onUpdate:modelValue":l[4]||(l[4]=p=>n.value.latitude=p),type:"number",step:"0.000001",class:"input input-bordered w-full",placeholder:"e.g., 64.256"},null,512),[[P,n.value.latitude,void 0,{number:!0}]])]),e("div",ot,[l[10]||(l[10]=e("label",{class:"label"},[e("span",{class:"label-text"},"Longitude")],-1)),A(e("input",{"onUpdate:modelValue":l[5]||(l[5]=p=>n.value.longitude=p),type:"number",step:"0.000001",class:"input input-bordered w-full",placeholder:"e.g., 19.775"},null,512),[[P,n.value.longitude,void 0,{number:!0}]])])])):C("",!0)])]),e("div",it,[e("button",{type:"button",class:"btn btn-ghost",onClick:r,disabled:c.loading}," Cancel ",8,rt),e("button",{type:"submit",class:"btn btn-primary",disabled:!d.value||c.loading},[c.loading?(i(),u("span",dt)):C("",!0),M(" "+v(V.value?"Update Platform":"Create Platform"),1)],8,ut)])],32)}}},vt={__name:"PlatformFormModal",props:{modelValue:{type:Boolean,default:!1},platform:{type:Object,default:null},stationId:{type:Number,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue","submit","cancel"],setup(c,{emit:$}){const m=c,S=$,x=E(!1),h=b(()=>!!m.platform),V=b(()=>h.value?"Edit Platform":"Create Platform");async function f(s){x.value=!0;try{S("submit",s)}finally{x.value=!1}}function y(){S("update:modelValue",!1),S("cancel")}function n(){S("update:modelValue",!1)}return(s,a)=>(i(),L(R,{"model-value":c.modelValue,title:V.value,size:"lg","onUpdate:modelValue":a[0]||(a[0]=o=>s.$emit("update:modelValue",o)),onClose:n},{default:G(()=>[Y(ct,{platform:c.platform,"station-id":c.stationId,"station-acronym":c.stationAcronym,loading:x.value,onSubmit:f,onCancel:y},null,8,["platform","station-id","station-acronym","loading"])]),_:1},8,["model-value","title"]))}};export{vt as _};
