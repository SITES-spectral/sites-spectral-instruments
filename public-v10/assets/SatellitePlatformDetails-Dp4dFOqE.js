import{_ as q}from"./InstrumentIcon.vue_vue_type_style_index_0_scoped_cbf9e092_lang-D-dukWxj.js";import{c as g,e as n,o,f as e,i as A,F as V,h as M,t as b,k,L as N,r as I,p as E,s as D,n as P,C as T,K as z,x as U,D as L,q as H,w as G,g as F,m as Y,M as B,E as Z,G as J}from"./vendor-2iZwFq-s.js";import{E as X,M as R,P as C,c as W,d as K}from"./useTypeRegistry-CiWZAadw.js";import{a as Q,h as ee}from"./index-C__mK_9Y.js";const te={class:"space-y-4"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"form-control"},oe=["value"],ae=["value"],ne={class:"form-control"},ie=["value"],re=["value"],ue={key:0,class:"label"},de={class:"label-text-alt text-base-content/60"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me={class:"form-control"},pe=["value"],ve={class:"form-control"},be=["value"],fe={class:"form-control"},ye={class:"bg-base-200 px-4 py-3 rounded-lg font-mono text-lg"},ge={__name:"FixedPlatformFields",props:{modelValue:{type:Object,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue"],setup(u,{emit:c}){const l=u,h=c,x=g(()=>Object.values(X).map(i=>({value:i.code,label:`${i.code} - ${i.name}`,description:i.description}))),_=g(()=>Object.values(R).filter(i=>i.platformTypes.includes("fixed")).map(i=>({value:i.code,label:`${i.code} - ${i.name}`,description:i.description}))),d=g(()=>{const i=l.modelValue.mount_type_prefix;return R[i]||null}),v=g(()=>{const i=l.stationAcronym,s=l.modelValue.ecosystem_code||"???",m=l.modelValue.mount_type_prefix||"PL";return`${i}_${s}_${m}##`});function $(i,s){h("update:modelValue",{...l.modelValue,[i]:s})}return(i,s)=>(o(),n("div",te,[e("div",le,[e("div",se,[s[5]||(s[5]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[A("Ecosystem "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:u.modelValue.ecosystem_code,onChange:s[0]||(s[0]=m=>$("ecosystem_code",m.target.value)),class:"select select-bordered w-full",required:""},[s[4]||(s[4]=e("option",{value:""},"Select ecosystem...",-1)),(o(!0),n(V,null,M(x.value,m=>(o(),n("option",{key:m.value,value:m.value},b(m.label),9,ae))),128))],40,oe),s[6]||(s[6]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," The ecosystem type being monitored at this platform ")],-1))]),e("div",ne,[s[7]||(s[7]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[A("Mount Type "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:u.modelValue.mount_type_prefix,onChange:s[1]||(s[1]=m=>$("mount_type_prefix",m.target.value)),class:"select select-bordered w-full",required:""},[(o(!0),n(V,null,M(_.value,m=>(o(),n("option",{key:m.value,value:m.value},b(m.label),9,re))),128))],40,ie),d.value?(o(),n("label",ue,[e("span",de,b(d.value.description),1)])):k("",!0)])]),e("div",ce,[e("div",me,[s[8]||(s[8]=e("label",{class:"label"},[e("span",{class:"label-text"},"Platform Height (m)")],-1)),e("input",{type:"number",value:u.modelValue.platform_height_m,onInput:s[2]||(s[2]=m=>$("platform_height_m",m.target.value?Number(m.target.value):null)),class:"input input-bordered w-full",placeholder:"e.g., 30",min:"0",max:"500",step:"0.1"},null,40,pe),s[9]||(s[9]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," Height above ground in meters ")],-1))]),e("div",ve,[s[10]||(s[10]=e("label",{class:"label"},[e("span",{class:"label-text"},"Mounting Structure")],-1)),e("input",{type:"text",value:u.modelValue.mounting_structure,onInput:s[3]||(s[3]=m=>$("mounting_structure",m.target.value)),class:"input input-bordered w-full",placeholder:"e.g., Steel lattice tower"},null,40,be),s[11]||(s[11]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," Description of the physical mounting structure ")],-1))])]),e("div",fe,[s[12]||(s[12]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Name Preview")],-1)),e("div",ye,b(v.value),1),s[13]||(s[13]=e("label",{class:"label"},[e("span",{class:"label-text-alt"}," Format: {STATION}_{ECOSYSTEM}_{MOUNT_TYPE}## ")],-1))])]))}},xe={class:"space-y-4"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={class:"form-control"},Se=["value"],$e=["value"],ke={class:"form-control"},we=["value","disabled"],Ae=["value"],Ve={key:0,class:"alert alert-info"},Me={class:"font-medium"},Oe={class:"list-disc list-inside mt-1 text-sm"},Ie={key:1,class:"alert alert-warning"},Ce={class:"form-control"},Te={class:"bg-base-200 px-4 py-3 rounded-lg font-mono text-lg"},Le={__name:"UAVPlatformFields",props:{modelValue:{type:Object,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue"],setup(u,{emit:c}){const l=u,h=c,x=g(()=>C.uav),_=g(()=>x.value.fields.vendor.options.map(m=>({value:m,label:m}))),d=g(()=>{const m=l.modelValue.vendor;return m?(x.value.fields.model.optionsByParent[m]||[]).map(y=>({value:y,label:y})):[]}),v=g(()=>{const m=l.stationAcronym,f=l.modelValue.vendor||"???",y=l.modelValue.model||"???";return`${m}_${f}_${y}_UAV##`});function $(m,f){const y={...l.modelValue,[m]:f};m==="vendor"&&(y.model=""),h("update:modelValue",y)}const i={M3M:["Multispectral (4 bands + RGB)","RGB Camera"],P4M:["Multispectral (5 bands)","RGB Camera"],M30T:["RGB Camera","Thermal Camera","Laser Rangefinder"],M300:["Payload Mount (customizable)"],M350:["Payload Mount (customizable)"],"RedEdge-MX":["Multispectral (5 bands)"],"Altum-PT":["Multispectral (5 bands)","Thermal Camera","Panchromatic"],"Sequoia+":["Multispectral (4 bands)","RGB Camera"],"Nano-Hyperspec":["Hyperspectral (270 bands)"]},s=g(()=>i[l.modelValue.model]||[]);return(m,f)=>(o(),n("div",xe,[e("div",_e,[e("div",he,[f[3]||(f[3]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[A("Vendor "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:u.modelValue.vendor,onChange:f[0]||(f[0]=y=>$("vendor",y.target.value)),class:"select select-bordered w-full",required:""},[f[2]||(f[2]=e("option",{value:""},"Select vendor...",-1)),(o(!0),n(V,null,M(_.value,y=>(o(),n("option",{key:y.value,value:y.value},b(y.label),9,$e))),128))],40,Se),f[4]||(f[4]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," UAV or sensor manufacturer ")],-1))]),e("div",ke,[f[6]||(f[6]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[A("Model "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:u.modelValue.model,onChange:f[1]||(f[1]=y=>$("model",y.target.value)),class:"select select-bordered w-full",required:"",disabled:!u.modelValue.vendor},[f[5]||(f[5]=e("option",{value:""},"Select model...",-1)),(o(!0),n(V,null,M(d.value,y=>(o(),n("option",{key:y.value,value:y.value},b(y.label),9,Ae))),128))],40,we),f[7]||(f[7]=e("label",{class:"label"},[e("span",{class:"label-text-alt text-base-content/60"}," UAV or sensor model ")],-1))])]),s.value.length>0?(o(),n("div",Ve,[f[8]||(f[8]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("div",Me,"Auto-created instruments for "+b(u.modelValue.model)+":",1),e("ul",Oe,[(o(!0),n(V,null,M(s.value,y=>(o(),n("li",{key:y},b(y),1))),128))])])])):(o(),n("div",Ie,[...f[9]||(f[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1),e("span",null,"UAV instruments will be auto-created based on the selected model.",-1)])])),e("div",Ce,[f[10]||(f[10]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Name Preview")],-1)),e("div",Te,b(v.value),1),f[11]||(f[11]=e("label",{class:"label"},[e("span",{class:"label-text-alt"}," Format: {STATION}_{VENDOR}_{MODEL}_UAV## ")],-1))])]))}},Ne={class:"space-y-4"},Ee={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Pe={class:"form-control"},Be=["value"],Re=["value"],De={class:"form-control"},Fe=["value","disabled"],je=["value"],qe={class:"form-control"},ze=["value","disabled"],Ue=["value"],He={key:0,class:"bg-base-200 p-4 rounded-lg"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},Ye={key:0},Ze={class:"font-medium text-accent mb-1"},Je={class:"text-base-content/60"},Xe={key:1},We={class:"font-medium text-secondary mb-1"},Ke={class:"text-base-content/60"},Qe={class:"form-control"},et={class:"bg-base-200 px-4 py-3 rounded-lg font-mono text-lg"},tt={__name:"SatellitePlatformFields",props:{modelValue:{type:Object,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue"],setup(u,{emit:c}){const l=u,h=c,x=g(()=>C.satellite),_=g(()=>x.value.fields.agency.options.map(p=>({value:p,label:p}))),d=g(()=>{const p=l.modelValue.agency;return p?(x.value.fields.satellite.optionsByParent[p]||[]).map(t=>({value:t,label:t})):[]}),v=g(()=>{const p=l.modelValue.satellite;return p?(x.value.fields.sensor.optionsByParent[p]||[]).map(t=>({value:t,label:t})):[]}),$=g(()=>{const p=l.stationAcronym,a=l.modelValue.agency||"???",t=l.modelValue.satellite||"???",r=l.modelValue.sensor||"???";return`${p}_${a}_${t}_${r}`});function i(p,a){const t={...l.modelValue,[p]:a};p==="agency"&&(t.satellite="",t.sensor=""),p==="satellite"&&(t.sensor=""),h("update:modelValue",t)}const s={S2A:{name:"Sentinel-2A",launch:"2015",orbit:"Sun-synchronous"},S2B:{name:"Sentinel-2B",launch:"2017",orbit:"Sun-synchronous"},S3A:{name:"Sentinel-3A",launch:"2016",orbit:"Sun-synchronous"},S3B:{name:"Sentinel-3B",launch:"2018",orbit:"Sun-synchronous"},S1A:{name:"Sentinel-1A",launch:"2014",orbit:"Sun-synchronous"},S1B:{name:"Sentinel-1B",launch:"2016",orbit:"Sun-synchronous"},L8:{name:"Landsat 8",launch:"2013",orbit:"Sun-synchronous"},L9:{name:"Landsat 9",launch:"2021",orbit:"Sun-synchronous"}},m=g(()=>s[l.modelValue.satellite]||null),f={MSI:{name:"MultiSpectral Instrument",bands:13,resolution:"10-60m"},OLCI:{name:"Ocean and Land Colour Instrument",bands:21,resolution:"300m"},SLSTR:{name:"Sea and Land Surface Temperature Radiometer",bands:11,resolution:"500m-1km"},SAR:{name:"Synthetic Aperture Radar",bands:"C-band",resolution:"5-40m"},OLI:{name:"Operational Land Imager",bands:9,resolution:"15-30m"},TIRS:{name:"Thermal Infrared Sensor",bands:2,resolution:"100m"}},y=g(()=>f[l.modelValue.sensor]||null);return(p,a)=>(o(),n("div",Ne,[e("div",Ee,[e("div",Pe,[a[4]||(a[4]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[A("Space Agency "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:u.modelValue.agency,onChange:a[0]||(a[0]=t=>i("agency",t.target.value)),class:"select select-bordered w-full",required:""},[a[3]||(a[3]=e("option",{value:""},"Select agency...",-1)),(o(!0),n(V,null,M(_.value,t=>(o(),n("option",{key:t.value,value:t.value},b(t.label),9,Re))),128))],40,Be)]),e("div",De,[a[6]||(a[6]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[A("Satellite "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:u.modelValue.satellite,onChange:a[1]||(a[1]=t=>i("satellite",t.target.value)),class:"select select-bordered w-full",required:"",disabled:!u.modelValue.agency},[a[5]||(a[5]=e("option",{value:""},"Select satellite...",-1)),(o(!0),n(V,null,M(d.value,t=>(o(),n("option",{key:t.value,value:t.value},b(t.label),9,je))),128))],40,Fe)]),e("div",qe,[a[8]||(a[8]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},[A("Sensor "),e("span",{class:"text-error"},"*")])],-1)),e("select",{value:u.modelValue.sensor,onChange:a[2]||(a[2]=t=>i("sensor",t.target.value)),class:"select select-bordered w-full",required:"",disabled:!u.modelValue.satellite},[a[7]||(a[7]=e("option",{value:""},"Select sensor...",-1)),(o(!0),n(V,null,M(v.value,t=>(o(),n("option",{key:t.value,value:t.value},b(t.label),9,Ue))),128))],40,ze)])]),m.value||y.value?(o(),n("div",He,[e("div",Ge,[m.value?(o(),n("div",Ye,[e("div",Ze,b(m.value.name),1),e("div",Je," Launch: "+b(m.value.launch)+" | "+b(m.value.orbit),1)])):k("",!0),y.value?(o(),n("div",Xe,[e("div",We,b(y.value.name),1),e("div",Ke,b(y.value.bands)+" bands | "+b(y.value.resolution),1)])):k("",!0)])])):k("",!0),e("div",Qe,[a[9]||(a[9]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Name Preview")],-1)),e("div",et,b($.value),1),a[10]||(a[10]=e("label",{class:"label"},[e("span",{class:"label-text-alt"}," Format: {STATION}_{AGENCY}_{SATELLITE}_{SENSOR} ")],-1))]),a[11]||(a[11]=e("div",{class:"alert"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null,"Satellite platforms are virtual - they represent satellite data coverage over the station area.")],-1))]))}},lt={key:0,class:"form-control"},st={class:"flex flex-wrap gap-2"},ot=["value"],at={class:"text-xl"},nt={key:0,class:"label"},it={class:"label-text-alt text-base-content/60"},rt={class:"collapse collapse-arrow bg-base-200"},ut={class:"collapse-content space-y-4"},dt={class:"form-control"},ct={class:"form-control"},mt={key:0,class:"grid grid-cols-2 gap-4"},pt={class:"form-control"},vt={class:"form-control"},bt={class:"flex justify-end gap-2 pt-4"},ft=["disabled"],yt=["disabled"],gt={key:0,class:"loading loading-spinner loading-sm"},xt={__name:"PlatformForm",props:{platform:{type:Object,default:null},stationId:{type:Number,required:!0},stationAcronym:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(u,{emit:c}){const l=u,h=c,x={fixed:N(ge),uav:N(Le),satellite:N(tt)},_=g(()=>Object.entries(C).map(([t,r])=>({value:t,label:r.name,icon:r.icon,description:r.description}))),d=g(()=>!!l.platform),v=I("fixed"),$=I({}),i=I({display_name:"",description:"",latitude:null,longitude:null}),s=g(()=>x[v.value]||x.fixed),m=g(()=>C[v.value]);E(()=>l.platform,t=>{t&&(v.value=t.platform_type||"fixed",i.value={display_name:t.display_name||"",description:t.description||"",latitude:t.latitude,longitude:t.longitude},f(t))},{immediate:!0});function f(t){const r=(t==null?void 0:t.platform_type)||v.value,w=C[r];if(!w)return;const S={};Object.keys(w.fields).forEach(O=>{t&&t[O]!==void 0&&(S[O]=t[O])}),r==="fixed"&&(t!=null&&t.mount_type_code)&&(S.mount_type_prefix=t.mount_type_code.substring(0,2)),$.value=S}E(v,(t,r)=>{if(t!==r&&!d.value){const w=C[t],S={};Object.entries(w.fields).forEach(([O,j])=>{S[O]=j.defaultValue??""}),$.value=S}});const y=g(()=>{const t=m.value;if(!t)return!1;for(const[r,w]of Object.entries(t.fields))if(w.required){const S=$.value[r];if(S==null||S==="")return!1}return!0});function p(){if(!y.value)return;const t={station_id:l.stationId,platform_type:v.value,...i.value};Object.entries($.value).forEach(([r,w])=>{w!=null&&w!==""&&(t[r]=w)}),Object.keys(t).forEach(r=>{(t[r]===void 0||t[r]==="")&&delete t[r]}),h("submit",t)}function a(){h("cancel")}return(t,r)=>{var w;return o(),n("form",{onSubmit:H(p,["prevent"]),class:"space-y-6"},[d.value?k("",!0):(o(),n("div",lt,[r[6]||(r[6]=e("label",{class:"label"},[e("span",{class:"label-text font-medium"},"Platform Type")],-1)),e("div",st,[(o(!0),n(V,null,M(_.value,S=>(o(),n("label",{key:S.value,class:P(["flex items-center gap-2 px-4 py-2 rounded-lg border cursor-pointer transition-colors",v.value===S.value?"border-primary bg-primary/10":"border-base-300 hover:border-primary/50"])},[T(e("input",{type:"radio","onUpdate:modelValue":r[0]||(r[0]=O=>v.value=O),value:S.value,class:"radio radio-primary radio-sm"},null,8,ot),[[z,v.value]]),e("span",at,b(S.icon),1),e("span",null,b(S.label),1)],2))),128))]),(w=m.value)!=null&&w.description?(o(),n("label",nt,[e("span",it,b(m.value.description),1)])):k("",!0)])),(o(),D(U(s.value),{modelValue:$.value,"onUpdate:modelValue":r[1]||(r[1]=S=>$.value=S),"station-acronym":u.stationAcronym},null,8,["modelValue","station-acronym"])),e("div",rt,[r[11]||(r[11]=e("input",{type:"checkbox"},null,-1)),r[12]||(r[12]=e("div",{class:"collapse-title font-medium"}," Optional Fields ",-1)),e("div",ut,[e("div",dt,[r[7]||(r[7]=e("label",{class:"label"},[e("span",{class:"label-text"},"Display Name")],-1)),T(e("input",{"onUpdate:modelValue":r[2]||(r[2]=S=>i.value.display_name=S),type:"text",class:"input input-bordered w-full",placeholder:"Human-readable name"},null,512),[[L,i.value.display_name]])]),e("div",ct,[r[8]||(r[8]=e("label",{class:"label"},[e("span",{class:"label-text"},"Description")],-1)),T(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=S=>i.value.description=S),class:"textarea textarea-bordered w-full",rows:"2",placeholder:"Platform description..."},null,512),[[L,i.value.description]])]),v.value!=="satellite"?(o(),n("div",mt,[e("div",pt,[r[9]||(r[9]=e("label",{class:"label"},[e("span",{class:"label-text"},"Latitude")],-1)),T(e("input",{"onUpdate:modelValue":r[4]||(r[4]=S=>i.value.latitude=S),type:"number",step:"0.000001",class:"input input-bordered w-full",placeholder:"e.g., 64.256"},null,512),[[L,i.value.latitude,void 0,{number:!0}]])]),e("div",vt,[r[10]||(r[10]=e("label",{class:"label"},[e("span",{class:"label-text"},"Longitude")],-1)),T(e("input",{"onUpdate:modelValue":r[5]||(r[5]=S=>i.value.longitude=S),type:"number",step:"0.000001",class:"input input-bordered w-full",placeholder:"e.g., 19.775"},null,512),[[L,i.value.longitude,void 0,{number:!0}]])])])):k("",!0)])]),e("div",bt,[e("button",{type:"button",class:"btn btn-ghost",onClick:a,disabled:u.loading}," Cancel ",8,ft),e("button",{type:"submit",class:"btn btn-primary",disabled:!y.value||u.loading},[u.loading?(o(),n("span",gt)):k("",!0),A(" "+b(d.value?"Update Platform":"Create Platform"),1)],8,yt)])],32)}}},vl={__name:"PlatformFormModal",props:{modelValue:{type:Boolean,default:!1},platform:{type:Object,default:null},stationId:{type:Number,required:!0},stationAcronym:{type:String,required:!0}},emits:["update:modelValue","submit","cancel"],setup(u,{emit:c}){const l=u,h=c,x=I(!1),_=g(()=>!!l.platform),d=g(()=>_.value?"Edit Platform":"Create Platform");async function v(s){x.value=!0;try{h("submit",s)}finally{x.value=!1}}function $(){h("update:modelValue",!1),h("cancel")}function i(){h("update:modelValue",!1)}return(s,m)=>(o(),D(q,{"model-value":u.modelValue,title:d.value,size:"lg","onUpdate:modelValue":m[0]||(m[0]=f=>s.$emit("update:modelValue",f)),onClose:i},{default:G(()=>[F(xt,{platform:u.platform,"station-id":u.stationId,"station-acronym":u.stationAcronym,loading:x.value,onSubmit:v,onCancel:$},null,8,["platform","station-id","station-acronym","loading"])]),_:1},8,["model-value","title"]))}},_t={class:"platform-mini-map-wrapper"},ht={key:0,class:"platform-mini-map rounded-lg overflow-hidden border border-base-200 relative"},St={key:0,class:"absolute inset-0 bg-base-200/80 flex items-center justify-center z-10"},$t={key:1,class:"absolute inset-0 bg-error/10 flex items-center justify-center z-10 text-xs text-error"},kt={key:1,class:"text-xs text-base-content/40 italic p-2 bg-base-200 rounded-lg text-center",style:{minHeight:"60px"}},wt={__name:"PlatformMiniMap",props:{platform:{type:Object,required:!0},height:{type:Number,default:200},zoom:{type:Number,default:14},interactive:{type:Boolean,default:!1},showPopup:{type:Boolean,default:!1}},setup(u){const c=u,l=I(null),h=I(!0),x=I(null);let _=null,d=null;const v=g(()=>{var p,a;return((p=c.platform)==null?void 0:p.latitude)!=null&&((a=c.platform)==null?void 0:a.longitude)!=null}),$={PL:"#f97316",BL:"#14b8a6",GL:"#22c55e",UAV:"#eab308",SAT:"#8b5cf6"};function i(p){var t,r;const a=((r=(t=p.mount_type_code)==null?void 0:t.match(/^([A-Z]+)/))==null?void 0:r[1])||"PL";return $[a]||$.PL}function s(p){if(!d)return null;const a=i(p);return d.divIcon({className:"platform-mini-marker",html:`
      <div style="
        width: 0;
        height: 0;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-bottom: 14px solid ${a};
        filter: drop-shadow(0 2px 3px rgba(0,0,0,0.3));
      "></div>
    `,iconSize:[16,14],iconAnchor:[8,14],popupAnchor:[0,-14]})}function m(p){const a=p.display_name||p.normalized_name||"Platform",t=p.mount_type_code||p.location_code||"";return`
    <div class="platform-mini-popup text-sm">
      <div class="font-semibold">${a}</div>
      ${t?`<div class="text-xs text-gray-500">${t}</div>`:""}
      <div class="text-xs text-gray-400 mt-1">
        ${Number(p.latitude).toFixed(5)}째N<br>
        ${Number(p.longitude).toFixed(5)}째E
      </div>
    </div>
  `}async function f(){if(!(!l.value||!v.value)){h.value=!0,x.value=null;try{if(d=await ee(()=>import("./leaflet-src-DUdEndMj.js").then(t=>t.l),[]),!document.querySelector('link[href*="leaflet.css"]')){const t=document.createElement("link");t.rel="stylesheet",t.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(t),await new Promise(r=>setTimeout(r,50))}const p=[c.platform.latitude,c.platform.longitude];_=d.map(l.value,{center:p,zoom:c.zoom,zoomControl:!0,dragging:c.interactive,scrollWheelZoom:!1,doubleClickZoom:!0,touchZoom:!0,boxZoom:!1,keyboard:!1,attributionControl:!1}),d.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}).addTo(_),d.control.scale({metric:!0,imperial:!1,maxWidth:100,position:"bottomleft"}).addTo(_);const a=d.marker(p,{icon:s(c.platform)}).addTo(_);a.bindPopup(m(c.platform)),c.showPopup&&a.openPopup(),h.value=!1}catch(p){console.error("Failed to initialize mini map:",p),x.value="Failed to load map",h.value=!1}}}function y(){_&&(_.remove(),_=null)}return Y(async()=>{await B(),v.value?await f():h.value=!1}),Z(()=>{y()}),E(()=>c.platform,async(p,a)=>{((p==null?void 0:p.latitude)!==(a==null?void 0:a.latitude)||(p==null?void 0:p.longitude)!==(a==null?void 0:a.longitude))&&(y(),await B(),v.value&&await f())},{deep:!0}),(p,a)=>(o(),n("div",_t,[v.value?(o(),n("div",ht,[h.value?(o(),n("div",St,[...a[0]||(a[0]=[e("span",{class:"loading loading-spinner loading-sm"},null,-1)])])):x.value?(o(),n("div",$t,b(x.value),1)):k("",!0),e("div",{ref_key:"mapContainer",ref:l,class:"w-full",style:J({height:`${u.height}px`})},null,4),a[1]||(a[1]=e("div",{class:"absolute bottom-0.5 right-1 text-[8px] text-base-content/30 z-20"}," OSM ",-1))])):(o(),n("div",kt," No coordinates available "))]))}},At=Q(wt,[["__scopeId","data-v-1a689d3f"]]),Vt={class:"space-y-4"},Mt={key:0,class:"w-full"},Ot={class:"grid grid-cols-2 sm:grid-cols-3 gap-3 text-sm"},It={key:0},Ct={class:"flex items-center gap-1.5 mt-0.5"},Tt={class:"font-semibold"},Lt={key:0,class:"text-xs text-base-content/60"},Nt={key:1},Et=["data-tip"],Pt={class:"flex items-center gap-1.5 mt-0.5 cursor-help"},Bt={class:"badge badge-sm badge-outline font-mono"},Rt={class:"text-xs text-base-content/60"},Dt={key:2},Ft={class:"font-medium mt-0.5 block"},jt={key:3,class:"col-span-2 sm:col-span-3"},qt={class:"text-sm mt-0.5 block"},zt={key:4,class:"col-span-2 sm:col-span-3"},Ut={class:"font-mono text-xs mt-0.5 block"},bl={__name:"FixedPlatformDetails",props:{platform:{type:Object,required:!0}},setup(u){const c=u,l=g(()=>{const d=c.platform.mount_type_code||c.platform.location_code;return W(d)}),h=g(()=>K(c.platform.ecosystem_code)),x=g(()=>{const d=c.platform.platform_height_m;return d==null?null:`${d}m`}),_=g(()=>{var d,v;return((d=c.platform)==null?void 0:d.latitude)!=null&&((v=c.platform)==null?void 0:v.longitude)!=null});return(d,v)=>(o(),n("div",Vt,[_.value?(o(),n("div",Mt,[F(At,{platform:u.platform,height:180,zoom:14,interactive:!1,"show-popup":!1},null,8,["platform"])])):k("",!0),e("div",Ot,[u.platform.ecosystem_code?(o(),n("div",It,[v[0]||(v[0]=e("span",{class:"text-xs text-base-content/50 block"},"Ecosystem",-1)),e("div",Ct,[e("span",Tt,b(u.platform.ecosystem_code),1),h.value?(o(),n("span",Lt,b(h.value.name),1)):k("",!0)])])):k("",!0),l.value?(o(),n("div",Nt,[v[1]||(v[1]=e("span",{class:"text-xs text-base-content/50 block"},"Mount Type",-1)),e("div",{class:"tooltip tooltip-bottom","data-tip":l.value.description},[e("div",Pt,[e("span",Bt,b(u.platform.mount_type_code||u.platform.location_code),1),e("span",Rt,b(l.value.name),1)])],8,Et)])):k("",!0),x.value?(o(),n("div",Dt,[v[2]||(v[2]=e("span",{class:"text-xs text-base-content/50 block"},"Height",-1)),e("span",Ft,b(x.value),1)])):k("",!0),u.platform.mounting_structure?(o(),n("div",jt,[v[3]||(v[3]=e("span",{class:"text-xs text-base-content/50 block"},"Mounting Structure",-1)),e("span",qt,b(u.platform.mounting_structure),1)])):k("",!0),_.value?(o(),n("div",zt,[v[4]||(v[4]=e("span",{class:"text-xs text-base-content/50 block"},"Coordinates",-1)),e("span",Ut,b(Number(u.platform.latitude).toFixed(6))+"째N, "+b(Number(u.platform.longitude).toFixed(6))+"째E ",1)])):k("",!0)])]))}},Ht={class:"grid grid-cols-3 gap-3 text-sm"},Gt={key:0},Yt={key:1},Zt={class:"font-semibold mt-0.5 block"},Jt={key:2},Xt={class:"badge badge-sm badge-warning badge-outline font-mono mt-0.5"},fl={__name:"UAVPlatformDetails",props:{platform:{type:Object,required:!0}},setup(u){const c=u,l=g(()=>{const d=(c.platform.normalized_name||"").split("_");return c.platform.vendor&&c.platform.model?{vendor:c.platform.vendor,model:c.platform.model,positionId:c.platform.mount_type_code||c.platform.location_code}:d.length>=4?{vendor:d[1],model:d[2],positionId:d[3]}:{vendor:c.platform.vendor||null,model:c.platform.model||null,positionId:c.platform.mount_type_code||c.platform.location_code}}),h={DJI:{name:"DJI",color:"text-orange-500"},MicaSense:{name:"MicaSense",color:"text-green-500"},Parrot:{name:"Parrot",color:"text-blue-500"},Headwall:{name:"Headwall",color:"text-purple-500"},senseFly:{name:"senseFly",color:"text-red-500"}},x=_=>h[_]||{name:_,color:"text-base-content"};return(_,d)=>(o(),n("div",Ht,[l.value.vendor?(o(),n("div",Gt,[d[0]||(d[0]=e("span",{class:"text-xs text-base-content/50 block"},"Vendor",-1)),e("span",{class:P(["font-semibold mt-0.5 block",x(l.value.vendor).color])},b(x(l.value.vendor).name),3)])):k("",!0),l.value.model?(o(),n("div",Yt,[d[1]||(d[1]=e("span",{class:"text-xs text-base-content/50 block"},"Model",-1)),e("span",Zt,b(l.value.model),1)])):k("",!0),l.value.positionId?(o(),n("div",Jt,[d[2]||(d[2]=e("span",{class:"text-xs text-base-content/50 block"},"Position",-1)),e("span",Xt,b(l.value.positionId),1)])):k("",!0),d[3]||(d[3]=e("div",{class:"col-span-3"},[e("div",{class:"flex items-center gap-2 text-xs text-base-content/60 mt-1"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5 text-warning",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),e("span",null,"Instruments auto-created based on UAV model")])],-1))]))}},Wt={class:"grid grid-cols-3 gap-3 text-sm"},Kt={key:0},Qt=["data-tip"],el={key:1},tl={class:"mt-0.5"},ll={class:"font-semibold"},sl={key:0,class:"text-xs text-base-content/60 ml-1"},ol={key:2},al=["data-tip"],nl={class:"badge badge-sm badge-accent badge-outline font-mono mt-0.5 cursor-help"},il={key:3,class:"col-span-3"},rl={class:"flex items-center gap-2 text-xs text-base-content/60 mt-1"},ul={key:0},yl={__name:"SatellitePlatformDetails",props:{platform:{type:Object,required:!0}},setup(u){const c=u,l=g(()=>{const s=(c.platform.normalized_name||"").split("_");return c.platform.agency&&c.platform.satellite?{agency:c.platform.agency,satellite:c.platform.satellite,sensor:c.platform.sensor}:s.length>=4?{agency:s[1],satellite:s[2],sensor:s[3]}:{agency:null,satellite:null,sensor:null}}),h={ESA:{name:"European Space Agency",shortName:"ESA",color:"text-blue-500",missions:["Sentinel-1","Sentinel-2","Sentinel-3"]},NASA:{name:"National Aeronautics and Space Administration",shortName:"NASA",color:"text-red-500",missions:["Landsat","MODIS"]},JAXA:{name:"Japan Aerospace Exploration Agency",shortName:"JAXA",color:"text-purple-500",missions:["ALOS"]},ISRO:{name:"Indian Space Research Organisation",shortName:"ISRO",color:"text-orange-500",missions:["ResourceSat"]},CSA:{name:"Canadian Space Agency",shortName:"CSA",color:"text-red-400",missions:["RADARSAT"]}},x={S2A:{name:"Sentinel-2A",type:"Optical",resolution:"10m"},S2B:{name:"Sentinel-2B",type:"Optical",resolution:"10m"},S3A:{name:"Sentinel-3A",type:"Ocean/Land",resolution:"300m"},S3B:{name:"Sentinel-3B",type:"Ocean/Land",resolution:"300m"},S1A:{name:"Sentinel-1A",type:"SAR",resolution:"5m"},S1B:{name:"Sentinel-1B",type:"SAR",resolution:"5m"},L8:{name:"Landsat 8",type:"Optical",resolution:"30m"},L9:{name:"Landsat 9",type:"Optical",resolution:"30m"}},_={MSI:{name:"MultiSpectral Instrument",bands:13},OLCI:{name:"Ocean and Land Colour Instrument",bands:21},SLSTR:{name:"Sea and Land Surface Temperature Radiometer",bands:11},SAR:{name:"Synthetic Aperture Radar",bands:1},OLI:{name:"Operational Land Imager",bands:9},TIRS:{name:"Thermal Infrared Sensor",bands:2}},d=i=>h[i]||{name:i,shortName:i,color:"text-base-content"},v=i=>x[i]||{name:i},$=i=>_[i]||{name:i};return(i,s)=>(o(),n("div",Wt,[l.value.agency?(o(),n("div",Kt,[s[0]||(s[0]=e("span",{class:"text-xs text-base-content/50 block"},"Agency",-1)),e("div",{class:"tooltip tooltip-bottom","data-tip":d(l.value.agency).name},[e("span",{class:P(["font-bold mt-0.5 block cursor-help",d(l.value.agency).color])},b(d(l.value.agency).shortName),3)],8,Qt)])):k("",!0),l.value.satellite?(o(),n("div",el,[s[1]||(s[1]=e("span",{class:"text-xs text-base-content/50 block"},"Satellite",-1)),e("div",tl,[e("span",ll,b(l.value.satellite),1),v(l.value.satellite).resolution?(o(),n("span",sl," ("+b(v(l.value.satellite).resolution)+") ",1)):k("",!0)])])):k("",!0),l.value.sensor?(o(),n("div",ol,[s[2]||(s[2]=e("span",{class:"text-xs text-base-content/50 block"},"Sensor",-1)),e("div",{class:"tooltip tooltip-bottom","data-tip":$(l.value.sensor).name},[e("span",nl,b(l.value.sensor),1)],8,al)])):k("",!0),v(l.value.satellite).type?(o(),n("div",il,[e("div",rl,[s[3]||(s[3]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5 text-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),e("span",null,[A(b(v(l.value.satellite).type)+" sensor ",1),$(l.value.sensor).bands?(o(),n("span",ul," with "+b($(l.value.sensor).bands)+" bands ",1)):k("",!0)])])])):k("",!0)]))}};export{bl as _,yl as a,fl as b,vl as c};
