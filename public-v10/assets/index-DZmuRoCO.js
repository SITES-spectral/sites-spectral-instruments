const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginView-BDnt5z9-.js","assets/vendor-DIThaKhE.js","assets/DashboardView-BAZSu8jD.js","assets/BaseModal-CYDQdZr3.js","assets/ExportModal-GPm56JVS.js","assets/DashboardView-9lEwX2Zo.css","assets/AdminDashboardView-D8wwdnL7.js","assets/AdminView-CgFJjal5.js","assets/StationView-ZXxnWMHA.js","assets/useTypeRegistry-Cq5ebRSc.js","assets/SatellitePlatformDetails-BjgdXvpg.js","assets/PlatformView-CQSWA2xj.js","assets/InstrumentFormModal-Drrb1Oa2.js","assets/InstrumentView-CHylimSf.js","assets/InstrumentView-C-nXLWy3.css","assets/NotFoundView-atMAHYoN.js"])))=>i.map(i=>d[i]);
import{d as G,r as M,c as S,u as ee,a as ve,b as te,e as x,o as _,f as r,g as z,w as C,h as j,F as O,i as q,t as B,j as ne,k as V,l as E,n as H,m as fe,p as he,q as se,T as pe,s as Q,v as ge,x as we,y as _e,z as ye,A as be,B as xe}from"./vendor-DIThaKhE.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))t(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&t(m)}).observe(document,{childList:!0,subtree:!0});function n(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(c){if(c.ep)return;c.ep=!0;const i=n(c);fetch(c.href,i)}})();const U="/api/v10";function ke(){return localStorage.getItem("auth_token")}function Z(){const e=new Headers({"Content-Type":"application/json"}),a=ke();return a&&e.set("Authorization",`Bearer ${a}`),e}async function W(e){const a=await e.json();if(!e.ok)throw e.status===401?(localStorage.removeItem("auth_token"),window.location.href="/login",new Error("Session expired. Please login again.")):new Error(a.error||a.message||`HTTP error ${e.status}`);return a}const $={async get(e,a={}){const n=new URL(`${U}${e}`,window.location.origin);Object.entries(a).forEach(([c,i])=>{i!=null&&n.searchParams.set(c,i)});const t=await fetch(n.toString(),{method:"GET",headers:Z()});return W(t)},async post(e,a={}){const n=await fetch(`${U}${e}`,{method:"POST",headers:Z(),body:JSON.stringify(a)});return W(n)},async put(e,a={}){const n=await fetch(`${U}${e}`,{method:"PUT",headers:Z(),body:JSON.stringify(a)});return W(n)},async delete(e,a={}){const n=new URL(`${U}${e}`,window.location.origin);Object.entries(a).forEach(([c,i])=>{i!=null&&n.searchParams.set(c,i)});const t=await fetch(n.toString(),{method:"DELETE",headers:Z()});return W(t)}},Se=["admin","spectral-admin","sites-admin","sites-spectral-admin"],X=["admin","spectral-admin","sites-admin","sites-spectral-admin"],J=G("auth",()=>{const e=M(null),a=M(localStorage.getItem("auth_token")),n=M("/"),t=S(()=>e.value?!!(Se.includes(e.value.role)||X.includes(e.value.username)):!1),c=S(()=>{if(!e.value)return!1;if(e.value.role==="station-admin")return!0;const s=e.value.username||"";return s.endsWith("-admin")&&!X.includes(s)}),i=S(()=>!e.value||t.value||c.value?!1:e.value.role==="station"||!!e.value.station_id),m=S(()=>!!a.value&&!!e.value),v=S(()=>{var s;return t.value?"admin":c.value?"station-admin":i.value?"station":((s=e.value)==null?void 0:s.role)||"readonly"}),h=S(()=>{var s;return((s=e.value)==null?void 0:s.station_id)||null}),y=S(()=>{var l;if(!((l=e.value)!=null&&l.username))return null;const s=e.value.username;return s.endsWith("-admin")&&!X.includes(s)?s.replace(/-admin$/,""):i.value&&!s.includes("-")?s:null});function f(s){if(t.value)return!0;if(c.value){const l=y.value;return typeof s=="string"?s.toLowerCase()===(l==null?void 0:l.toLowerCase()):h.value===s}return!!(i.value&&h.value===s)}async function d(s,l){try{const w=await $.post("/auth/login",{username:s,password:l});return w.success?(a.value=w.token,e.value=w.user,localStorage.setItem("auth_token",w.token),!0):!1}catch(w){return console.error("Login error:",w),!1}}function g(){a.value=null,e.value=null,localStorage.removeItem("auth_token")}async function k(){if(!a.value)return!1;try{const s=await $.get("/auth/me");return s.success?(e.value=s.user,!0):(g(),!1)}catch{return g(),!1}}function b(s){n.value=s}function p(){const s=n.value;return n.value="/",s}return{user:e,token:a,redirectPath:n,isAuthenticated:m,isAdmin:t,isStationAdmin:c,isStationUser:i,userRole:v,userStation:h,userStationFromUsername:y,canEditStation:f,login:d,logout:g,initialize:k,setRedirectPath:b,getRedirectPath:p}}),oe=G("stations",()=>{const e=M([]),a=M(null),n=M(!1),t=M(null),c=S(()=>e.value.length),i=S(()=>e.value.filter(d=>d.status==="Active")),m=S(()=>d=>e.value.find(g=>g.acronym===d));async function v(){n.value=!0,t.value=null;try{const d=await $.get("/stations");d.data?e.value=d.data||[]:d.success?e.value=d.data||[]:t.value=d.error||"Failed to fetch stations"}catch(d){t.value=d.message}finally{n.value=!1}}async function h(d){n.value=!0,t.value=null;try{const g=await $.get(`/stations/${d}`),k=g.data||(g.success?g.data:null);return k?(a.value=k,k):(t.value=g.error||"Station not found",null)}catch(g){return t.value=g.message,null}finally{n.value=!1}}async function y(d,g){n.value=!0,t.value=null;try{const k=await $.put(`/stations/${d}`,g),b=k.data||(k.success?k.data:null);if(b){a.value=b;const p=e.value.findIndex(s=>s.id===d);return p!==-1&&(e.value[p]=b),b}else return t.value=k.error||"Failed to update station",null}catch(k){return t.value=k.message,null}finally{n.value=!1}}function f(){a.value=null}return{stations:e,currentStation:a,loading:n,error:t,stationCount:c,activeStations:i,getStationByAcronym:m,fetchStations:v,fetchStation:h,updateStation:y,clearCurrentStation:f}}),Me={class:"navbar bg-base-100 shadow-lg sticky top-0 z-50"},Ae={class:"navbar-start"},$e={class:"navbar-center hidden lg:flex"},Pe={class:"breadcrumbs text-sm"},Ie={class:"navbar-end"},ze={key:0,class:"dropdown dropdown-end mr-2"},Ce={tabindex:"0",class:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow-lg bg-base-100 rounded-box w-52"},Ee={class:"dropdown dropdown-end"},Le={tabindex:"0",role:"button",class:"btn btn-ghost gap-2"},Ve={class:"avatar placeholder"},Be={class:"bg-neutral text-neutral-content rounded-full w-8"},He={class:"text-xs"},Te={class:"hidden sm:inline"},je={tabindex:"0",class:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow-lg bg-base-100 rounded-box w-52"},Ne={key:0},De={key:1},Re={__name:"TheNavbar",setup(e){const a=ee(),n=ve(),t=J(),c=oe(),i=S(()=>{const y=[{name:"Home",path:"/"}];return a.params.acronym&&y.push({name:a.params.acronym,path:`/stations/${a.params.acronym}`}),y}),m=S(()=>{var f,d;const y=(f=t.user)==null?void 0:f.station_normalized_name;if(y&&!t.isAdmin){const g=c.stations.find(k=>k.normalized_name===y);if(g!=null&&g.display_name)return g.display_name}return((d=t.user)==null?void 0:d.username)||"User"}),v=S(()=>{const y=t.userRole;return{admin:"badge-primary",station:"badge-secondary",readonly:"badge-ghost"}[y]||"badge-ghost"});async function h(){t.logout(),n.push("/login")}return(y,f)=>{const d=te("router-link");return _(),x("nav",Me,[r("div",Ae,[z(d,{to:"/",class:"btn btn-ghost normal-case text-xl"},{default:C(()=>[...f[0]||(f[0]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})],-1),j(" SITES Spectral ",-1)])]),_:1})]),r("div",$e,[r("div",Pe,[r("ul",null,[(_(!0),x(O,null,q(i.value,g=>(_(),x("li",{key:g.path},[z(d,{to:g.path,class:"hover:text-primary"},{default:C(()=>[j(B(g.name),1)]),_:2},1032,["to"])]))),128))])])]),r("div",Ie,[f[8]||(f[8]=ne('<label class="swap swap-rotate btn btn-ghost btn-circle mr-2"><input type="checkbox" class="theme-controller" value="dark"><svg class="swap-on fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,4.93,6.34Zm12,.29a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41L17,5.64a1,1,0,0,0,0,1.41A1,1,0,0,0,17.66,7.34ZM21,11H20a1,1,0,0,0,0,2h1a1,1,0,0,0,0-2Zm-9,8a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM18.36,17A1,1,0,0,0,17,18.36l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41ZM12,6.5A5.5,5.5,0,1,0,17.5,12,5.51,5.51,0,0,0,12,6.5Zm0,9A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"></path></svg><svg class="swap-off fill-current w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"></path></svg></label>',1)),E(t).isAdmin?(_(),x("div",ze,[r("div",{tabindex:"0",role:"button",class:H(["btn btn-ghost btn-sm",{"btn-active":E(a).path.startsWith("/admin")}])},[...f[1]||(f[1]=[ne('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg><span class="hidden md:inline">Admin</span><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',3)])],2),r("ul",Ce,[r("li",null,[z(d,{to:"/admin",class:H({active:E(a).path==="/admin"})},{default:C(()=>[...f[2]||(f[2]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),j(" Dashboard ",-1)])]),_:1},8,["class"])]),r("li",null,[z(d,{to:"/admin/settings",class:H({active:E(a).path==="/admin/settings"})},{default:C(()=>[...f[3]||(f[3]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),j(" Users & Settings ",-1)])]),_:1},8,["class"])])])])):V("",!0),r("div",Ee,[r("div",Le,[r("div",Ve,[r("div",Be,[r("span",He,B(m.value.charAt(0).toUpperCase()),1)])]),r("span",Te,B(m.value),1),r("span",{class:H(["badge badge-sm",v.value])},B(E(t).userRole),3)]),r("ul",je,[E(t).isAdmin?(_(),x("li",Ne,[z(d,{to:"/admin"},{default:C(()=>[...f[4]||(f[4]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),j(" Admin Dashboard ",-1)])]),_:1})])):V("",!0),E(t).isAdmin?(_(),x("li",De,[z(d,{to:"/admin/settings"},{default:C(()=>[...f[5]||(f[5]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),j(" Users & Settings ",-1)])]),_:1})])):V("",!0),f[6]||(f[6]=r("li",null,[r("a",{class:"justify-between"},[j(" Profile "),r("span",{class:"badge badge-sm badge-outline"},"Coming soon")])],-1)),f[7]||(f[7]=r("li",{class:"divider"},null,-1)),r("li",null,[r("button",{onClick:h,class:"text-error"}," Logout ")])])])])])}}},Fe=G("platforms",()=>{const e=M([]),a=M(null),n=M(!1),t=M(null),c=S(()=>e.value.length),i=S(()=>{const b={fixed:[],uav:[],satellite:[]};return e.value.forEach(p=>{const s=p.platform_type||"fixed";b[s]&&b[s].push(p)}),b}),m=S(()=>e.value.filter(b=>b.status==="Active"));async function v(b){n.value=!0,t.value=null;try{const p=await $.get(`/platforms/station/${b}`);p.data?e.value=p.data||[]:p.success?e.value=p.data||[]:t.value=p.error||"Failed to fetch platforms"}catch(p){t.value=p.message}finally{n.value=!1}}async function h(b){n.value=!0,t.value=null;try{const p=await $.get(`/platforms/${b}`),s=p.data||(p.success?p.data:null);return s?(a.value=s,s):(t.value=p.error||"Platform not found",null)}catch(p){return t.value=p.message,null}finally{n.value=!1}}async function y(b){n.value=!0,t.value=null;try{const p=await $.post("/platforms",b),s=p.data||(p.success?p.data:null);return s?(e.value.push(s),s):(t.value=p.error||"Failed to create platform",null)}catch(p){return t.value=p.message,null}finally{n.value=!1}}async function f(b,p){var s;n.value=!0,t.value=null;try{const l=await $.put(`/platforms/${b}`,p),w=l.data||(l.success?l.data:null);if(w){const P=e.value.findIndex(T=>T.id===b);return P!==-1&&(e.value[P]=w),((s=a.value)==null?void 0:s.id)===b&&(a.value=w),w}else return t.value=l.error||"Failed to update platform",null}catch(l){return t.value=l.message,null}finally{n.value=!1}}async function d(b){var p;n.value=!0,t.value=null;try{const s=await $.delete(`/platforms/${b}`);return s.deleted||s.success?(e.value=e.value.filter(l=>l.id!==b),((p=a.value)==null?void 0:p.id)===b&&(a.value=null),!0):(t.value=s.error||"Failed to delete platform",!1)}catch(s){return t.value=s.message,!1}finally{n.value=!1}}function g(){a.value=null}function k(){e.value=[],a.value=null}return{platforms:e,currentPlatform:a,loading:n,error:t,platformCount:c,platformsByType:i,activePlatforms:m,fetchPlatformsByStation:v,fetchPlatform:h,createPlatform:y,updatePlatform:f,deletePlatform:d,clearCurrentPlatform:g,clearPlatforms:k}}),Oe=G("instruments",()=>{const e=M([]),a=M(null),n=M(!1),t=M(null),c=S(()=>e.value.length),i=S(()=>{const s={};return e.value.forEach(l=>{const w=l.instrument_type||"Unknown";s[w]||(s[w]=[]),s[w].push(l)}),s}),m=S(()=>e.value.filter(s=>s.status==="Active")),v=S(()=>e.value.filter(s=>s.measurement_status==="Operational"));async function h(s){n.value=!0,t.value=null;try{const l=await $.get(`/instruments/platform/${s}`);l.data?e.value=l.data||[]:l.success?e.value=l.data||[]:t.value=l.error||"Failed to fetch instruments"}catch(l){t.value=l.message}finally{n.value=!1}}async function y(s){n.value=!0,t.value=null;try{const l=await $.get(`/instruments/station/${s}`);l.data?e.value=l.data||[]:l.success?e.value=l.data||[]:t.value=l.error||"Failed to fetch instruments"}catch(l){t.value=l.message}finally{n.value=!1}}async function f(s){n.value=!0,t.value=null;try{const l=await $.get(`/instruments/${s}`),w=l.data||(l.success?l.data:null);return w?(a.value=w,w):(t.value=l.error||"Instrument not found",null)}catch(l){return t.value=l.message,null}finally{n.value=!1}}async function d(s){n.value=!0,t.value=null;try{const l=await $.post("/instruments",s),w=l.data||(l.success?l.data:null);return w?(e.value.push(w),w):(t.value=l.error||"Failed to create instrument",null)}catch(l){return t.value=l.message,null}finally{n.value=!1}}async function g(s,l){var w;n.value=!0,t.value=null;try{const P=await $.put(`/instruments/${s}`,l),T=P.data||(P.success?P.data:null);if(T){const R=e.value.findIndex(Y=>Y.id===s);return R!==-1&&(e.value[R]=T),((w=a.value)==null?void 0:w.id)===s&&(a.value=T),T}else return t.value=P.error||"Failed to update instrument",null}catch(P){return t.value=P.message,null}finally{n.value=!1}}async function k(s){var l;n.value=!0,t.value=null;try{const w=await $.delete(`/instruments/${s}`);return w.deleted||w.success?(e.value=e.value.filter(P=>P.id!==s),((l=a.value)==null?void 0:l.id)===s&&(a.value=null),!0):(t.value=w.error||"Failed to delete instrument",!1)}catch(w){return t.value=w.message,!1}finally{n.value=!1}}function b(){a.value=null}function p(){e.value=[],a.value=null}return{instruments:e,currentInstrument:a,loading:n,error:t,instrumentCount:c,instrumentsByType:i,activeInstruments:m,operationalInstruments:v,fetchInstrumentsByPlatform:h,fetchInstrumentsByStation:y,fetchInstrument:f,createInstrument:d,updateInstrument:g,deleteInstrument:k,clearCurrentInstrument:b,clearInstruments:p}}),qe={class:"w-64 bg-base-100 min-h-screen border-r border-base-200 fixed left-0 top-16 overflow-y-auto pb-20"},Ue={class:"p-3"},Ze={class:"flex items-center justify-between mb-3 px-1"},We={class:"badge badge-primary badge-xs"},Ge={key:0,class:"flex justify-center py-8"},Je={key:1,class:"alert alert-error text-xs p-2"},Ke={key:2,class:"menu menu-xs bg-base-100 rounded-lg p-0 gap-0.5"},Ye={class:"flex items-center gap-1 p-0"},Qe=["onClick"],Xe={class:"font-medium"},et={class:"text-xs text-base-content/50 truncate hidden lg:inline"},tt={key:0,class:"ml-4 pl-2 border-l border-base-300"},nt={key:0,class:"py-2 pl-2"},st={class:"flex items-center gap-1 p-0"},at=["onClick"],rt={xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5 flex-shrink-0 text-base-content/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ot=["d"],lt={class:"truncate"},it={key:0,class:"ml-4 pl-2 border-l border-base-300"},ut={key:0,class:"py-1 pl-2"},ct={xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 flex-shrink-0 text-base-content/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},dt=["d"],mt={class:"truncate"},vt={key:1,class:"py-1 pl-2 text-xs text-base-content/40 italic"},ft={key:1,class:"py-2 pl-2 text-xs text-base-content/40 italic"},ht={key:3,class:"mt-6 pt-4 border-t border-base-200"},pt={class:"menu menu-xs p-0"},gt={__name:"TheSidebar",setup(e){const a=ee(),n=oe(),t=Fe(),c=Oe(),i=J(),m=M(new Set),v=M(new Set),h=M({}),y=M({}),f=M(new Set),d=M(new Set);fe(async()=>{n.stations.length===0&&await n.fetchStations()});const g=S(()=>a.params.acronym),k=S(()=>a.params.id?parseInt(a.params.id):null),b=S(()=>a.name==="instrument"&&a.params.id?parseInt(a.params.id):null);he([g,k,b],async()=>{if(g.value){m.value.add(g.value);const u=p.value.find(o=>o.acronym===g.value);u&&!h.value[u.id]&&await w(u)}if(k.value&&t.currentPlatform){const u=t.currentPlatform;m.value.add(u.station_acronym),v.value.add(k.value),y.value[k.value]||await P(k.value)}if(b.value&&c.currentInstrument){const o=c.currentInstrument.platform_id;v.value.add(o),y.value[o]||await P(o)}},{immediate:!0});const p=S(()=>{var L;const u=n.activeStations;if(i.isAdmin)return u;const o=(L=i.user)==null?void 0:L.station_normalized_name;return o?u.filter(I=>{var A;return I.normalized_name===o||((A=I.acronym)==null?void 0:A.toLowerCase())===o.toLowerCase()}):u});async function s(u){const o=u.acronym;m.value.has(o)?m.value.delete(o):(m.value.add(o),h.value[u.id]||await w(u))}async function l(u){v.value.has(u)?v.value.delete(u):(v.value.add(u),y.value[u]||await P(u))}async function w(u){if(!f.value.has(u.id)){f.value.add(u.id);try{const o=await fetch(`/api/v10/platforms/station/${u.id}`);if(o.ok){const L=await o.json();h.value[u.id]=L.data||[]}}catch(o){console.error("Failed to load platforms:",o)}finally{f.value.delete(u.id)}}}async function P(u){if(!d.value.has(u)){d.value.add(u);try{const o=await fetch(`/api/v10/instruments/platform/${u}`);if(o.ok){const L=await o.json();y.value[u]=L.data||[]}}catch(o){console.error("Failed to load instruments:",o)}finally{d.value.delete(u)}}}function T(u){return h.value[u]||[]}function R(u){return y.value[u]||[]}function Y(u){return g.value===u&&!k.value}function ue(u){return k.value===u&&!b.value}function ce(u){return b.value===u}function de(u){const o={fixed:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4",uav:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM12 12m-3 0a3 3 0 106 0 3 3 0 00-6 0",satellite:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",mobile:"M8 17h.01M14 17h.01M8 17a2 2 0 11-4 0 2 2 0 014 0zm8 0a2 2 0 11-4 0 2 2 0 014 0zM5 17H3v-4a1 1 0 011-1h1V9a1 1 0 011-1h8a1 1 0 011 1v3h2a1 1 0 011 1v4h-2",usv:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z",uuv:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"};return o[u]||o.fixed}function me(u){const o=(u==null?void 0:u.toLowerCase())||"";return o.includes("phenocam")||o.includes("camera")?"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z M15 13a3 3 0 11-6 0 3 3 0 016 0z":o.includes("multispectral")?"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253":o.includes("par")?"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z":o.includes("ndvi")?"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z":o.includes("pri")?"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z":o.includes("hyperspectral")?"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01":o.includes("thermal")?"M9 19c-4.3 1.4-6-2.7-6-7 0-4.3 1.7-8.4 6-7m0 14V5m0 14a5 5 0 005-5 5 5 0 00-5-5":o.includes("lidar")?"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3":o.includes("radar")||o.includes("sar")?"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.14 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0":"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"}return(u,o)=>{const L=te("router-link");return _(),x("aside",qe,[r("div",Ue,[r("div",Ze,[o[0]||(o[0]=r("h2",{class:"text-sm font-semibold text-base-content/70 uppercase tracking-wide"},"Navigation",-1)),r("span",We,B(p.value.length),1)]),E(n).loading?(_(),x("div",Ge,[...o[1]||(o[1]=[r("span",{class:"loading loading-spinner loading-sm"},null,-1)])])):E(n).error?(_(),x("div",Je,[r("span",null,B(E(n).error),1)])):(_(),x("ul",Ke,[(_(!0),x(O,null,q(p.value,I=>(_(),x("li",{key:I.acronym},[r("div",Ye,[r("button",{class:"btn btn-ghost btn-xs btn-square",onClick:se(A=>s(I),["stop"])},[(_(),x("svg",{xmlns:"http://www.w3.org/2000/svg",class:H(["h-3 w-3 transition-transform",{"rotate-90":m.value.has(I.acronym)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...o[2]||(o[2]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,Qe),z(L,{to:`/stations/${I.acronym}`,class:H(["flex-1 flex items-center gap-2 py-1.5 px-1 rounded hover:bg-base-200 text-sm",{"bg-primary/10 text-primary font-medium":Y(I.acronym)}])},{default:C(()=>[o[3]||(o[3]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),r("span",Xe,B(I.acronym),1),r("span",et,B(I.display_name),1)]),_:2},1032,["to","class"])]),m.value.has(I.acronym)?(_(),x("ul",tt,[f.value.has(I.id)?(_(),x("li",nt,[...o[4]||(o[4]=[r("span",{class:"loading loading-spinner loading-xs"},null,-1)])])):V("",!0),(_(!0),x(O,null,q(T(I.id),A=>(_(),x("li",{key:A.id,class:"mt-0.5"},[r("div",st,[r("button",{class:"btn btn-ghost btn-xs btn-square",onClick:se(D=>l(A.id),["stop"])},[(_(),x("svg",{xmlns:"http://www.w3.org/2000/svg",class:H(["h-3 w-3 transition-transform",{"rotate-90":v.value.has(A.id)}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...o[5]||(o[5]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])],2))],8,at),z(L,{to:`/platforms/${A.id}`,class:H(["flex-1 flex items-center gap-2 py-1 px-1 rounded hover:bg-base-200 text-xs",{"bg-primary/10 text-primary font-medium":ue(A.id)}])},{default:C(()=>[(_(),x("svg",rt,[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:de(A.platform_type)},null,8,ot)])),r("span",lt,B(A.normalized_name||A.display_name),1)]),_:2},1032,["to","class"])]),v.value.has(A.id)?(_(),x("ul",it,[d.value.has(A.id)?(_(),x("li",ut,[...o[6]||(o[6]=[r("span",{class:"loading loading-spinner loading-xs"},null,-1)])])):V("",!0),(_(!0),x(O,null,q(R(A.id),D=>(_(),x("li",{key:D.id,class:"mt-0.5"},[z(L,{to:`/instruments/${D.id}`,class:H(["flex items-center gap-2 py-1 px-2 rounded hover:bg-base-200 text-xs",{"bg-primary/10 text-primary font-medium":ce(D.id)}])},{default:C(()=>[(_(),x("svg",ct,[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:me(D.instrument_type)},null,8,dt)])),r("span",mt,B(D.normalized_name||D.display_name),1)]),_:2},1032,["to","class"])]))),128)),!d.value.has(A.id)&&R(A.id).length===0?(_(),x("li",vt," No instruments ")):V("",!0)])):V("",!0)]))),128)),!f.value.has(I.id)&&T(I.id).length===0?(_(),x("li",ft," No platforms ")):V("",!0)])):V("",!0)]))),128))])),E(i).isAdmin?(_(),x("div",ht,[o[9]||(o[9]=r("h3",{class:"text-xs font-medium text-base-content/50 uppercase tracking-wide mb-2 px-1"},"Admin",-1)),r("ul",pt,[r("li",null,[z(L,{to:"/admin",class:"text-base-content/70 py-1.5"},{default:C(()=>[...o[7]||(o[7]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),j(" Dashboard ",-1)])]),_:1})]),r("li",null,[z(L,{to:"/admin/settings",class:"text-base-content/70 py-1.5"},{default:C(()=>[...o[8]||(o[8]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),j(" Users & Settings ",-1)])]),_:1})])])])):V("",!0)])])}}},F=M([]);let wt=0;const ae={success:"alert-success",error:"alert-error",warning:"alert-warning",info:"alert-info"};function _t(){function e(v,h="info",y=5e3){const f=++wt;return F.value.push({id:f,message:v,type:h,style:ae[h]||ae.info}),y>0&&setTimeout(()=>{i(f)},y),f}function a(v,h=5e3){return e(v,"success",h)}function n(v,h=8e3){return e(v,"error",h)}function t(v,h=6e3){return e(v,"warning",h)}function c(v,h=5e3){return e(v,"info",h)}function i(v){const h=F.value.findIndex(y=>y.id===v);h!==-1&&F.value.splice(h,1)}function m(){F.value=[]}return{notifications:F,notify:e,success:a,error:n,warning:t,info:c,remove:i,clearAll:m}}const le=(e,a)=>{const n=e.__vccOpts||e;for(const[t,c]of a)n[t]=c;return n},yt={class:"toast toast-top toast-end z-50"},bt={xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},xt=["d"],kt=["onClick"],St={__name:"NotificationToast",setup(e){const{notifications:a,remove:n}=_t();function t(c){const i={success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"};return i[c]||i.info}return(c,i)=>(_(),x("div",yt,[z(pe,{name:"notification"},{default:C(()=>[(_(!0),x(O,null,q(E(a),m=>(_(),x("div",{key:m.id,class:H(["alert",m.style,"shadow-lg"])},[(_(),x("svg",bt,[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:t(m.type)},null,8,xt)])),r("span",null,B(m.message),1),r("button",{class:"btn btn-ghost btn-sm btn-circle",onClick:v=>E(n)(m.id),"aria-label":"Dismiss notification"},[...i[0]||(i[0]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,kt)],2))),128))]),_:1})]))}},Mt=le(St,[["__scopeId","data-v-a42a999f"]]),At={class:"min-h-screen bg-base-200"},$t={class:"flex"},Pt={class:"max-w-6xl mx-auto"},It={__name:"App",setup(e){const a=ee(),n=J(),t=S(()=>n.isAuthenticated&&a.name!=="login"),c=S(()=>a.name!=="login");return(i,m)=>{const v=te("router-view");return _(),x("div",At,[z(Mt),c.value?(_(),Q(Re,{key:0})):V("",!0),r("div",$t,[t.value?(_(),Q(gt,{key:0})):V("",!0),r("main",{class:H(["flex-1 p-4 lg:p-6",{"ml-64":t.value}])},[r("div",Pt,[z(v,null,{default:C(({Component:h})=>[z(ge,{name:"fade",mode:"out-in"},{default:C(()=>[(_(),Q(we(h)))]),_:2},1024)]),_:1})])],2)])])}}},zt=le(It,[["__scopeId","data-v-f4f3d395"]]),Ct="modulepreload",Et=function(e){return"/"+e},re={},N=function(a,n,t){let c=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),v=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=Promise.allSettled(n.map(h=>{if(h=Et(h),h in re)return;re[h]=!0;const y=h.endsWith(".css"),f=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const d=document.createElement("link");if(d.rel=y?"stylesheet":Ct,y||(d.as="script"),d.crossOrigin="",d.href=h,v&&d.setAttribute("nonce",v),document.head.appendChild(d),y)return new Promise((g,k)=>{d.addEventListener("load",g),d.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(m){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=m,window.dispatchEvent(v),!v.defaultPrevented)throw m}return c.then(m=>{for(const v of m||[])v.status==="rejected"&&i(v.reason);return a().catch(i)})},Lt=()=>N(()=>import("./LoginView-BDnt5z9-.js"),__vite__mapDeps([0,1])),Vt=()=>N(()=>import("./DashboardView-BAZSu8jD.js"),__vite__mapDeps([2,1,3,4,5])),Bt=()=>N(()=>import("./AdminDashboardView-D8wwdnL7.js"),__vite__mapDeps([6,1])),Ht=()=>N(()=>import("./AdminView-CgFJjal5.js"),__vite__mapDeps([7,1])),Tt=()=>N(()=>import("./StationView-ZXxnWMHA.js"),__vite__mapDeps([8,3,1,9,10,4])),jt=()=>N(()=>import("./PlatformView-CQSWA2xj.js"),__vite__mapDeps([11,1,9,3,10,12])),Nt=()=>N(()=>import("./InstrumentView-CHylimSf.js"),__vite__mapDeps([13,1,9,3,12,14])),Dt=()=>N(()=>import("./NotFoundView-atMAHYoN.js"),__vite__mapDeps([15,1])),Rt=[{path:"/login",name:"login",component:Lt,meta:{requiresAuth:!1,title:"Login"}},{path:"/",name:"dashboard",component:Vt,meta:{requiresAuth:!0,title:"Dashboard"}},{path:"/admin",name:"admin",component:Bt,meta:{requiresAuth:!0,requiresAdmin:!0,title:"Admin Dashboard"}},{path:"/admin/settings",name:"admin-settings",component:Ht,meta:{requiresAuth:!0,requiresAdmin:!0,title:"Admin Settings"}},{path:"/stations/:acronym",name:"station",component:Tt,props:!0,meta:{requiresAuth:!0,title:"Station"}},{path:"/platforms/:id",name:"platform",component:jt,props:e=>({id:Number(e.params.id)}),meta:{requiresAuth:!0,title:"Platform"}},{path:"/instruments/:id",name:"instrument",component:Nt,props:e=>({id:Number(e.params.id)}),meta:{requiresAuth:!0,title:"Instrument"}},{path:"/:pathMatch(.*)*",name:"not-found",component:Dt,meta:{requiresAuth:!1,title:"Not Found"}}],ie=_e({history:ye(),routes:Rt,scrollBehavior(e,a,n){return n||{top:0}}});ie.beforeEach(async(e,a,n)=>{const t=J();if(document.title=e.meta.title?`${e.meta.title} | SITES Spectral`:"SITES Spectral",e.meta.requiresAuth&&!t.isAuthenticated){t.setRedirectPath(e.fullPath),n({name:"login"});return}if(e.meta.requiresAdmin&&!t.isAdmin){n({name:"dashboard"});return}if(e.name==="login"&&t.isAuthenticated){n({name:"dashboard"});return}n()});const K=be(zt);K.use(xe());K.use(ie);K.config.errorHandler=(e,a,n)=>{console.error("Vue Error:",e),console.error("Component:",a),console.error("Info:",n)};K.mount("#app");export{X as A,le as _,oe as a,_t as b,$ as c,Se as d,Fe as e,Oe as f,J as u};
